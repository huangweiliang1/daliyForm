import{ao as e,r as t,an as a,l as s,k as l,ax as i,ac as n,f as r,o,j as c,n as d,ae as u,c as v,i as h,ay as p,h as g,U as m,z as w,B as f,R as y,J as b,al as k,A as C,W as S,O as D,L as x,ah as A,Q as T,a5 as M,I as W,P as _,D as L,az as E,K as O,ai as V,E as I,aA as z,T as F,af as P,u as U,S as j,v as B,C as R,au as q}from"./vue-vendor-Br4Vyilo.js";import{E as N,a as $,p as Q,r as Y,d as H,e as J,l as Z,b as K,c as G,f as X,g as ee,m as te,h as ae,i as se,u as le,j as ie,k as ne,n as re,s as oe,t as ce,o as de,q as ue,v as ve,w as he,x as pe}from"./element-plus-vendor-md41yW8N.js";import{o as ge}from"./utils-vendor-7JQXQzuE.js";
/*!
 * pinia v2.3.1
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */
let me;!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const a of e)if("childList"===a.type)for(const e of a.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const we=e=>me=e,fe=Symbol();function ye(e){return e&&"object"==typeof e&&"[object Object]"===Object.prototype.toString.call(e)&&"function"!=typeof e.toJSON}var be,ke;(ke=be||(be={})).direct="direct",ke.patchObject="patch object",ke.patchFunction="patch function";const Ce=()=>{};function Se(e,t,a,s=Ce){e.push(t);const l=()=>{const a=e.indexOf(t);a>-1&&(e.splice(a,1),s())};return!a&&r()&&o(l),l}function De(e,...t){e.slice().forEach(e=>{e(...t)})}const xe=e=>e(),Ae=Symbol(),Te=Symbol();function Me(e,t){e instanceof Map&&t instanceof Map?t.forEach((t,a)=>e.set(a,t)):e instanceof Set&&t instanceof Set&&t.forEach(e.add,e);for(const a in t){if(!t.hasOwnProperty(a))continue;const s=t[a],n=e[a];ye(n)&&ye(s)&&e.hasOwnProperty(a)&&!l(s)&&!i(s)?e[a]=Me(n,s):e[a]=s}return e}const We=Symbol();function _e(e){return!ye(e)||!e.hasOwnProperty(We)}const{assign:Le}=Object;function Ee(e){return!(!l(e)||!e.effect)}function Oe(a,r,o={},u,v,h){let p;const g=Le({actions:{}},o),m={deep:!0};let w,f,y,b=[],k=[];const C=u.state.value[a];let S;function D(e){let t;w=f=!1,"function"==typeof e?(e(u.state.value[a]),t={type:be.patchFunction,storeId:a,events:y}):(Me(u.state.value[a],e),t={type:be.patchObject,payload:e,storeId:a,events:y});const s=S=Symbol();d().then(()=>{S===s&&(w=!0)}),f=!0,De(b,t,u.state.value[a])}h||C||(u.state.value[a]={}),t({});const x=h?function(){const{state:e}=o,t=e?e():{};this.$patch(e=>{Le(e,t)})}:Ce;const A=(e,t="")=>{if(Ae in e)return e[Te]=t,e;const s=function(){we(u);const t=Array.from(arguments),l=[],i=[];let n;De(k,{args:t,name:s[Te],store:M,after:function(e){l.push(e)},onError:function(e){i.push(e)}});try{n=e.apply(this&&this.$id===a?this:M,t)}catch(r){throw De(i,r),r}return n instanceof Promise?n.then(e=>(De(l,e),e)).catch(e=>(De(i,e),Promise.reject(e))):(De(l,n),n)};return s[Ae]=!0,s[Te]=t,s},T={_p:u,$id:a,$onAction:Se.bind(null,k),$patch:D,$reset:x,$subscribe(e,t={}){const s=Se(b,e,t.detached,()=>l()),l=p.run(()=>c(()=>u.state.value[a],s=>{("sync"===t.flush?f:w)&&e({storeId:a,type:be.direct,events:y},s)},Le({},m,t)));return s},$dispose:function(){p.stop(),b=[],k=[],u._s.delete(a)}},M=s(T);u._s.set(a,M);const W=(u._a&&u._a.runWithContext||xe)(()=>u._e.run(()=>(p=e()).run(()=>r({action:A}))));for(const e in W){const t=W[e];if(l(t)&&!Ee(t)||i(t))h||(C&&_e(t)&&(l(t)?t.value=C[e]:Me(t,C[e])),u.state.value[a][e]=t);else if("function"==typeof t){const a=A(t,e);W[e]=a,g.actions[e]=t}}return Le(M,W),Le(n(M),W),Object.defineProperty(M,"$state",{get:()=>u.state.value[a],set:e=>{D(t=>{Le(t,e)})}}),u._p.forEach(e=>{Le(M,p.run(()=>e({store:M,app:u._a,pinia:u,options:g})))}),C&&h&&o.hydrate&&o.hydrate(M.$state,C),w=!0,f=!0,M}
/*! #__NO_SIDE_EFFECTS__ */function Ve(e,t,s){let l,i;const n="function"==typeof t;function r(e,s){const r=p();(e=e||(r?h(fe,null):null))&&we(e),(e=me)._s.has(l)||(n?Oe(l,t,i,e):function(e,t,s){const{state:l,actions:i,getters:n}=t,r=s.state.value[e];let o;o=Oe(e,function(){r||(s.state.value[e]=l?l():{});const t=u(s.state.value[e]);return Le(t,i,Object.keys(n||{}).reduce((t,l)=>(t[l]=a(v(()=>{we(s);const t=s._s.get(e);return n[l].call(t,t)})),t),{}))},t,s,0,!0)}(l,i,e));return e._s.get(l)}return l=e,i=n?s:t,r.$id=l,r}const Ie="words",ze="diaries";let Fe;function Pe(){return Fe||(Fe=async function(){return ge("english_diary_db",1,{upgrade(e){e.objectStoreNames.contains(Ie)||e.createObjectStore(Ie,{keyPath:"id"}).createIndex("date","date",{unique:!1}),e.objectStoreNames.contains(ze)||e.createObjectStore(ze,{keyPath:"date"})}})}()),Fe}const Ue={getAll:async()=>(await Pe()).getAll(Ie),getByDate:async e=>(await Pe()).transaction(Ie,"readonly").store.index("date").getAll(e),async add(e){e.id||(e.id=Date.now().toString()),e.date||(e.date=(new Date).toISOString().split("T")[0]);return(await Pe()).add(Ie,e)},update:async e=>(await Pe()).put(Ie,e),delete:async e=>(await Pe()).delete(Ie,e),async importFromLocalStorage(){try{const e=localStorage.getItem("words");if(e){const t=JSON.parse(e),a=(await Pe()).transaction(Ie,"readwrite");for(const e of t)await a.store.put(e);return await a.done,!0}}catch(e){}return!1}},je={getAll:async()=>(await Pe()).getAll(ze),getByDate:async e=>(await Pe()).get(ze,e),async save(e){e.date||(e.date=(new Date).toISOString().split("T")[0]);return(await Pe()).put(ze,e)},delete:async e=>(await Pe()).delete(ze,e),async importFromLocalStorage(){try{const e=localStorage.getItem("diaries");if(e){const t=JSON.parse(e),a=(await Pe()).transaction(ze,"readwrite");for(const e of t)await a.store.put(e);return await a.done,!0}}catch(e){}return!1}},Be={async exportAll(){try{const e=await Ue.getAll();return{words:e,diaries:await je.getAll(),exportDate:(new Date).toISOString()}}catch(e){return null}},async importData(e){try{if(!e||!e.words&&!e.diaries)return!1;const t=await Pe();if(e.words&&e.words.length>0){const a=t.transaction(Ie,"readwrite");for(const t of e.words)await a.store.put(t);await a.done}if(e.diaries&&e.diaries.length>0){const a=t.transaction(ze,"readwrite");for(const t of e.diaries)await a.store.put(t);await a.done}return!0}catch(t){return!1}}};const Re=Ve("word",{state:()=>({words:[],diaries:[],lastUpdated:null,isLoading:!1,initialized:!1}),getters:{totalWords:e=>e.words.length,todayWords:e=>{const t=(new Date).toISOString().split("T")[0];return e.words.filter(e=>e.date===t).length},studyDays:e=>new Set(e.words.map(e=>e.date)).size,getWordsByDate:e=>t=>t?e.words.filter(e=>e.date===t):e.words,getDiaries:e=>e.diaries,getDiaryByDate:e=>t=>e.diaries.find(e=>e.date===t)},actions:{async initialize(){if(!this.initialized&&!this.isLoading){this.isLoading=!0;try{if(!window.indexedDB)return this.loadFromLocalStorage(),void(this.initialized=!0);await async function(){await Ue.importFromLocalStorage(),await je.importFromLocalStorage()}(),await this.loadFromDB(),this.initialized=!0}catch(e){try{this.loadFromLocalStorage(),this.initialized=!0}catch(t){}}finally{this.isLoading=!1}}},async loadFromDB(){try{this.isLoading=!0,this.words=await Ue.getAll(),this.diaries=await je.getAll(),this.lastUpdated=new Date}catch(e){}finally{this.isLoading=!1}},async addWord(e){e.id||(e.id=Date.now().toString()),e.date||(e.date=(new Date).toISOString().split("T")[0]);try{return await Ue.add(e),this.words.push(e),this.lastUpdated=new Date,this.saveToLocalStorage(),e}catch(t){throw t}},async updateWord(e){try{await Ue.update(e);const t=this.words.findIndex(t=>t.id===e.id);return-1!==t&&(this.words[t]={...this.words[t],...e},this.lastUpdated=new Date,this.saveToLocalStorage(),!0)}catch(t){throw t}},async deleteWord(e){try{await Ue.delete(e);const t=this.words.findIndex(t=>t.id===e);return-1!==t&&(this.words.splice(t,1),this.lastUpdated=new Date,this.saveToLocalStorage(),!0)}catch(t){throw t}},async addDiary(e){e.date||(e.date=(new Date).toISOString().split("T")[0]);try{await je.save(e);const t=this.diaries.findIndex(t=>t.date===e.date);-1!==t?this.diaries[t]=e:this.diaries.push(e),this.lastUpdated=new Date}catch(t){}},loadFromLocalStorage(){try{const e=localStorage.getItem("words");e&&(this.words=JSON.parse(e)),this.lastUpdated=new Date}catch(e){}},saveToLocalStorage(){try{localStorage.setItem("words",JSON.stringify(this.words)),this.lastUpdated=new Date}catch(e){}},async exportData(){try{return await Be.exportAll()}catch(e){return{words:this.words,exportDate:(new Date).toISOString()}}},async importData(e){if(!e||!e.words)return!1;try{const t=e.words.map(e=>{if(e.id||(e.id=Date.now().toString()+Math.random().toString(36).substr(2,9)),e.date)try{const t=new Date(e.date);e.date=t.toISOString().split("T")[0]}catch(t){e.date=(new Date).toISOString().split("T")[0]}else e.date=(new Date).toISOString().split("T")[0];return e}),a=await Be.importData({...e,words:t});return a&&(await this.loadFromDB(),this.saveToLocalStorage()),a}catch(t){try{if(e.words){const t=e.words.map(e=>(e.id||(e.id=Date.now().toString()+Math.random().toString(36).substr(2,9)),e.date||(e.date=(new Date).toISOString().split("T")[0]),e));return this.words=t,this.saveToLocalStorage(),!0}}catch(a){}return!1}},async clearAllData(){try{this.isLoading=!0;const e=await ge("english_diary_db",1),t=e.transaction("words","readwrite");await t.objectStore("words").clear(),await t.done;const a=e.transaction("diaries","readwrite");return await a.objectStore("diaries").clear(),await a.done,this.words=[],this.diaries=[],this.lastUpdated=new Date,localStorage.removeItem("words"),localStorage.removeItem("diaries"),!0}catch(e){return!1}finally{this.isLoading=!1}}}}),qe={success(e,t="成功"){$({type:"success",message:e,duration:3e3})},error(e,t="错误"){$({type:"error",message:e,duration:5e3,showClose:!0})},warning(e,t="警告"){$({type:"warning",message:e,duration:4e3})},info(e,t="提示"){$({type:"info",message:e,duration:3e3})},notify(e,t,a="info",s=4500){N({title:t,message:e,type:a,duration:s,position:"top-right"})},handleApiError(e,t="操作失败，请稍后重试"){var a;return"QuotaExceededError"===e.name?this.error("存储空间不足，请清理一些数据后重试"):"NetworkError"===e.name||(null==(a=e.message)?void 0:a.includes("network"))?this.error("网络连接错误，请检查您的网络连接"):e.message?this.error(e.message):this.error(t),e}},Ne=(e,t)=>{const a=e.__vccOpts||e;for(const[s,l]of t)a[s]=l;return a},$e={class:"add-word-container"},Qe={class:"container"},Ye={class:"form-section"},He={class:"form-section"},Je={class:"form-actions"},Ze={class:"quick-add-content mobile-quick-add-content"},Ke={key:0,class:"recent-words mobile-recent"},Ge={class:"recent-words-list mobile-list"};const Xe=Ne({name:"AddWord",emits:["word-added","switch-tab"],setup(e,{emit:a}){const l=Re(),i=t(null);t(null);const n=t(!1),r=t(""),o=t([]),d=s({word:"",phonetic:"",partOfSpeech:"",meaning:"",example:"",tags:"",synonyms:"",date:(new Date).toISOString().split("T")[0]}),u=v(()=>{const e=(new Date).toISOString().split("T")[0];return l.words.filter(t=>t.date===e).length}),h=e=>l.words.some(t=>t.word.toLowerCase()===e.toLowerCase()),p=async()=>{const e=d.tags?d.tags.split(",").map(e=>e.trim()).filter(e=>e):[],t={word:d.word.trim(),phonetic:d.phonetic.trim(),partOfSpeech:d.partOfSpeech,meaning:d.meaning.trim(),example:d.example.trim(),tags:e,synonyms:d.synonyms.trim(),date:d.date};await l.addWord(t),await new Promise(e=>setTimeout(e,100)),o.value.unshift(t.word),o.value.length>5&&(o.value=o.value.slice(0,5)),a("word-added",t);const s=new CustomEvent("wordUpdated",{detail:t});return window.dispatchEvent(s),setTimeout(()=>{const e=new CustomEvent("wordUpdated",{detail:t});window.dispatchEvent(e)},200),t},w=()=>{var e;null==(e=i.value)||e.resetFields(),Object.assign(d,{word:"",phonetic:"",partOfSpeech:"",meaning:"",example:"",tags:"",synonyms:"",date:(new Date).toISOString().split("T")[0]})},f=e=>{const t=e.detail;t&&(d.word=t.word||"",d.phonetic=t.phonetic||"",d.partOfSpeech=t.partOfSpeech||"",d.meaning=t.meaning||"",d.example=t.example||"",d.tags=Array.isArray(t.tags)?t.tags.join(", "):t.tags||"",d.synonyms=t.synonyms||"",d.date=t.date||(new Date).toISOString().split("T")[0],$.info({message:"正在编辑单词，请修改后保存",duration:2e3,showClose:!0}),a("switch-tab","add"))},y=()=>{};return g(()=>{window.addEventListener("resize",y),window.addEventListener("edit-word",f);const e=(()=>{var e;if("undefined"!=typeof window){const t=(null==(e=window.visualViewport)?void 0:e.height)||window.innerHeight,a=()=>{var e;const a=(null==(e=window.visualViewport)?void 0:e.height)||window.innerHeight;if(t-a>150){document.body.classList.add("keyboard-open");const e=document.activeElement;!e||"INPUT"!==e.tagName&&"TEXTAREA"!==e.tagName||setTimeout(()=>{e.scrollIntoView({behavior:"smooth",block:"center"})},100)}else document.body.classList.remove("keyboard-open")};return window.visualViewport?window.visualViewport.addEventListener("resize",a):(window.addEventListener("resize",a),document.addEventListener("focusin",a),document.addEventListener("focusout",a)),()=>{window.visualViewport?window.visualViewport.removeEventListener("resize",a):(window.removeEventListener("resize",a),document.removeEventListener("focusin",a),document.removeEventListener("focusout",a))}}})();(()=>{if("undefined"!=typeof window&&"ontouchstart"in window){let e=0;document.addEventListener("touchend",t=>{const a=Date.now();a-e<=300&&t.preventDefault(),e=a},!1),document.querySelectorAll("input, textarea").forEach(e=>{e.addEventListener("focus",()=>{setTimeout(()=>{e.scrollIntoView({behavior:"smooth",block:"center"})},300)})}),document.querySelectorAll(".el-button, .recent-word-item").forEach(e=>{e.addEventListener("touchstart",()=>{e.style.transform="scale(0.98)"}),e.addEventListener("touchend",()=>{e.style.transform="scale(1)"})})}})(),m(()=>{e&&e()})}),m(()=>{window.removeEventListener("resize",y),window.removeEventListener("edit-word",f)}),c(()=>[d.word,d.meaning],([e,t])=>{}),{wordFormRef:i,wordForm:d,rules:{word:[{required:!0,message:"请输入单词",trigger:"blur"},{pattern:/^[\w\s\-\']+$/,message:"单词不能包含中文字符或特殊字符",trigger:"blur"}],meaning:[{required:!0,message:"请输入中文意思",trigger:"blur"}],date:[{required:!0,message:"请选择日期",trigger:"change"}]},submitting:n,quickAddText:r,recentAddedWords:o,todayAddedCount:u,wordStore:l,handleWordInput:()=>{d.word=d.word.toLowerCase()},submitForm:()=>{var e;null==(e=i.value)||e.validate(async e=>{if(e){if(h(d.word))return void $.warning("该单词已存在，请检查是否拼写错误或尝试添加其他单词");n.value=!0;try{await p(),$.success({message:"单词添加成功！",duration:2e3,showClose:!0}),w()}catch(t){$.error("添加单词失败，请重试")}finally{n.value=!1}}})},resetForm:w,quickAdd:async()=>{if(!r.value.trim())return void $.warning("请输入单词和释义");const e=r.value.trim().split("-");if(e.length<2)return void $.warning("格式错误，请使用：单词-释义");const t=e[0].trim(),a=e.slice(1).join("-").trim();if(t&&a){if(h(t))return $.warning("该单词已存在"),void(r.value="");n.value=!0;try{d.word=t,d.meaning=a,await p(),$.success({message:"快速添加成功！",duration:1500,showClose:!0}),r.value="";const e=d.date;w(),d.date=e}catch(s){$.error("添加失败，请重试")}finally{n.value=!1}}else $.warning("单词和释义不能为空")},removeRecentWord:e=>{o.value.splice(e,1)},handleEditWord:f}}},[["render",function(e,t,a,s,l,i){const n=k("el-input"),r=k("el-form-item"),o=k("el-col"),c=k("el-option"),d=k("el-select"),u=k("el-row"),v=k("el-date-picker"),h=k("el-button"),p=k("el-form"),g=k("el-card"),m=k("el-tag");return C(),w("div",$e,[t[18]||(t[18]=f("div",{class:"background-decoration"},[f("div",{class:"bg-circle bg-circle-1"}),f("div",{class:"bg-circle bg-circle-2"}),f("div",{class:"bg-gradient"})],-1)),f("div",Qe,[y(g,{class:"add-word-card gradient-card"},{header:b(()=>[...t[10]||(t[10]=[f("div",{class:"card-header"},[f("div",{class:"header-icon"},[f("i",{class:"fas fa-plus-circle"})]),f("h2",{class:"gradient-text"},"添加单词")],-1)])]),default:b(()=>[y(p,{ref:"wordFormRef",model:s.wordForm,rules:s.rules,"label-width":"100px",class:"word-form",onSubmit:t[8]||(t[8]=S(()=>{},["prevent"]))},{default:b(()=>[f("div",Ye,[t[11]||(t[11]=f("h3",{class:"section-title"},"基础信息",-1)),y(u,{gutter:16},{default:b(()=>[y(o,{xs:24,sm:12,md:6},{default:b(()=>[y(r,{label:"英语单词",prop:"word"},{default:b(()=>[y(n,{modelValue:s.wordForm.word,"onUpdate:modelValue":t[0]||(t[0]=e=>s.wordForm.word=e),placeholder:"请输入单词",class:"form-input",clearable:"",onInput:s.handleWordInput},null,8,["modelValue","onInput"])]),_:1})]),_:1}),y(o,{xs:24,sm:12,md:6},{default:b(()=>[y(r,{label:"音标",prop:"phonetic"},{default:b(()=>[y(n,{modelValue:s.wordForm.phonetic,"onUpdate:modelValue":t[1]||(t[1]=e=>s.wordForm.phonetic=e),placeholder:"例如: /wɜːd/",class:"form-input",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),y(o,{xs:24,sm:12,md:6},{default:b(()=>[y(r,{label:"词性",prop:"partOfSpeech"},{default:b(()=>[y(d,{modelValue:s.wordForm.partOfSpeech,"onUpdate:modelValue":t[2]||(t[2]=e=>s.wordForm.partOfSpeech=e),placeholder:"请选择词性",class:"form-select",clearable:""},{default:b(()=>[y(c,{label:"名词",value:"n."}),y(c,{label:"动词",value:"v."}),y(c,{label:"形容词",value:"adj."}),y(c,{label:"副词",value:"adv."}),y(c,{label:"介词",value:"prep."}),y(c,{label:"连词",value:"conj."}),y(c,{label:"代词",value:"pron."}),y(c,{label:"数词",value:"num."}),y(c,{label:"感叹词",value:"interj."}),y(c,{label:"其他",value:"other"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),y(o,{xs:24,sm:12,md:6},{default:b(()=>[y(r,{label:"同义词/反义词",prop:"synonyms"},{default:b(()=>[y(n,{modelValue:s.wordForm.synonyms,"onUpdate:modelValue":t[3]||(t[3]=e=>s.wordForm.synonyms=e),placeholder:"用逗号分隔",class:"form-input",clearable:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),y(u,{gutter:16},{default:b(()=>[y(o,{xs:24,md:12},{default:b(()=>[y(r,{label:"中文意思",prop:"meaning"},{default:b(()=>[y(n,{modelValue:s.wordForm.meaning,"onUpdate:modelValue":t[4]||(t[4]=e=>s.wordForm.meaning=e),type:"textarea",rows:2,placeholder:"请输入中文意思",class:"form-textarea",resize:"vertical"},null,8,["modelValue"])]),_:1})]),_:1}),y(o,{xs:24,md:12},{default:b(()=>[y(r,{label:"例句",prop:"example"},{default:b(()=>[y(n,{modelValue:s.wordForm.example,"onUpdate:modelValue":t[5]||(t[5]=e=>s.wordForm.example=e),type:"textarea",rows:2,placeholder:"请输入例句",class:"form-textarea",resize:"vertical"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),f("div",He,[t[12]||(t[12]=f("h3",{class:"section-title"},"扩展信息",-1)),y(u,{gutter:16},{default:b(()=>[y(o,{xs:24,sm:12},{default:b(()=>[y(r,{label:"标签",prop:"tags"},{default:b(()=>[y(n,{modelValue:s.wordForm.tags,"onUpdate:modelValue":t[6]||(t[6]=e=>s.wordForm.tags=e),placeholder:"用逗号分隔，例如：常用, 商务",class:"form-input",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),y(o,{xs:24,sm:12},{default:b(()=>[y(r,{label:"日期",prop:"date"},{default:b(()=>[y(v,{modelValue:s.wordForm.date,"onUpdate:modelValue":t[7]||(t[7]=e=>s.wordForm.date=e),type:"date",placeholder:"选择日期","value-format":"YYYY-MM-DD",class:"form-datepicker"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),f("div",Je,[y(h,{onClick:s.resetForm,loading:s.submitting,class:"clear-btn"},{default:b(()=>[...t[13]||(t[13]=[f("i",{class:"fas fa-redo"},null,-1),D(" 重置 ",-1)])]),_:1},8,["onClick","loading"]),y(h,{onClick:s.submitForm,loading:s.submitting,class:"search-btn"},{default:b(()=>[...t[14]||(t[14]=[f("i",{class:"fas fa-save"},null,-1),D(" 保存单词 ",-1)])]),_:1},8,["onClick","loading"])])]),_:1},8,["model","rules"])]),_:1}),y(g,{class:"quick-add-card gradient-card mobile-quick-add-card"},{header:b(()=>[...t[15]||(t[15]=[f("div",{class:"card-header mobile-card-header"},[f("div",{class:"header-icon mobile-header-icon"},[f("i",{class:"fas fa-bolt"})]),f("h2",{class:"gradient-text mobile-gradient-text"},"快速添加")],-1)])]),default:b(()=>[f("div",Ze,[y(n,{modelValue:s.quickAddText,"onUpdate:modelValue":t[9]||(t[9]=e=>s.quickAddText=e),placeholder:"格式：单词-释义，例如：apple-苹果",class:"form-input quick-add-input mobile-quick-add-input",clearable:"",onKeyup:A(s.quickAdd,["enter"]),"show-word-limit":"",maxlength:"100",size:"large"},null,8,["modelValue","onKeyup"]),y(h,{onClick:s.quickAdd,loading:s.submitting,class:"quick-add-btn mobile-quick-add-btn",size:"large"},{default:b(()=>[...t[16]||(t[16]=[f("i",{class:"fas fa-plus"},null,-1),D(" 快速添加 ",-1)])]),_:1},8,["onClick","loading"])]),s.recentAddedWords.length>0?(C(),w("div",Ke,[t[17]||(t[17]=f("h4",{class:"mobile-title"},"最近添加：",-1)),f("div",Ge,[(C(!0),w(T,null,M(s.recentAddedWords,(e,t)=>(C(),W(m,{key:t,closable:!0,effect:"plain",class:"recent-word-tag mobile-tag",size:"small",onClose:e=>s.removeRecentWord(t)},{default:b(()=>[D(_(e),1)]),_:2},1032,["onClose"]))),128))])])):x("",!0)]),_:1})])])}],["__scopeId","data-v-936e5849"]]),et={class:"view-words-container"},tt={class:"top-bar"},at={class:"date-section"},st={class:"date-controls"},lt={class:"stats-section"},it={class:"stat-card"},nt={class:"stat-number"},rt={class:"stat-card"},ot={class:"stat-number"},ct={class:"words-list"},dt={key:0,class:"loading-container"},ut={key:1,class:"empty-state"},vt={class:"empty-content"},ht={class:"empty-title"},pt={class:"empty-description"},gt={key:2,class:"words-grid"},mt={class:"word-card-header"},wt={class:"word-main"},ft={class:"word-title"},yt={class:"word-text"},bt={key:0,class:"word-pronunciation"},kt={class:"word-actions"},Ct={class:"word-card-body"},St={class:"word-meaning-section"},Dt={class:"word-meaning"},xt={key:0,class:"word-example-section"},At={class:"word-example"},Tt={class:"word-card-footer"},Mt={class:"word-date-info"},Wt={class:"delete-dialog-content"},_t={class:"delete-message"},Lt={class:"delete-dialog-footer"};const Et=Ne({name:"ViewWords",components:{Loading:Z,Edit:J,Delete:H,RefreshLeft:Y,Plus:Q},emits:["edit-word","data-updated","switch-to-add"],setup(e,{emit:a}){const s=Re(),l=t(!1),i=t(""),n=t(!1),r=t(null),o=t(!1),c=v(()=>s.words||[]),d=v(()=>{let e=[...c.value];return i.value&&(e=e.filter(e=>u(e.date||e.createdAt)===i.value)),e.sort((e,t)=>{const a=new Date(e.date||e.createdAt);return new Date(t.date||t.createdAt)-a}),e}),u=e=>{if(!e)return"";try{const t=new Date(e);if(isNaN(t.getTime()))return e;const a=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0");return`${a}-${s}-${String(t.getDate()).padStart(2,"0")}`}catch(t){return e}};return g(async()=>{await(async()=>{l.value=!0;try{s.initialized||await s.initialize(),await s.loadFromDB()}catch(e){}finally{l.value=!1}})()}),{loading:l,selectedDate:i,deleteDialogVisible:n,currentWordToDelete:r,deleting:o,allWords:c,filteredWords:d,formatDate:e=>{if(!e)return"未知日期";try{const t=new Date(e);if(isNaN(t.getTime()))return e;const a=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0");return`${a}年${s}月${String(t.getDate()).padStart(2,"0")}日`}catch(t){return e}},loadWordsForDate:async()=>{},clearDateFilter:()=>{i.value=""},editWord:e=>{a("edit-word",e)},confirmDelete:e=>{r.value=e,n.value=!0},cancelDelete:()=>{n.value=!1,r.value=null},deleteWord:async()=>{if(r.value){o.value=!0;try{await s.deleteWord(r.value.id),a("data-updated"),n.value=!1,r.value=null}catch(e){}finally{o.value=!1}}}}}},[["render",function(e,t,a,s,l,i){const n=k("el-date-picker"),r=k("el-button"),o=k("el-dialog");return C(),w("div",et,[t[19]||(t[19]=f("div",{class:"page-header"},[f("div",{class:"header-content"},[f("h1",{class:"page-title"},"单词记录"),f("p",{class:"page-subtitle"},"管理和查看学习进度")])],-1)),f("div",tt,[f("div",at,[t[5]||(t[5]=f("div",{class:"section-title"},"日期筛选",-1)),f("div",st,[y(n,{modelValue:s.selectedDate,"onUpdate:modelValue":t[0]||(t[0]=e=>s.selectedDate=e),type:"date",placeholder:"选择日期",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD",onChange:s.loadWordsForDate,clearable:"",size:"small",class:"custom-date-picker"},null,8,["modelValue","onChange"]),s.selectedDate?(C(),W(r,{key:0,onClick:s.clearDateFilter,size:"small",class:"clear-btn",icon:"RefreshLeft"},{default:b(()=>[...t[4]||(t[4]=[D(" 清除 ",-1)])]),_:1},8,["onClick"])):x("",!0)])]),f("div",lt,[f("div",it,[f("div",nt,_(s.filteredWords.length),1),t[6]||(t[6]=f("div",{class:"stat-label"},"显示",-1))]),f("div",rt,[f("div",ot,_(s.allWords.length),1),t[7]||(t[7]=f("div",{class:"stat-label"},"总计",-1))])])]),f("div",ct,[s.loading?(C(),w("div",dt,[...t[8]||(t[8]=[f("div",{class:"loading-text"},"加载中...",-1),f("div",{class:"loading-subtitle"},"请稍候",-1)])])):0===s.filteredWords.length?(C(),w("div",ut,[f("div",vt,[f("h3",ht,_(s.selectedDate?`${s.selectedDate} 暂无单词`:"暂无单词记录"),1),f("p",pt,_(s.selectedDate?"选择其他日期或添加新单词":"开始添加你的第一个单词"),1),y(r,{type:"primary",onClick:t[1]||(t[1]=t=>e.$emit("switch-to-add")),size:"default",class:"add-word-btn",icon:"Plus"},{default:b(()=>[...t[9]||(t[9]=[D(" 添加单词 ",-1)])]),_:1})])])):(C(),w("div",gt,[(C(!0),w(T,null,M(s.filteredWords,(a,l)=>(C(),w("div",{key:a.id,class:"word-card mobile-optimized",style:L({animationDelay:.05*l+"s"})},[f("div",mt,[f("div",wt,[f("div",ft,[f("span",yt,_(a.word),1),t[10]||(t[10]=f("div",{class:"word-badge"},"新",-1))]),a.pronunciation?(C(),w("div",bt,_(a.pronunciation),1)):x("",!0)]),f("div",kt,[y(r,{size:"small",onClick:e=>s.editWord(a),type:"primary",icon:e.Edit,circle:"",class:"action-btn edit-btn",title:"编辑单词"},null,8,["onClick","icon"]),y(r,{size:"small",onClick:e=>s.confirmDelete(a),type:"danger",icon:e.Delete,circle:"",class:"action-btn delete-btn",title:"删除单词"},null,8,["onClick","icon"])])]),f("div",Ct,[f("div",St,[t[11]||(t[11]=f("div",{class:"section-label"},"释义",-1)),f("div",Dt,_(a.meaning),1)]),a.example?(C(),w("div",xt,[t[12]||(t[12]=f("div",{class:"section-label"},"例句",-1)),f("div",At,_(a.example),1)])):x("",!0)]),f("div",Tt,[f("div",Mt,_(s.formatDate(a.date||a.createdAt)),1)])],4))),128))]))]),y(o,{modelValue:s.deleteDialogVisible,"onUpdate:modelValue":t[3]||(t[3]=e=>s.deleteDialogVisible=e),title:"删除单词",width:"400px",class:"delete-dialog"},{footer:b(()=>[f("div",Lt,[y(r,{onClick:t[2]||(t[2]=e=>s.deleteDialogVisible=!1),class:"cancel-btn"},{default:b(()=>[...t[17]||(t[17]=[D(" 取消 ",-1)])]),_:1}),y(r,{type:"danger",onClick:s.deleteWord,class:"confirm-delete-btn",loading:s.deleting},{default:b(()=>[...t[18]||(t[18]=[D(" 删除 ",-1)])]),_:1},8,["onClick","loading"])])]),default:b(()=>{var a;return[f("div",Wt,[t[15]||(t[15]=f("h3",{class:"delete-title"},"确认删除",-1)),f("p",_t,[t[13]||(t[13]=D(' 确定要删除单词 "',-1)),f("strong",null,_(null==(a=e.wordToDelete)?void 0:a.word),1),t[14]||(t[14]=D('" 吗？ ',-1))]),t[16]||(t[16]=f("p",{class:"delete-warning-text"},"此操作不可恢复",-1))])]}),_:1},8,["modelValue"])])}],["__scopeId","data-v-6a2b222d"]]);const Ot=new class{constructor(){this.isInitialized=!1,this.audioContext=null,this.isMobile=/iPhone|iPad|iPod|Android/i.test(navigator.userAgent),this.isWeChat=/MicroMessenger/i.test(navigator.userAgent),this.isSpeaking=!1}async init(){if(this.isInitialized)return!0;try{return"speechSynthesis"in window&&(this.isMobile&&await this.initMobileAudio(),await this.waitForVoices(),this.isInitialized=!0,!0)}catch(e){return!1}}async initMobileAudio(){this.isWeChat&&await this.activateWeChatAudio();try{const e=window.AudioContext||window.webkitAudioContext;e&&(this.audioContext=new e,"suspended"===this.audioContext.state&&await this.audioContext.resume())}catch(e){}}async activateWeChatAudio(){return new Promise(e=>{try{const t=new Audio("data:audio/wav;base64,UklGRigAAABXQVZFZm10IBAAAAAAQAEAAEAfAAAQAQABAAgAZGF0YQAAAAA=");t.volume=0;const a=t.play();void 0!==a?a.then(()=>{t.pause(),e()}).catch(()=>e()):setTimeout(()=>{t.pause(),e()},100)}catch(t){e()}})}async waitForVoices(){return new Promise(e=>{const t=()=>{window.speechSynthesis.getVoices().length>0?e():setTimeout(t,100)};void 0!==window.speechSynthesis.onvoiceschanged&&(window.speechSynthesis.onvoiceschanged=t),t()})}async speak(e,t={}){if(this.isInitialized||await this.init(),!("speechSynthesis"in window))throw new Error("浏览器不支持语音合成");return this.stop(),new Promise((a,s)=>{try{const l=new SpeechSynthesisUtterance(e);l.lang=t.lang||"en-US",l.rate=t.rate||.8,l.pitch=t.pitch||1,l.volume=t.volume||1,this.isMobile&&(l.rate=Math.max(.6,l.rate-.1)),l.onend=()=>{this.isSpeaking=!1,a()},l.onerror=e=>{this.isSpeaking=!1,s(new Error(`语音合成错误: ${e.error}`))},l.onstart=()=>{this.isSpeaking=!0},this.isMobile?setTimeout(()=>{window.speechSynthesis.speak(l)},100):window.speechSynthesis.speak(l)}catch(l){this.isSpeaking=!1,s(l)}})}stop(){"speechSynthesis"in window&&(window.speechSynthesis.cancel(),this.isSpeaking=!1)}getIsSpeaking(){return this.isSpeaking}async handleUserInteraction(){return!this.isMobile||new Promise(e=>{const t=async()=>{try{this.audioContext&&"suspended"===this.audioContext.state&&await this.audioContext.resume(),await this.activateWeChatAudio(),document.removeEventListener("touchstart",t),document.removeEventListener("click",t),e(!0)}catch(a){e(!0)}};document.addEventListener("touchstart",t,{once:!0}),document.addEventListener("click",t,{once:!0}),setTimeout(()=>{document.removeEventListener("touchstart",t),document.removeEventListener("click",t),e(!0)},2e3)})}},Vt={class:"search-words-container"},It={class:"app-header"},zt={class:"header-content"},Ft={class:"header-left"},Pt={class:"header-stats"},Ut={class:"stat-item"},jt={class:"stat-value"},Bt={class:"stat-item"},Rt={class:"stat-value"},qt={class:"header-actions"},Nt={class:"main-content"},$t={class:"search-section"},Qt={class:"search-container"},Yt={class:"search-input-wrapper"},Ht={key:0,class:"search-suggestions"},Jt=["onClick"],Zt={class:"suggestion-text"},Kt={class:"suggestion-type"},Gt={class:"quick-filters"},Xt=["onClick"],ea={key:0,class:"filter-count"},ta={key:0,class:"advanced-filters"},aa={class:"filters-grid"},sa={class:"filter-group"},la={class:"filter-options"},ia=["onClick"],na={key:0,class:"filter-group"},ra={class:"tag-grid"},oa=["onClick"],ca={class:"filter-group"},da={class:"filter-group"},ua={class:"sort-options"},va=["onClick"],ha={class:"filter-actions"},pa={class:"results-section"},ga={class:"results-header"},ma={class:"results-info"},wa={key:0,class:"results-title"},fa={class:"results-count"},ya={key:1,class:"results-title"},ba={class:"results-actions"},ka={class:"view-switcher"},Ca={class:"words-container"},Sa={key:0,class:"loading-state"},Da={class:"loading-cards"},xa={key:1,class:"empty-state"},Aa={class:"empty-actions"},Ta=["onClick"],Ma=["checked","onChange"],Wa={class:"card-content"},_a={class:"card-header"},La={class:"word-info"},Ea={class:"word-title"},Oa={key:0,class:"word-phonetic"},Va={class:"card-actions"},Ia=["onClick","title","disabled"],za=["onClick","title"],Fa=["onClick"],Pa={class:"card-body"},Ua={class:"word-meta"},ja={key:0,class:"part-of-speech"},Ba={class:"word-date"},Ra={class:"word-meaning"},qa={key:0,class:"word-tags"},Na={key:0,class:"more-tags"},$a={key:0,class:"card-details"},Qa={key:0,class:"detail-item"},Ya={key:1,class:"detail-item"},Ha={class:"detail-actions"},Ja=["onClick"],Za=["onClick"],Ka={key:3,class:"pagination"},Ga={class:"pagination-info"},Xa={class:"pagination-controls"},es=["disabled"],ts={class:"page-numbers"},as=["onClick"],ss=["disabled"],ls={key:0,class:"batch-bar"},is={class:"batch-content"},ns={class:"batch-info"},rs={class:"batch-actions"},os={class:"modal-header"},cs={class:"modal-body"},ds={class:"modal-footer"},us=["disabled"];const vs=Ne({name:"SearchWords",emits:["words-updated"],setup(e,{emit:a}){const l=t([]),i=t(!1),n=t(!1),r=t(null),o=t([]),c=t([]),d=s({keyword:"",filter:"all",sort:"default"}),u=s({partOfSpeech:"",dateRange:[],selectedTags:[]}),h=t(!0),p=t(1),w=t(24),f=t(!1),y=t(null),b=t(!1),k=t("grid"),C=t(!1),S=t(!1),D=t(!1),x=t(null),A=t({x:0,y:0}),T=t(!1),M=t([]),W=t(!1);let _=null;const L=v(()=>""!==d.keyword.trim()),E=v(()=>{let e=[...l.value];if(L.value){const t=d.keyword.toLowerCase();e=e.filter(e=>e.word.toLowerCase().includes(t)||e.meaning.toLowerCase().includes(t)||e.tags&&e.tags.some(e=>e.toLowerCase().includes(t)))}if("recent"===d.filter?e=e.slice(0,20):"favorites"===d.filter?e=e.filter(e=>e.isFavorite):"difficult"===d.filter&&(e=e.filter(e=>e.difficulty>=3)),u.partOfSpeech&&(e=e.filter(e=>e.partOfSpeech===u.partOfSpeech)),u.selectedTags.length>0&&(e=e.filter(e=>u.selectedTags.some(t=>e.tags.includes(t)))),u.dateRange&&2===u.dateRange.length){const[t,a]=u.dateRange;e=e.filter(e=>{const s=e.date.split(" ")[0];return s>=t&&s<=a})}return e.sort((e,t)=>{switch(d.sort){case"date":return new Date(t.date)-new Date(e.date);case"word":return e.word.localeCompare(t.word);case"difficulty":return(t.difficulty||0)-(e.difficulty||0);default:return 0}}),e}),O=v(()=>{const e=(p.value-1)*w.value,t=e+w.value;return E.value.slice(e,t)}),V=v(()=>{const e={};return l.value.forEach(t=>{t.tags&&t.tags.length&&t.tags.forEach(t=>{e[t]=(e[t]||0)+1})}),Object.entries(e).sort(([,e],[,t])=>t-e).slice(0,10).map(([e])=>e)}),I=v(()=>Math.ceil(E.value.length/w.value)),z=v(()=>{const e=I.value,t=p.value,a=[],s=[];for(let l=Math.max(2,t-2);l<=Math.min(e-1,t+2);l++)a.push(l);return t-2>2?s.push(1,"..."):s.push(1),s.push(...a),t+2<e-1?s.push("...",e):s.push(e),s.filter(e=>"..."!==e||s.length>1)}),F=v(()=>{let e=0;return"all"!==d.filter&&e++,u.partOfSpeech&&e++,u.dateRange&&2===u.dateRange.length&&e++,u.selectedTags.length>0&&e++,e}),P=v(()=>F.value>0),U=v(()=>{const e=new Date;return e.setDate(e.getDate()-7),l.value.filter(t=>new Date(t.date)>=e).length}),j=v(()=>Math.floor(.3*l.value.length)),B=()=>{const e=localStorage.getItem("dailyEnglishWords");l.value=e?JSON.parse(e):[]},R=async()=>{n.value=!0,await new Promise(e=>setTimeout(e,300)),L.value=!0,p.value=1,n.value=!1},q=e=>{r.value=r.value===e?null:e},N=e=>{const t=o.value.indexOf(e);t>-1?o.value.splice(t,1):o.value.push(e)},Q=()=>{o.value=[]};t(!1);const Y=()=>{localStorage.setItem("dailyEnglishWords",JSON.stringify(l.value)),a("words-updated",l.value)},H=e=>{if(!e.trim())return void(M.value=[]);const t=l.value.filter(t=>t.word.toLowerCase().includes(e.toLowerCase())||t.meaning.toLowerCase().includes(e.toLowerCase())).slice(0,5).map(e=>({word:e.word,type:e.partOfSpeech||"unknown",meaning:e.meaning.substring(0,50)+(e.meaning.length>50?"...":"")}));M.value=t};return g(async()=>{B(),R(),await Ot.init()}),m(()=>{_&&clearTimeout(_)}),{searchForm:d,advancedFilters:u,words:l,filteredWords:E,displayWords:O,popularTags:V,loading:i,searching:n,hasSearch:L,showSidebar:h,currentPage:p,pageSize:w,totalPages:I,visiblePages:z,activeFilterCount:F,hasActiveFilters:P,deleteDialogVisible:f,currentWordToDelete:y,deleting:b,expandedWords:c,showAdvancedFilters:W,showBatchMode:C,showAddWordModal:S,selectedWordId:r,selectedWords:o,viewMode:k,showWordMenu:(e,t)=>{x.value=e,A.value={x:t.clientX,y:t.clientY},D.value=!0},currentWordMenu:x,menuPosition:A,showSearchSuggestions:T,searchSuggestions:M,searchOptions:[{label:"全部",value:"all"},{label:"单词",value:"word"},{label:"释义",value:"meaning"},{label:"标签",value:"tag"}],partOfSpeechOptions:[{label:"名词",value:"n."},{label:"动词",value:"v."},{label:"形容词",value:"adj."},{label:"副词",value:"adv."},{label:"介词",value:"prep."},{label:"连词",value:"conj."},{label:"代词",value:"pron."},{label:"数词",value:"num."},{label:"感叹词",value:"interj."}],sortOptions:[{label:"默认",value:"default"},{label:"按添加日期",value:"date"},{label:"按字母顺序",value:"alphabet"}],quickFilters:[{key:"all",label:"全部"},{key:"word",label:"仅单词"},{key:"meaning",label:"仅释义"},{key:"tag",label:"仅标签"}],weeklyNewWords:U,masteredWords:j,loadWords:B,handleSearch:R,clearSearch:()=>{d.keyword="",d.filter="all",d.sort="default",u.partOfSpeech="",u.dateRange=[],u.selectedTags=[],R()},clearKeyword:()=>{d.keyword="",R()},setQuickFilter:e=>{d.filter=e,R()},setSortOption:e=>{d.sort=e,R()},togglePartOfSpeech:e=>{u.partOfSpeech=u.partOfSpeech===e?"":e,R()},toggleTag:e=>{const t=u.selectedTags.indexOf(e);t>-1?u.selectedTags.splice(t,1):u.selectedTags.push(e),R()},clearAllFilters:()=>{d.filter="all",u.partOfSpeech="",u.dateRange=[],u.selectedTags=[],R()},toggleAdvancedFilters:()=>{W.value=!W.value},handleWordClick:(e,t)=>{C.value?N(e.id):q(e.id)},selectWord:q,isSelectedWord:e=>r.value===e,toggleWordSelection:N,selectAllWords:()=>{o.value=[...O.value.map(e=>e.id)]},clearSelection:Q,toggleBatchMode:()=>{C.value=!C.value,C.value||Q()},batchDelete:async()=>{if(0!==o.value.length)try{await K.confirm(`确定要删除选中的 ${o.value.length} 个单词吗？此操作不可恢复。`,"批量删除确认",{confirmButtonText:"确定删除",cancelButtonText:"取消",type:"warning"}),b.value=!0,await new Promise(e=>setTimeout(e,800)),l.value=l.value.filter(e=>!o.value.includes(e.id)),Q(),Y(),$.success(`成功删除 ${o.value.length} 个单词`)}catch(e){"cancel"!==e&&$.error("批量删除失败")}finally{b.value=!1}else $.warning("请先选择要删除的单词")},exportSelected:()=>{if(0===o.value.length)return;const e=l.value.filter(e=>o.value.includes(e.id)),t=JSON.stringify(e,null,2),a=new Blob([t],{type:"application/json"}),s=URL.createObjectURL(a),i=document.createElement("a");i.href=s,i.download=`words_${(new Date).toISOString().split("T")[0]}.json`,i.click(),URL.revokeObjectURL(s),$.success("导出成功")},showWordMenu:D,hideWordMenu:()=>{D.value=!1,x.value=null},editWord:e=>{$.info("编辑功能开发中...")},toggleWordDetail:e=>{const t=c.value.indexOf(e);t>-1?c.value.splice(t,1):c.value.push(e)},pronounceWord:pronounceWord,confirmDelete:e=>{y.value=e,f.value=!0},deleteWord:async()=>{if(y.value){b.value=!0;try{await new Promise(e=>setTimeout(e,500));const e=y.value.id;l.value=l.value.filter(t=>t.id!==e),f.value=!1,y.value=null,Y(),$.success("删除成功")}catch(e){$.error("删除失败")}finally{b.value=!1}}},saveWords:Y,formatDate:e=>new Date(e).toLocaleDateString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit"}),prevPage:()=>{p.value>1&&p.value--},nextPage:()=>{p.value<I.value&&p.value++},goToPage:e=>{e>=1&&e<=I.value&&(p.value=e)},generateSearchSuggestions:H,selectSuggestion:e=>{d.keyword=e.word,T.value=!1,R()},hideSearchSuggestions:()=>{setTimeout(()=>{T.value=!1},200)},debouncedSearch:()=>{clearTimeout(_),_=setTimeout(()=>{H(d.keyword),R()},300)},handleSizeChange:e=>{w.value=e,p.value=1},handleCurrentChange:e=>{p.value=e},closeWordMenu:()=>{D.value=!1,x.value=null}}}},[["render",function(e,t,a,s,l,i){var n;const r=k("el-date-picker");return C(),w("div",Vt,[f("header",It,[f("div",zt,[f("div",Ft,[t[31]||(t[31]=E('<h1 class="app-title" data-v-30e36c50><svg width="32" height="32" viewBox="0 0 24 24" fill="none" class="app-icon" data-v-30e36c50><path d="M12 2L2 7L12 12L22 7L12 2Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-30e36c50></path><path d="M2 17L12 22L22 17" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-30e36c50></path><path d="M2 12L12 17L22 12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-30e36c50></path></svg> 每日英语 </h1>',1)),f("div",Pt,[f("div",Ut,[f("span",jt,_(s.words.length),1),t[29]||(t[29]=f("span",{class:"stat-label"},"总单词",-1))]),f("div",Bt,[f("span",Rt,_(s.weeklyNewWords),1),t[30]||(t[30]=f("span",{class:"stat-label"},"本周新增",-1))])])]),f("div",qt,[f("button",{class:"btn btn-primary",onClick:t[0]||(t[0]=e=>s.showAddWordModal=!0)},[...t[32]||(t[32]=[f("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none"},[f("path",{d:"M12 5V19M5 12H19",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),D(" 添加单词 ",-1)])])])])]),f("main",Nt,[f("section",$t,[f("div",Qt,[f("div",Yt,[t[34]||(t[34]=f("svg",{class:"search-icon",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none"},[f("path",{d:"M21 21L15.5 15.5M17 10C17 13.866 13.866 17 10 17C6.13401 17 3 13.866 3 10C3 6.13401 6.13401 3 10 3C13.866 3 17 6.13401 17 10Z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),O(f("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>s.searchForm.keyword=e),placeholder:"搜索单词、释义或标签...",class:"search-input",onInput:t[2]||(t[2]=(...e)=>s.debouncedSearch&&s.debouncedSearch(...e)),onKeyup:t[3]||(t[3]=A((...e)=>s.handleSearch&&s.handleSearch(...e),["enter"])),onFocus:t[4]||(t[4]=e=>s.showSearchSuggestions=!0),onBlur:t[5]||(t[5]=(...e)=>s.hideSearchSuggestions&&s.hideSearchSuggestions(...e))},null,544),[[V,s.searchForm.keyword]]),s.searchForm.keyword?(C(),w("button",{key:0,class:"clear-btn",onClick:t[6]||(t[6]=(...e)=>s.clearKeyword&&s.clearKeyword(...e))},[...t[33]||(t[33]=[f("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none"},[f("path",{d:"M18 6L6 18M6 6L18 18",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round"})],-1)])])):x("",!0)]),s.showSearchSuggestions&&s.searchSuggestions.length?(C(),w("div",Ht,[(C(!0),w(T,null,M(s.searchSuggestions,(e,t)=>(C(),w("div",{key:t,class:"suggestion-item",onClick:t=>s.selectSuggestion(e)},[f("span",Zt,_(e.word),1),f("span",Kt,_(e.type),1)],8,Jt))),128))])):x("",!0)]),f("div",Gt,[(C(!0),w(T,null,M(s.quickFilters,e=>(C(),w("button",{key:e.key,class:I(["filter-chip",{active:s.searchForm.filter===e.key}]),onClick:t=>s.setQuickFilter(e.key)},_(e.label),11,Xt))),128)),f("button",{class:I(["filter-chip filter-toggle",{active:s.showAdvancedFilters}]),onClick:t[7]||(t[7]=e=>s.showAdvancedFilters=!s.showAdvancedFilters)},[t[35]||(t[35]=f("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none"},[f("path",{d:"M22 3H2l8 9.46V19l4 2v-8.54L22 3z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),t[36]||(t[36]=D(" 高级筛选 ",-1)),s.activeFilterCount>0?(C(),w("span",ea,_(s.activeFilterCount),1)):x("",!0)],2)])]),s.showAdvancedFilters?(C(),w("section",ta,[f("div",aa,[f("div",sa,[t[37]||(t[37]=f("h4",null,"词性",-1)),f("div",la,[(C(!0),w(T,null,M(s.partOfSpeechOptions,e=>(C(),w("button",{key:e.value,class:I(["filter-option",{active:s.advancedFilters.partOfSpeech===e.value}]),onClick:t=>s.togglePartOfSpeech(e.value)},_(e.label),11,ia))),128))])]),s.popularTags.length>0?(C(),w("div",na,[t[38]||(t[38]=f("h4",null,"标签",-1)),f("div",ra,[(C(!0),w(T,null,M(s.popularTags.slice(0,12),e=>(C(),w("button",{key:e,class:I(["tag-chip",{active:s.advancedFilters.selectedTags.includes(e)}]),onClick:t=>s.toggleTag(e)},_(e),11,oa))),128))])])):x("",!0),f("div",ca,[t[39]||(t[39]=f("h4",null,"添加时间",-1)),y(r,{modelValue:s.advancedFilters.dateRange,"onUpdate:modelValue":t[8]||(t[8]=e=>s.advancedFilters.dateRange=e),type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"YYYY-MM-DD",size:"small",onChange:s.handleSearch},null,8,["modelValue","onChange"])]),f("div",da,[t[40]||(t[40]=f("h4",null,"排序",-1)),f("div",ua,[(C(!0),w(T,null,M(s.sortOptions,e=>(C(),w("button",{key:e.value,class:I(["sort-option",{active:s.searchForm.sort===e.value}]),onClick:t=>s.setSortOption(e.value)},_(e.label),11,va))),128))])])]),f("div",ha,[s.hasActiveFilters?(C(),w("button",{key:0,class:"btn btn-secondary",onClick:t[9]||(t[9]=(...e)=>s.clearAllFilters&&s.clearAllFilters(...e))}," 清空筛选 ")):x("",!0)])])):x("",!0),f("section",pa,[f("div",ga,[f("div",ma,[s.hasSearch?(C(),w("h2",wa,[t[41]||(t[41]=D(" 搜索结果 ",-1)),f("span",fa,"("+_(s.filteredWords.length)+")",1)])):(C(),w("h2",ya,"所有单词"))]),f("div",ba,[f("div",ka,[f("button",{class:I(["view-btn",{active:"grid"===s.viewMode}]),onClick:t[10]||(t[10]=e=>s.viewMode="grid"),title:"网格视图"},[...t[42]||(t[42]=[E('<svg width="16" height="16" viewBox="0 0 24 24" fill="none" data-v-30e36c50><rect x="3" y="3" width="7" height="7" stroke="currentColor" stroke-width="2" data-v-30e36c50></rect><rect x="14" y="3" width="7" height="7" stroke="currentColor" stroke-width="2" data-v-30e36c50></rect><rect x="3" y="14" width="7" height="7" stroke="currentColor" stroke-width="2" data-v-30e36c50></rect><rect x="14" y="14" width="7" height="7" stroke="currentColor" stroke-width="2" data-v-30e36c50></rect></svg>',1)])],2),f("button",{class:I(["view-btn",{active:"list"===s.viewMode}]),onClick:t[11]||(t[11]=e=>s.viewMode="list"),title:"列表视图"},[...t[43]||(t[43]=[f("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none"},[f("line",{x1:"3",y1:"6",x2:"21",y2:"6",stroke:"currentColor","stroke-width":"2"}),f("line",{x1:"3",y1:"12",x2:"21",y2:"12",stroke:"currentColor","stroke-width":"2"}),f("line",{x1:"3",y1:"18",x2:"21",y2:"18",stroke:"currentColor","stroke-width":"2"})],-1)])],2)]),f("button",{class:I(["btn btn-secondary",{active:s.showBatchMode}]),onClick:t[12]||(t[12]=e=>s.showBatchMode=!s.showBatchMode)},[...t[44]||(t[44]=[f("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none"},[f("path",{d:"M3 4h18M3 10h18M3 16h18",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round"})],-1),D(" 批量操作 ",-1)])],2)])]),f("div",Ca,[s.searching?(C(),w("div",Sa,[f("div",Da,[(C(),w(T,null,M(6,e=>f("div",{key:e,class:"skeleton-card"},[...t[45]||(t[45]=[E('<div class="skeleton-header" data-v-30e36c50><div class="skeleton-title" data-v-30e36c50></div><div class="skeleton-actions" data-v-30e36c50></div></div><div class="skeleton-content" data-v-30e36c50></div><div class="skeleton-tags" data-v-30e36c50></div>',3)])])),64))])])):s.hasSearch&&0===s.filteredWords.length?(C(),w("div",xa,[t[46]||(t[46]=f("div",{class:"empty-icon"},[f("svg",{width:"80",height:"80",viewBox:"0 0 24 24",fill:"none"},[f("path",{d:"M21 21L15.5 15.5M17 10C17 13.866 13.866 17 10 17C6.13401 17 3 13.866 3 10C3 6.13401 6.13401 3 10 3C13.866 3 17 6.13401 17 10Z",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round",opacity:"0.3"}),f("path",{d:"M9 9H11M9 13H11",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round"})])],-1)),t[47]||(t[47]=f("h3",null,"未找到匹配的单词",-1)),t[48]||(t[48]=f("p",null,"尝试调整搜索条件或检查拼写",-1)),f("div",Aa,[f("button",{class:"btn btn-primary",onClick:t[13]||(t[13]=(...e)=>s.clearSearch&&s.clearSearch(...e))},"重置搜索"),f("button",{class:"btn btn-secondary",onClick:t[14]||(t[14]=e=>s.showAddWordModal=!0)},"添加新单词")])])):s.hasSearch?(C(),w("div",{key:2,class:I(["words-grid",s.viewMode])},[(C(!0),w(T,null,M(s.displayWords,(a,l)=>(C(),w("div",{key:a.id,class:I(["word-card",{expanded:s.expandedWords.includes(a.id),selected:s.isSelectedWord(a.id),"batch-selected":s.selectedWords.includes(a.id)}]),onClick:e=>s.handleWordClick(a,e)},[s.showBatchMode?(C(),w("div",{key:0,class:"batch-checkbox",onClick:t[15]||(t[15]=S(()=>{},["stop"]))},[f("input",{type:"checkbox",checked:s.selectedWords.includes(a.id),onChange:e=>s.toggleWordSelection(a.id)},null,40,Ma)])):x("",!0),f("div",Wa,[f("div",_a,[f("div",La,[f("h3",Ea,_(a.word),1),a.phonetic?(C(),w("div",Oa,_(a.phonetic),1)):x("",!0)]),f("div",Va,[f("button",{class:I(["action-btn",{"wx-browser":e.isWeChatBrowser,pronouncing:e.isPronouncing}]),onClick:S(e=>s.pronounceWord(a.word),["stop"]),title:e.isPronouncing?"停止发音":"发音",disabled:e.isPronouncing},[...t[49]||(t[49]=[f("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none"},[f("path",{d:"M3 9V15H7L12 20V4L7 9H3Z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),f("path",{d:"M16 9.5C16.5 10.5 16.5 11.5 16 12.5M19 6C20.5 8 20.5 12 19 14",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])],10,Ia),f("button",{class:"action-btn",onClick:S(e=>s.toggleWordDetail(a.id),["stop"]),title:s.expandedWords.includes(a.id)?"收起":"展开"},[...t[50]||(t[50]=[f("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none"},[f("path",{d:"M19 9L12 16L5 9",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])],8,za),f("button",{class:"action-btn",onClick:S(e=>s.showWordMenu(a,e),["stop"]),title:"更多操作"},[...t[51]||(t[51]=[f("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none"},[f("circle",{cx:"12",cy:"5",r:"1",stroke:"currentColor","stroke-width":"2"}),f("circle",{cx:"12",cy:"12",r:"1",stroke:"currentColor","stroke-width":"2"}),f("circle",{cx:"12",cy:"19",r:"1",stroke:"currentColor","stroke-width":"2"})],-1)])],8,Fa)])]),f("div",Pa,[f("div",Ua,[a.partOfSpeech?(C(),w("span",ja,_(a.partOfSpeech),1)):x("",!0),f("span",Ba,_(s.formatDate(a.date)),1)]),f("p",Ra,_(a.meaning),1),a.tags&&a.tags.length?(C(),w("div",qa,[(C(!0),w(T,null,M(a.tags.slice(0,3),e=>(C(),w("span",{key:e,class:"tag"},_(e),1))),128)),a.tags.length>3?(C(),w("span",Na,"+"+_(a.tags.length-3),1)):x("",!0)])):x("",!0)]),y(F,{name:"expand"},{default:b(()=>[s.expandedWords.includes(a.id)?(C(),w("div",$a,[a.example?(C(),w("div",Qa,[t[52]||(t[52]=f("h4",null,"例句",-1)),f("p",null,_(a.example),1)])):x("",!0),a.synonyms?(C(),w("div",Ya,[t[53]||(t[53]=f("h4",null,"同义词/反义词",-1)),f("p",null,_(a.synonyms),1)])):x("",!0),f("div",Ha,[f("button",{class:"btn btn-sm btn-secondary",onClick:S(e=>s.editWord(a),["stop"])},[...t[54]||(t[54]=[f("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none"},[f("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),f("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),D(" 编辑 ",-1)])],8,Ja),f("button",{class:"btn btn-sm btn-danger",onClick:S(e=>s.confirmDelete(a),["stop"])},[...t[55]||(t[55]=[f("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none"},[f("path",{d:"M3 6H5H21M8 6V4C8 3.44772 8.44772 3 9 3H15C15.5523 3 16 3.44772 16 4V6M19 6V20C19 20.5523 18.5523 21 18 21H6C5.44772 21 5 20.5523 5 20V6H19Z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),D(" 删除 ",-1)])],8,Za)])])):x("",!0)]),_:2},1024)])],10,Ta))),128))],2)):x("",!0),s.hasSearch&&s.totalPages>1?(C(),w("div",Ka,[f("div",Ga,[f("span",null,"显示 "+_((s.currentPage-1)*s.pageSize+1)+"-"+_(Math.min(s.currentPage*s.pageSize,s.filteredWords.length))+" 共 "+_(s.filteredWords.length)+" 个单词",1),O(f("select",{"onUpdate:modelValue":t[16]||(t[16]=e=>s.pageSize=e),class:"page-size-select"},[...t[56]||(t[56]=[f("option",{value:12},"12/页",-1),f("option",{value:24},"24/页",-1),f("option",{value:48},"48/页",-1)])],512),[[z,s.pageSize]])]),f("div",Xa,[f("button",{class:"pagination-btn",onClick:t[17]||(t[17]=(...e)=>s.prevPage&&s.prevPage(...e)),disabled:1===s.currentPage},[...t[57]||(t[57]=[f("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none"},[f("path",{d:"M15 18L9 12L15 6",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])],8,es),f("div",ts,[(C(!0),w(T,null,M(s.visiblePages,e=>(C(),w("button",{key:e,class:I(["pagination-btn page-number",{active:e===s.currentPage}]),onClick:t=>s.goToPage(e)},_(e),11,as))),128))]),f("button",{class:"pagination-btn",onClick:t[18]||(t[18]=(...e)=>s.nextPage&&s.nextPage(...e)),disabled:s.currentPage===s.totalPages},[...t[58]||(t[58]=[f("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none"},[f("path",{d:"M9 18L15 12L9 6",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])],8,ss)])])):x("",!0)])])]),s.showBatchMode&&s.selectedWords.length>0?(C(),w("div",ls,[f("div",is,[f("div",ns,[t[59]||(t[59]=D(" 已选择 ",-1)),f("strong",null,_(s.selectedWords.length),1),t[60]||(t[60]=D(" 个单词 ",-1))]),f("div",rs,[f("button",{class:"btn btn-secondary",onClick:t[19]||(t[19]=(...e)=>s.selectAllWords&&s.selectAllWords(...e))},"全选"),f("button",{class:"btn btn-secondary",onClick:t[20]||(t[20]=(...e)=>s.clearSelection&&s.clearSelection(...e))},"取消选择"),f("button",{class:"btn btn-danger",onClick:t[21]||(t[21]=(...e)=>s.batchDelete&&s.batchDelete(...e))},"批量删除"),f("button",{class:"btn btn-primary",onClick:t[22]||(t[22]=(...e)=>s.exportSelected&&s.exportSelected(...e))},"导出选中")])])])):x("",!0),s.deleteDialogVisible?(C(),w("div",{key:1,class:"modal-overlay",onClick:t[27]||(t[27]=e=>s.deleteDialogVisible=!1)},[f("div",{class:"modal",onClick:t[26]||(t[26]=S(()=>{},["stop"]))},[f("div",os,[t[62]||(t[62]=f("h3",null,"确认删除",-1)),f("button",{class:"modal-close",onClick:t[23]||(t[23]=e=>s.deleteDialogVisible=!1)},[...t[61]||(t[61]=[f("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none"},[f("path",{d:"M18 6L6 18M6 6L18 18",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round"})],-1)])])]),f("div",cs,[t[65]||(t[65]=f("div",{class:"modal-icon"},[f("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none"},[f("path",{d:"M12 9V13M12 17H12.01M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})])],-1)),f("p",null,[t[63]||(t[63]=D("确定要删除单词 ",-1)),f("strong",null,_(null==(n=s.currentWordToDelete)?void 0:n.word),1),t[64]||(t[64]=D(" 吗？",-1))]),t[66]||(t[66]=f("p",{class:"warning-text"},"此操作不可撤销",-1))]),f("div",ds,[f("button",{class:"btn btn-secondary",onClick:t[24]||(t[24]=e=>s.deleteDialogVisible=!1)},"取消"),f("button",{class:"btn btn-danger",onClick:t[25]||(t[25]=(...e)=>s.deleteWord&&s.deleteWord(...e)),disabled:s.deleting},_(s.deleting?"删除中...":"确定删除"),9,us)])])])):x("",!0),f("button",{class:"fab",onClick:t[28]||(t[28]=e=>s.showAddWordModal=!0),title:"添加新单词"},[...t[67]||(t[67]=[f("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none"},[f("path",{d:"M12 5V19M5 12H19",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])])])}],["__scopeId","data-v-30e36c50"]]);const hs=new class{constructor(){this.isInitialized=!1,this.audioContext=null,this.isMobile=/iPhone|iPad|iPod|Android/i.test(navigator.userAgent),this.isWeChat=/MicroMessenger/i.test(navigator.userAgent),this.isSpeaking=!1}async init(){if(this.isInitialized)return!0;try{return"speechSynthesis"in window&&(this.isMobile&&await this.initMobileAudio(),await this.waitForVoices(),this.isInitialized=!0,!0)}catch(e){return!1}}async initMobileAudio(){this.isWeChat&&await this.activateWeChatAudio();try{const e=window.AudioContext||window.webkitAudioContext;e&&(this.audioContext=new e,"suspended"===this.audioContext.state&&await this.audioContext.resume())}catch(e){}}async activateWeChatAudio(){return new Promise(e=>{try{const t=new Audio("data:audio/wav;base64,UklGRigAAABXQVZFZm10IBAAAAAAQAEAAEAfAAAQAQABAAgAZGF0YQAAAAA=");t.volume=0;const a=t.play();void 0!==a?a.then(()=>{t.pause(),e()}).catch(()=>e()):setTimeout(()=>{t.pause(),e()},100)}catch(t){e()}})}async waitForVoices(){return new Promise(e=>{const t=()=>{window.speechSynthesis.getVoices().length>0?e():setTimeout(t,100)};void 0!==window.speechSynthesis.onvoiceschanged&&(window.speechSynthesis.onvoiceschanged=t),t()})}async speak(e,t={}){if(this.isInitialized||await this.init(),!("speechSynthesis"in window))throw new Error("浏览器不支持语音合成");return this.stop(),new Promise((a,s)=>{try{const l=new SpeechSynthesisUtterance(e);l.lang=t.lang||"en-US",l.rate=t.rate||.8,l.pitch=t.pitch||1,l.volume=t.volume||1,this.isMobile&&(l.rate=Math.max(.6,l.rate-.1)),l.onend=()=>{this.isSpeaking=!1,a()},l.onerror=e=>{this.isSpeaking=!1,s(new Error(`语音合成错误: ${e.error}`))},l.onstart=()=>{this.isSpeaking=!0},this.isMobile?setTimeout(()=>{window.speechSynthesis.speak(l)},100):window.speechSynthesis.speak(l)}catch(l){this.isSpeaking=!1,s(l)}})}stop(){"speechSynthesis"in window&&(window.speechSynthesis.cancel(),this.isSpeaking=!1)}getIsSpeaking(){return this.isSpeaking}async handleUserInteraction(){return!this.isMobile||new Promise(e=>{const t=async()=>{try{this.audioContext&&"suspended"===this.audioContext.state&&await this.audioContext.resume(),await this.activateWeChatAudio(),document.removeEventListener("touchstart",t),document.removeEventListener("click",t),e(!0)}catch(a){e(!0)}};document.addEventListener("touchstart",t,{once:!0}),document.addEventListener("click",t,{once:!0}),setTimeout(()=>{document.removeEventListener("touchstart",t),document.removeEventListener("click",t),e(!0)},2e3)})}},ps={class:"practice-words"},gs={class:"practice-header"},ms={key:0,class:"back-button"},ws={key:0,class:"mode-selection"},fs={class:"mode-cards"},ys={key:1,class:"practice-settings"},bs={class:"settings-group"},ks={class:"settings-group"},Cs={class:"settings-group"},Ss={class:"radio-group"},Ds={class:"settings-actions"},xs=["disabled"],As={key:2,class:"loading-container"},Ts={key:3,class:"flashcard-mode"},Ms={class:"progress-container"},Ws={class:"progress-bar"},_s={class:"flashcard-container"},Ls={class:"card-front"},Es={key:0},Os={class:"card-back"},Vs={class:"definition"},Is={key:0,class:"phonetic"},zs={key:1,class:"example"},Fs={class:"flashcard-actions"},Ps={class:"navigation-buttons"},Us=["disabled"],js=["disabled"],Bs={key:4,class:"quiz-mode"},Rs={class:"progress-container"},qs={class:"progress-bar"},Ns={class:"quiz-question"},$s={class:"quiz-options"},Qs=["onClick"],Ys={key:0,class:"quiz-result"},Hs={key:0,class:"correct-result"},Js={key:1,class:"wrong-result"},Zs={class:"quiz-actions"},Ks=["disabled"],Gs={key:5,class:"listening-mode"},Xs={class:"progress-container"},el={class:"progress-bar"},tl={class:"listening-content"},al={class:"options"},sl=["onClick"],ll={class:"listening-actions"},il=["disabled"],nl={key:6,class:"practice-result"},rl={class:"result-card"},ol={class:"result-stats"},cl={class:"stat-item"},dl={class:"stat-number"},ul={class:"stat-item"},vl={class:"stat-number"},hl={class:"stat-item"},pl={class:"stat-number"},gl={class:"result-actions"};const ml=Ne({name:"PracticeWords",setup(){const e=t("mode-selection"),a=t(""),s=t(0),l=t([]),i=t(!1),n=t(!1);g(async()=>{e.value="mode-selection",a.value="",s.value=0,l.value=[],i.value=!1,await hs.init()});const r=t(!1),o=t([]),c=t([]),d=t(-1),u=t(!1),h=t(-1),p=t({wordCount:10,difficulty:"全部",wordRange:"all"}),m=t({correct:0,total:0,score:0}),w=v(()=>l.value[s.value]||{word:"",meaning:"",phonetic:"",example:""}),f=v(()=>0===l.value.length?0:(s.value+1)/l.value.length*100),y=e=>{const t=e.reviewCount||0;return e.mastered||t>=3?"简单":t>=1?"中等":"困难"},b=(e,t)=>"简单"===t?"简单"===e:"中等"!==t||["简单","中等"].includes(e),k=()=>{try{const t=localStorage.getItem("dailyEnglishWords");let s=[];try{s=t?JSON.parse(t):[],Array.isArray(s)||(s=[])}catch(e){s=[]}const l=w.value;if(!l||!l.word)return;if("quiz"===a.value){const e=[];l.meaning&&e.push(String(l.meaning));const t=[...s.filter(e=>e&&e.id!==l.id&&e.meaning&&String(e.meaning)!==String(l.meaning))].sort(()=>.5-Math.random());for(let a=0;a<Math.min(3,t.length);a++)e.push(String(t[a].meaning));for(;e.length<4;)e.push(`模拟选项 ${e.length+1}`);o.value=e.sort(()=>.5-Math.random())}else if("listening"===a.value){const e=[];l.word&&e.push(String(l.word));const t=[...s.filter(e=>e&&e.id!==l.id&&e.word&&String(e.word)!==String(l.word))].sort(()=>.5-Math.random());for(let s=0;s<Math.min(3,t.length);s++)e.push(String(t[s].word));for(;e.length<4;)e.push(`word${e.length+1}`);c.value=e.sort(()=>.5-Math.random());const a=String(l.word);h.value=c.value.findIndex(e=>String(e)===a)}}catch(t){if("quiz"===a.value){const e=w.value,t=(null==e?void 0:e.meaning)?[e.meaning,"选项2","选项3","选项4"]:["选项1","选项2","选项3","选项4"];o.value=t.sort(()=>.5-Math.random())}else if("listening"===a.value){const e=w.value,t=(null==e?void 0:e.word)?[e.word,"单词2","单词3","单词4"]:["单词1","单词2","单词3","单词4"];c.value=t.sort(()=>.5-Math.random()),h.value=c.value.findIndex(t=>t===(null==e?void 0:e.word))}}},C=()=>{m.value.score=l.value.length>0?Math.round(m.value.correct/m.value.total*100):0},S=()=>{e.value="mode-selection",a.value="",s.value=0,l.value=[],r.value=!1,d.value=-1,u.value=!1},D=v(()=>{if(!u.value||-1===d.value)return!1;if("quiz"===a.value){const e=w.value,t=o.value,a=d.value;if(e&&"object"==typeof e&&e.meaning&&t&&Array.isArray(t)&&a>=0&&a<t.length){const s=e=>e.replace(/\s+/g,"").toLowerCase(),l=String(t[a]).trim(),i=String(e.meaning).trim();if(l===i)return!0;return s(l)===s(i)}}else if("listening"===a.value)return void 0!==d.value&&void 0!==h.value&&d.value===h.value;return!1});return{currentStep:e,currentMode:a,currentIndex:s,practiceWords:l,loading:i,isFlipped:r,quizOptions:o,listeningOptions:c,selectedOption:d,showResult:u,correctOptionIndex:h,settings:p,results:m,currentWord:w,progressPercentage:f,isCorrect:D,isPronouncing:n,selectMode:t=>{a.value=t,e.value="settings"},startPractice:async()=>{i.value=!0;try{const t=localStorage.getItem("dailyEnglishWords");let n=t?JSON.parse(t):[];if("today"===p.value.wordRange){const e=(new Date).toISOString().split("T")[0];n=n.filter(t=>t.date===e)}if(p.value.difficulty&&"全部"!==p.value.difficulty&&(n=n.filter(e=>{const t=e.difficulty||y(e);return b(t,p.value.difficulty)})),0===n.length)return $.warning("没有找到匹配条件的单词数据，请先添加单词"),void(i.value=!1);const o=[...n].sort(()=>.5-Math.random());l.value=o.slice(0,Math.min(p.value.wordCount,n.length)),m.value={correct:0,total:l.value.length,score:0},s.value=0,r.value=!1,d.value=-1,u.value=!1,"quiz"!==a.value&&"listening"!==a.value||k(),e.value=a.value}catch(t){$.error("准备练习内容失败")}finally{i.value=!1}},playSound:async e=>{try{if(n.value)return hs.stop(),void(n.value=!1);hs.isMobile&&await hs.handleUserInteraction(),n.value=!0,await hs.speak(e)}catch(t){$.warning("发音播放失败，请重试")}finally{setTimeout(()=>{n.value=!1},1e3)}},flipCard:()=>{r.value=!r.value},prevWord:()=>{s.value>0&&(s.value--,r.value=!1)},nextWord:()=>{s.value<l.value.length-1?(s.value++,r.value=!1):(C(),e.value="result")},selectOption:e=>{u.value||(d.value=e)},submitQuiz:()=>{if(-1!==d.value)if(u.value=!0,"quiz"===a.value){const e=w.value,t=o.value,a=d.value;if(e&&"object"==typeof e&&e.meaning&&t&&Array.isArray(t)&&a>=0&&a<t.length){const s=String(t[a]).trim(),l=String(e.meaning).trim();if(s===l)m.value.correct++;else{const e=e=>e.replace(/\s+/g,"").toLowerCase();e(s)===e(l)&&m.value.correct++}}}else"listening"===a.value&&void 0!==d.value&&void 0!==h.value&&d.value===h.value&&m.value.correct++},nextQuiz:()=>{s.value<l.value.length-1?(s.value++,d.value=-1,u.value=!1,k()):(C(),e.value="result")},restartPractice:()=>{e.value="settings"},backToModeSelection:S,goBack:()=>{"settings"===e.value?S():"flashcard"!==e.value&&"quiz"!==e.value&&"listening"!==e.value||(e.value="settings")},refreshPage:()=>{e.value="mode-selection",a.value="",s.value=0,l.value=[],i.value=!1,r.value=!1,d.value=-1,u.value=!1,h.value=-1,p.value={wordCount:10,difficulty:"全部",wordRange:"today"},m.value={correct:0,total:0,score:0}}}}},[["render",function(e,t,a,s,l,i){return C(),w("div",ps,[t[48]||(t[48]=f("div",{class:"bg-gradient"},null,-1)),t[49]||(t[49]=f("div",{class:"bg-circle"},null,-1)),t[50]||(t[50]=f("div",{class:"bg-circle"},null,-1)),f("div",gs,["mode-selection"!==s.currentStep?(C(),w("div",ms,[f("button",{onClick:t[0]||(t[0]=(...e)=>s.goBack&&s.goBack(...e)),class:"back-btn"},"返回")])):x("",!0),t[22]||(t[22]=f("h2",null,"单词练习",-1))]),"mode-selection"===s.currentStep?(C(),w("div",ws,[t[26]||(t[26]=f("div",{class:"mode-intro"},[f("h2",null,"选择练习模式"),f("p",null,"通过不同的方式来巩固你的单词记忆")],-1)),f("div",fs,[f("div",{class:"mode-card flashcard-mode-card",onClick:t[1]||(t[1]=e=>s.selectMode("flashcard"))},[...t[23]||(t[23]=[E('<div class="mode-icon" data-v-c5e15517><i class="fas fa-layer-group" data-v-c5e15517></i></div><div class="mode-content" data-v-c5e15517><h3 data-v-c5e15517>闪卡模式</h3><p data-v-c5e15517>通过翻转卡片来记忆单词和释义</p></div><div class="mode-features" data-v-c5e15517><span class="feature-tag" data-v-c5e15517>视觉记忆</span><span class="feature-tag" data-v-c5e15517>自主学习</span></div>',3)])]),f("div",{class:"mode-card quiz-mode-card",onClick:t[2]||(t[2]=e=>s.selectMode("quiz"))},[...t[24]||(t[24]=[E('<div class="mode-icon" data-v-c5e15517><i class="fas fa-question-circle" data-v-c5e15517></i></div><div class="mode-content" data-v-c5e15517><h3 data-v-c5e15517>测验模式</h3><p data-v-c5e15517>通过选择题来测试你的掌握程度</p></div><div class="mode-features" data-v-c5e15517><span class="feature-tag" data-v-c5e15517>快速测试</span><span class="feature-tag" data-v-c5e15517>即时反馈</span></div>',3)])]),f("div",{class:"mode-card listening-mode-card",onClick:t[3]||(t[3]=e=>s.selectMode("listening"))},[...t[25]||(t[25]=[E('<div class="mode-icon" data-v-c5e15517><i class="fas fa-headphones" data-v-c5e15517></i></div><div class="mode-content" data-v-c5e15517><h3 data-v-c5e15517>听力模式</h3><p data-v-c5e15517>通过听音辨词来提升听力能力</p></div><div class="mode-features" data-v-c5e15517><span class="feature-tag" data-v-c5e15517>听力训练</span><span class="feature-tag" data-v-c5e15517>发音练习</span></div>',3)])])]),t[27]||(t[27]=E('<div class="practice-stats" data-v-c5e15517><div class="stat-item" data-v-c5e15517><div class="stat-number" data-v-c5e15517>1500+</div><div class="stat-label" data-v-c5e15517>词汇量</div></div><div class="stat-item" data-v-c5e15517><div class="stat-number" data-v-c5e15517>3</div><div class="stat-label" data-v-c5e15517>练习模式</div></div><div class="stat-item" data-v-c5e15517><div class="stat-number" data-v-c5e15517>∞</div><div class="stat-label" data-v-c5e15517>练习次数</div></div></div>',1))])):"settings"===s.currentStep?(C(),w("div",ys,[t[34]||(t[34]=f("h2",null,"练习设置",-1)),f("div",bs,[t[28]||(t[28]=f("label",null,"练习单词数量",-1)),O(f("input",{type:"number","onUpdate:modelValue":t[4]||(t[4]=e=>s.settings.wordCount=e),min:"1",max:"50",placeholder:"输入单词数量"},null,512),[[V,s.settings.wordCount]])]),f("div",ks,[t[30]||(t[30]=f("label",null,"难度级别",-1)),O(f("select",{"onUpdate:modelValue":t[5]||(t[5]=e=>s.settings.difficulty=e)},[...t[29]||(t[29]=[f("option",{value:"全部"},"全部",-1),f("option",{value:"简单"},"简单",-1),f("option",{value:"中等"},"中等",-1),f("option",{value:"困难"},"困难",-1)])],512),[[z,s.settings.difficulty]])]),f("div",Cs,[t[33]||(t[33]=f("label",null,"单词范围",-1)),f("div",Ss,[f("label",null,[O(f("input",{type:"radio","onUpdate:modelValue":t[6]||(t[6]=e=>s.settings.wordRange=e),value:"today"},null,512),[[P,s.settings.wordRange]]),t[31]||(t[31]=D(" 今天的单词 ",-1))]),f("label",null,[O(f("input",{type:"radio","onUpdate:modelValue":t[7]||(t[7]=e=>s.settings.wordRange=e),value:"all"},null,512),[[P,s.settings.wordRange]]),t[32]||(t[32]=D(" 所有单词 ",-1))])])]),f("div",Ds,[f("button",{class:"back-btn",onClick:t[8]||(t[8]=()=>{s.backToModeSelection(),s.refreshPage()})},"返回"),f("button",{class:"start-btn",onClick:t[9]||(t[9]=(...e)=>s.startPractice&&s.startPractice(...e)),disabled:s.loading},_(s.loading?"准备中...":"开始练习"),9,xs)])])):x("",!0),s.loading?(C(),w("div",As,[...t[35]||(t[35]=[f("div",{class:"loading-spinner"},null,-1),f("p",null,"正在准备练习内容...",-1)])])):x("",!0),"flashcard"===s.currentStep&&s.practiceWords.length>0?(C(),w("div",Ts,[f("div",Ms,[f("div",Ws,[f("div",{class:"progress-fill",style:L({width:s.progressPercentage+"%"})},null,4)]),f("span",null,_(s.currentIndex+1)+" / "+_(s.practiceWords.length),1)]),f("div",_s,[f("div",{class:I(["flashcard",{flipped:s.isFlipped}]),onClick:t[10]||(t[10]=(...e)=>s.flipCard&&s.flipCard(...e))},[f("div",Ls,[f("h3",null,_(s.currentWord.word),1),s.currentWord.phonetic?(C(),w("p",Es,_(s.currentWord.phonetic),1)):x("",!0)]),f("div",Os,[t[36]||(t[36]=f("h4",null,"释义",-1)),f("p",Vs,_(s.currentWord.meaning),1),s.currentWord.phonetic?(C(),w("div",Is,[f("span",null,_(s.currentWord.phonetic),1)])):x("",!0),s.currentWord.example?(C(),w("p",zs,_(s.currentWord.example),1)):x("",!0)])],2)]),f("div",Fs,[f("button",{class:"audio-btn",onClick:t[11]||(t[11]=e=>s.playSound(s.currentWord.word))},[...t[37]||(t[37]=[f("i",{class:"fas fa-volume-up"},null,-1),D(" 发音 ",-1)])]),f("button",{class:"flip-hint-btn",onClick:t[12]||(t[12]=(...e)=>s.flipCard&&s.flipCard(...e))},_(s.isFlipped?"查看单词":"查看释义"),1)]),f("div",Ps,[f("button",{class:"nav-btn",onClick:t[13]||(t[13]=(...e)=>s.prevWord&&s.prevWord(...e)),disabled:0===s.currentIndex}," 上一个 ",8,Us),f("button",{class:"nav-btn",onClick:t[14]||(t[14]=(...e)=>s.nextWord&&s.nextWord(...e)),disabled:s.currentIndex===s.practiceWords.length-1},_(s.currentIndex===s.practiceWords.length-1?"完成练习":"下一个"),9,js)])])):"quiz"===s.currentStep&&s.practiceWords.length>0?(C(),w("div",Bs,[f("div",Rs,[f("div",qs,[f("div",{class:"progress-fill",style:L({width:s.progressPercentage+"%"})},null,4)]),f("span",null,_(s.currentIndex+1)+" / "+_(s.practiceWords.length),1)]),f("div",Ns,[f("h3",null,'请选择单词 "'+_(s.currentWord.word)+'" 的正确释义',1)]),f("div",$s,[(C(!0),w(T,null,M(s.quizOptions,(e,t)=>(C(),w("div",{key:t,class:I(["quiz-option",{selected:s.selectedOption===t,correct:s.showResult&&s.selectedOption===t&&s.isCorrect,incorrect:s.showResult&&s.selectedOption===t&&!s.isCorrect,"correct-answer":s.showResult&&String(e).replace(/\s+/g,"").toLowerCase()===String(s.currentWord.meaning).replace(/\s+/g,"").toLowerCase()}]),onClick:e=>s.selectOption(t)},[f("span",null,_(e),1)],10,Qs))),128))]),s.showResult?(C(),w("div",Ys,[s.isCorrect?(C(),w("div",Hs,[...t[38]||(t[38]=[f("p",null,"✓ 正确！",-1)])])):(C(),w("div",Js,[t[39]||(t[39]=f("p",null,"✗ 错误",-1)),f("p",null,"正确答案: "+_(s.currentWord.meaning),1)]))])):x("",!0),f("div",Zs,[s.showResult?(C(),w("button",{key:1,class:"next-btn",onClick:t[16]||(t[16]=(...e)=>s.nextQuiz&&s.nextQuiz(...e))},_(s.currentIndex===s.practiceWords.length-1?"查看结果":"下一题"),1)):(C(),w("button",{key:0,class:"submit-btn",onClick:t[15]||(t[15]=(...e)=>s.submitQuiz&&s.submitQuiz(...e)),disabled:-1===s.selectedOption}," 提交 ",8,Ks))])])):"listening"===s.currentStep&&s.practiceWords.length>0?(C(),w("div",Gs,[f("div",Xs,[f("div",el,[f("div",{class:"progress-fill",style:L({width:s.progressPercentage+"%"})},null,4)]),f("span",null,_(s.currentIndex+1)+" / "+_(s.practiceWords.length),1)]),f("div",tl,[f("button",{class:"play-audio-btn",onClick:t[17]||(t[17]=e=>s.playSound(s.currentWord.word))},[...t[40]||(t[40]=[f("i",{class:"fas fa-volume-up"},null,-1),D(" 播放发音 ",-1)])]),t[41]||(t[41]=f("p",{class:"listen-hint"},"请选择听到的单词",-1)),f("div",al,[(C(!0),w(T,null,M(s.listeningOptions,(e,t)=>(C(),w("button",{key:t,class:I(["option-btn",{selected:s.selectedOption===t,correct:s.showResult&&t===s.correctOptionIndex,incorrect:s.showResult&&s.selectedOption===t&&s.selectedOption!==s.correctOptionIndex}]),onClick:e=>s.selectOption(t)},_(e),11,sl))),128))]),f("div",ll,[s.showResult?(C(),w("button",{key:1,class:"next-quiz-btn",onClick:t[19]||(t[19]=(...e)=>s.nextQuiz&&s.nextQuiz(...e))},_(s.currentIndex===s.practiceWords.length-1?"查看结果":"下一题"),1)):(C(),w("button",{key:0,class:"submit-btn",onClick:t[18]||(t[18]=(...e)=>s.submitQuiz&&s.submitQuiz(...e)),disabled:-1===s.selectedOption}," 提交 ",8,il))])])])):"result"===s.currentStep?(C(),w("div",nl,[f("div",rl,[t[47]||(t[47]=f("div",{class:"result-header"},[f("h3",null,"练习完成！")],-1)),f("div",ol,[f("div",cl,[f("span",dl,_(s.results.correct),1),t[42]||(t[42]=f("span",{class:"stat-label"},"正确",-1))]),f("div",ul,[f("span",vl,_(s.results.total),1),t[43]||(t[43]=f("span",{class:"stat-label"},"总题数",-1))]),f("div",hl,[f("span",pl,_(s.results.score)+"%",1),t[44]||(t[44]=f("span",{class:"stat-label"},"正确率",-1))])]),f("div",gl,[f("button",{class:"result-btn",onClick:t[20]||(t[20]=()=>{s.restartPractice(),s.refreshPage()})},[...t[45]||(t[45]=[f("i",{class:"fas fa-redo"},null,-1),D(" 重新练习 ",-1)])]),f("button",{class:"result-btn",onClick:t[21]||(t[21]=()=>{s.backToModeSelection(),s.refreshPage()})},[...t[46]||(t[46]=[f("i",{class:"fas fa-home"},null,-1),D(" 返回首页 ",-1)])])])])])):x("",!0)])}],["__scopeId","data-v-c5e15517"]]),wl={class:"diary-container"},fl={class:"diary-header"},yl={class:"header-content"},bl={class:"header-stats"},kl={class:"stat-card"},Cl={class:"stat-number"},Sl={class:"stat-card"},Dl={class:"stat-number"},xl={class:"diary-main"},Al={class:"diary-navigation"},Tl={class:"nav-tabs"},Ml={key:0,class:"diary-edit-section"},Wl={class:"edit-header"},_l={class:"date-selector-card"},Ll={class:"date-input-group"},El={class:"edit-content"},Ol={class:"input-card"},Vl={class:"input-card"},Il={class:"edit-actions"},zl={key:1,class:"diary-list-section"},Fl={class:"list-header"},Pl={class:"search-card"},Ul={class:"search-input-wrapper"},jl={class:"list-content"},Bl={key:0,class:"empty-state"},Rl={key:1,class:"diary-grid"},ql=["onClick"],Nl={class:"diary-card-header"},$l={class:"diary-date"},Ql={class:"diary-word-count"},Yl={class:"diary-card-content"},Hl={class:"diary-title"},Jl={class:"diary-preview"},Zl={class:"diary-card-footer"},Kl={class:"diary-mood"},Gl={class:"diary-detail"},Xl={class:"diary-detail-header"},ei={class:"diary-detail-date"},ti={class:"diary-detail-stats"},ai={class:"word-count"},si={class:"diary-detail-content"};const li=Ne({name:"Diary",props:{words:{type:Array,default:()=>[]}},setup(e){const a=t(d()),s=t({title:"",content:""}),l=t("edit"),i=t([]),n=t(""),r=t(!1),o=t(null);function d(){return(new Date).toISOString().split("T")[0]}const u=v(()=>{if(!i.value||0===i.value.length)return[];const e=n.value.toLowerCase().trim();return e?i.value.filter(t=>{var a;return(null==(a=t.title)?void 0:a.toLowerCase().includes(e))||t.content.toLowerCase().includes(e)||t.date.includes(e)}):i.value});function h(e){try{const t=JSON.parse(localStorage.getItem("dailyEnglishDiaries")||"{}");s.value=t[e]||{title:"",content:""}}catch(t){s.value={title:"",content:""}}}function p(){try{const e=JSON.parse(localStorage.getItem("dailyEnglishDiaries")||"{}"),t=[];Object.keys(e).forEach(a=>{e[a]&&e[a].content&&t.push({date:a,title:e[a].title||"",content:e[a].content})}),i.value=t.sort((e,t)=>new Date(t.date)-new Date(e.date))}catch(e){i.value=[]}}function g(){try{const e=JSON.parse(localStorage.getItem("dailyEnglishDiaries")||"{}");e[a.value]=s.value,localStorage.setItem("dailyEnglishDiaries",JSON.stringify(e)),p(),s.value={title:"",content:""},$.success("日记保存成功")}catch(e){$.error("保存日记失败，请重试")}}c(a,e=>{h(e)}),h(a.value);window.addEventListener("wordUpdated",()=>{});const m=v(()=>i.value.length),w=v(()=>{if(0===i.value.length)return 0;const e=i.value.map(e=>new Date(e.date)).sort((e,t)=>t-e);let t=0;const a=new Date;a.setHours(0,0,0,0);for(let s=0;s<e.length;s++){const l=new Date(a);if(l.setDate(a.getDate()-s),l.setHours(0,0,0,0),e[s].getTime()!==l.getTime())break;t++}return t});return{selectedDate:a,currentDiary:s,activeTab:l,diariesList:i,filteredDiaries:u,searchQuery:n,showDiaryDetail:r,selectedDiaryDetail:o,totalDiaries:m,currentStreak:w,saveDiary:g,clearDiary:function(){s.value={title:"",content:""},g()},resetDate:function(){a.value=d()},onDateChange:function(e){h(e)},onTabChange:function(e){"list"===e.paneName&&p()},viewDiary:function(e){o.value=e,r.value=!0},getDefaultTitle:function(e){if(!e.content)return"无标题日记";const t=e.content.split("\n")[0];return t.length>20?t.substring(0,20)+"...":t||"无标题日记"},getPreview:function(e){return e?e.length>80?e.substring(0,80)+"...":e:""},formatDate:function(e){return e?new Date(e).toLocaleDateString("zh-CN",{year:"numeric",month:"long",day:"numeric",weekday:"long"}):""},getDiaryWordCount:function(e){return e&&e.content?e.content.replace(/\s/g,"").length:0},getDiaryMood:function(e){if(!e||!e.content)return"😊";const t=e.content.toLowerCase();return t.includes("困难")||t.includes("挑战")||t.includes("问题")?"💪":t.includes("开心")||t.includes("成功")||t.includes("进步")?"😊":t.includes("累")||t.includes("疲惫")||t.includes("压力")?"😔":"📝"},switchToList:function(){l.value="list",p()}}}},[["render",function(e,t,a,s,l,i){var n;const r=k("el-date-picker"),o=k("el-input"),c=k("el-dialog");return C(),w("div",wl,[t[29]||(t[29]=f("div",{class:"bg-gradient"},null,-1)),t[30]||(t[30]=f("div",{class:"bg-circle"},null,-1)),t[31]||(t[31]=f("div",{class:"bg-circle"},null,-1)),f("header",fl,[f("div",yl,[t[13]||(t[13]=f("div",{class:"header-title"},[f("h1",null,"学习日记"),f("p",{class:"header-subtitle"},"记录每一天的学习成长")],-1)),f("div",bl,[f("div",kl,[f("div",Cl,_(s.totalDiaries),1),t[11]||(t[11]=f("div",{class:"stat-label"},"日记总数",-1))]),f("div",Sl,[f("div",Dl,_(s.currentStreak),1),t[12]||(t[12]=f("div",{class:"stat-label"},"连续天数",-1))])])])]),f("main",xl,[f("div",Al,[f("div",Tl,[f("button",{class:I(["nav-tab",{active:"edit"===s.activeTab}]),onClick:t[0]||(t[0]=e=>s.activeTab="edit")},[...t[14]||(t[14]=[f("i",{class:"fas fa-pen"},null,-1),f("span",null,"写日记",-1)])],2),f("button",{class:I(["nav-tab",{active:"list"===s.activeTab}]),onClick:t[1]||(t[1]=(...e)=>s.switchToList&&s.switchToList(...e))},[...t[15]||(t[15]=[f("i",{class:"fas fa-list"},null,-1),f("span",null,"日记列表",-1)])],2)])]),"edit"===s.activeTab?(C(),w("section",Ml,[f("div",Wl,[f("div",_l,[t[16]||(t[16]=f("label",{class:"date-label"},"选择日期",-1)),f("div",Ll,[y(r,{modelValue:s.selectedDate,"onUpdate:modelValue":t[2]||(t[2]=e=>s.selectedDate=e),type:"date",placeholder:"选择日期",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD",onChange:s.onDateChange,class:"date-picker"},null,8,["modelValue","onChange"]),f("button",{class:"today-btn",onClick:t[3]||(t[3]=(...e)=>s.resetDate&&s.resetDate(...e))},"今天")])])]),f("div",El,[f("div",Ol,[t[17]||(t[17]=f("div",{class:"input-header"},[f("i",{class:"fas fa-heading"}),f("span",null,"日记标题")],-1)),y(o,{modelValue:s.currentDiary.title,"onUpdate:modelValue":t[4]||(t[4]=e=>s.currentDiary.title=e),placeholder:"给今天的学习起个标题...",class:"title-input",size:"large"},null,8,["modelValue"])]),f("div",Vl,[t[18]||(t[18]=f("div",{class:"input-header"},[f("i",{class:"fas fa-file-alt"}),f("span",null,"日记内容")],-1)),y(o,{modelValue:s.currentDiary.content,"onUpdate:modelValue":t[5]||(t[5]=e=>s.currentDiary.content=e),type:"textarea",rows:12,placeholder:"记录今天的学习心得、遇到的困难、解决的方法、收获的知识...",class:"content-input",resize:"none"},null,8,["modelValue"])])]),f("div",Il,[f("button",{class:"action-btn clear-btn",onClick:t[6]||(t[6]=(...e)=>s.clearDiary&&s.clearDiary(...e))},[...t[19]||(t[19]=[f("i",{class:"fas fa-trash"},null,-1),f("span",null,"清空",-1)])]),f("button",{class:"action-btn save-btn",onClick:t[7]||(t[7]=(...e)=>s.saveDiary&&s.saveDiary(...e))},[...t[20]||(t[20]=[f("i",{class:"fas fa-save"},null,-1),f("span",null,"保存日记",-1)])])])])):"list"===s.activeTab?(C(),w("section",zl,[f("div",Fl,[f("div",Pl,[f("div",Ul,[t[21]||(t[21]=f("i",{class:"fas fa-search"},null,-1)),y(o,{modelValue:s.searchQuery,"onUpdate:modelValue":t[8]||(t[8]=e=>s.searchQuery=e),placeholder:"搜索日记标题、内容或日期...",class:"search-input",size:"large",clearable:""},null,8,["modelValue"])])])]),f("div",jl,[0===s.filteredDiaries.length?(C(),w("div",Bl,[t[23]||(t[23]=f("div",{class:"empty-icon"},[f("i",{class:"fas fa-book-open"})],-1)),t[24]||(t[24]=f("h3",null,"暂无日记记录",-1)),t[25]||(t[25]=f("p",null,"开始记录你的学习之旅吧！",-1)),f("button",{class:"start-writing-btn",onClick:t[9]||(t[9]=e=>s.activeTab="edit")},[...t[22]||(t[22]=[f("i",{class:"fas fa-pen"},null,-1),f("span",null,"开始写日记",-1)])])])):(C(),w("div",Rl,[(C(!0),w(T,null,M(s.filteredDiaries,e=>(C(),w("div",{key:e.date,class:"diary-card",onClick:t=>s.viewDiary(e)},[f("div",Nl,[f("div",$l,[t[26]||(t[26]=f("i",{class:"fas fa-calendar"},null,-1)),f("span",null,_(s.formatDate(e.date)),1)]),f("div",Ql,_(s.getDiaryWordCount(e))+" 字 ",1)]),f("div",Yl,[f("h3",Hl,_(e.title||s.getDefaultTitle(e)),1),f("p",Jl,_(s.getPreview(e.content)),1)]),f("div",Zl,[f("div",Kl,_(s.getDiaryMood(e)),1),t[27]||(t[27]=f("div",{class:"diary-action"},[f("i",{class:"fas fa-arrow-right"})],-1))])],8,ql))),128))]))])])):x("",!0)]),y(c,{modelValue:s.showDiaryDetail,"onUpdate:modelValue":t[10]||(t[10]=e=>s.showDiaryDetail=e),title:(null==(n=s.selectedDiaryDetail)?void 0:n.title)||"日记详情",width:"70%",class:"diary-detail-dialog","destroy-on-close":""},{default:b(()=>{var e,a;return[f("div",Gl,[f("div",Xl,[f("div",ei,[t[28]||(t[28]=f("i",{class:"fas fa-calendar"},null,-1)),f("span",null,_(s.formatDate(null==(e=s.selectedDiaryDetail)?void 0:e.date)),1)]),f("div",ti,[f("span",ai,_(s.getDiaryWordCount(s.selectedDiaryDetail))+" 字",1)])]),f("div",si,_(null==(a=s.selectedDiaryDetail)?void 0:a.content),1)])]}),_:1},8,["modelValue","title"])])}],["__scopeId","data-v-7cbfd519"]]),ii={class:"stats-view-container"},ni={class:"stats-header"},ri={class:"header-content"},oi={class:"header-left"},ci={class:"header-icon"},di={class:"header-actions"},ui={class:"update-time"},vi={class:"real-time-indicator"},hi={class:"stats-main"},pi={class:"core-metrics"},gi={class:"metrics-grid"},mi={class:"metric-content"},wi={class:"metric-icon"},fi={class:"metric-info"},yi={class:"metric-number"},bi={class:"metric-content"},ki={class:"metric-icon"},Ci={class:"metric-info"},Si={class:"metric-number"},Di={class:"metric-content"},xi={class:"metric-info"},Ai={class:"metric-number"},Ti={class:"metric-progress"},Mi={class:"progress-bar"},Wi={class:"progress-text"},_i={class:"metric-content"},Li={class:"metric-info"},Ei={class:"metric-number"},Oi={class:"detailed-analysis"},Vi={class:"analysis-grid"},Ii={class:"card-header"},zi={class:"card-period"},Fi={class:"card-content"},Pi={class:"trend-chart"},Ui={class:"chart-container"},ji={class:"trend-bars"},Bi={class:"trend-count"},Ri={class:"trend-label"},qi={class:"trend-date"},Ni={class:"card-content"},$i={key:0,class:"tag-list"},Qi={class:"tag-info"},Yi={class:"tag-name"},Hi={class:"tag-count"},Ji={class:"tag-progress"},Zi={class:"progress-bar"},Ki={class:"tag-percentage"},Gi={key:1,class:"empty-state"},Xi={class:"card-content"},en={class:"efficiency-display"},tn={class:"efficiency-score"},an={class:"efficiency-details"},sn={class:"efficiency-description"},ln={class:"efficiency-tips"},nn={class:"tip-item"},rn={class:"card-content"},on={class:"goal-display"},cn={class:"goal-current"},dn={class:"goal-number"},un={class:"goal-progress"},vn={class:"progress-ring"},hn={width:"80",height:"80"},pn=["stroke-dashoffset"],gn={class:"progress-text"},mn={class:"progress-percentage"},wn={class:"goal-status"},fn={class:"target-setting"},yn={class:"target-input-group"},bn={class:"target-suggestions"},kn={class:"suggestion-buttons"},Cn=["onClick"],Sn={class:"dialog-footer"},Dn=Ne({__name:"StatsView",props:{words:{type:Array,default:()=>[]},dailyTarget:{type:Number,default:20}},emits:["update:dailyTarget","refresh"],setup(e,{emit:a}){const s=e,l=a,i=Re(),n=t(!1),r=t(!1),o=t(7),d=t(!1),u=t(new Date),h=t(s.dailyTarget||20),p=t(h.value);let S=null;const x=()=>(new Date).toISOString().split("T")[0],A=()=>{p.value=h.value,r.value=!0},W=()=>{p.value>0&&(localStorage.setItem("dailyEnglishTarget",p.value.toString()),l("update:dailyTarget",p.value),r.value=!1,$.success("每日学习目标已更新"))},E=async()=>{d.value=!0;try{await i.loadFromDB(),u.value=new Date,$.success({message:"数据已手动刷新",duration:2e3,showClose:!0}),J()}catch(e){$.error({message:"刷新数据失败",duration:3e3,showClose:!0})}finally{setTimeout(()=>{d.value=!1},1e3)}},V=e=>{const t=new Date-e,a=Math.floor(t/1e3),s=Math.floor(a/60),l=Math.floor(s/60);return a<60?"刚刚更新":s<60?`${s}分钟前更新`:l<24?`${l}小时前更新`:e.toLocaleDateString("zh-CN",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})},F=(e,t)=>{const a=e/t*100;return a>=100?"🎉 目标达成！":a>=80?"💪 即将完成":a>=50?"📈 进展顺利":a>=20?"🚀 开始加速":"🌱 刚刚开始"};v(()=>{const e=x(),t=i.words,a=t.filter(t=>t.date===e),s=new Set;t.forEach(e=>{e.date&&s.add(e.date)});const l=s.size,n=t.filter(e=>e.mastered).length;return{totalWords:t.length,todayWords:a.length,studyDays:l,dailyTarget:h.value,mastered:n}});const P=v(()=>{const e=(e=>{const t=[],a=new Date,s=["日","一","二","三","四","五","六"];for(let l=e-1;l>=0;l--){const e=new Date(a);e.setDate(e.getDate()-l);const i=e.toISOString().split("T")[0],n=s[e.getDay()];t.push({date:i,count:0,height:0,label:n,shortDate:`${e.getMonth()+1}/${e.getDate()}`})}return t})(14),t=i.words,a={};t.forEach(e=>{e.date&&(a[e.date]=(a[e.date]||0)+1)});const s=Math.max(...Object.values(a),1);return e.forEach(e=>{e.count=a[e.date]||0,e.height=e.count>0?e.count/s*100:0}),e}),j=v(()=>P.value.slice(-o.value)),B=v(()=>{const e={};i.words.forEach(t=>{t.tags&&t.tags.length>0&&t.tags.forEach(t=>{e[t]=(e[t]||0)+1})});const t=Object.values(e).reduce((e,t)=>e+t,0);return 0===t?[]:Object.keys(e).map(a=>({name:a,count:e[a],percentage:Math.round(e[a]/t*100),color:H()}))}),R=v(()=>{const e=x(),t=i.words.filter(t=>t.date===e);if(0===t.length)return 0;const a=t.filter(e=>e.mastered).length/t.length,s=t.reduce((e,t)=>e+(t.reviewCount||0),0)/t.length;return Math.round(60*a+40*(2-Math.min(s/5,1)))}),q=v(()=>i.words.length),N=v(()=>{const e=x();return i.words.filter(t=>t.date===e).length}),Q=v(()=>{const e=new Set;return i.words.forEach(t=>{t.date&&e.add(t.date)}),e.size}),Y=v(()=>i.words.filter(e=>e.mastered).length);function H(){const e=["#409EFF","#67C23A","#E6A23C","#F56C6C","#909399"];return e[Math.floor(Math.random()*e.length)]}c(()=>i.words,(e,t)=>{u.value=new Date,J(),$.success({message:"统计数据已更新",duration:2e3,showClose:!0})},{deep:!0}),c(()=>i.diaries,()=>{u.value=new Date},{deep:!0});const J=()=>{document.querySelectorAll(".metric-card, .analysis-card").forEach((e,t)=>{e.style.transform="scale(0.95)",e.style.transition="transform 0.3s ease",setTimeout(()=>{e.style.transform="scale(1)"},100+50*t)}),n.value=!1,setTimeout(()=>{n.value=!0},100)};g(async()=>{i.initialized||await i.initialize();const e=localStorage.getItem("dailyEnglishTarget");e&&(h.value=parseInt(e)),setTimeout(()=>{document.querySelectorAll(".metric-card, .analysis-card").forEach((e,t)=>{setTimeout(()=>{e.classList.add("metric-animate","analysis-animate")},100*t)})},100),S=c(()=>i.lastUpdated,()=>{u.value=new Date}),window.addEventListener("wordUpdated",Z)});const Z=()=>{u.value=new Date,J()};return m(()=>{S&&S(),window.removeEventListener("wordUpdated",Z)}),(e,t)=>{const a=k("TrendCharts"),s=k("Document"),l=k("Calendar");return C(),w("div",ii,[t[35]||(t[35]=f("div",{class:"background-decoration"},[f("div",{class:"bg-circle bg-circle-1"}),f("div",{class:"bg-circle bg-circle-2"}),f("div",{class:"bg-gradient"})],-1)),f("header",ni,[f("div",ri,[f("div",oi,[f("div",ci,[y(a)]),t[4]||(t[4]=f("div",{class:"header-text"},[f("h1",{class:"header-title"},"学习统计"),f("p",{class:"header-subtitle"},"追踪你的学习进度和成就")],-1))]),f("div",di,[f("div",ui,[t[5]||(t[5]=f("i",{class:"fas fa-clock"},null,-1)),f("span",null,_(V(u.value)),1)]),f("div",vi,[f("div",{class:I(["indicator-dot",{active:!d.value}])},null,2),t[6]||(t[6]=f("span",{class:"indicator-text"},"实时更新",-1))]),f("button",{class:I(["refresh-btn",{refreshing:d.value}]),onClick:E},[f("i",{class:I(["fas fa-sync-alt",{"fa-spin":d.value}])},null,2),t[7]||(t[7]=f("span",null,"刷新数据",-1))],2)])])]),f("main",hi,[f("section",pi,[f("div",gi,[f("div",{class:I(["metric-card total-words",{"metric-animate":n.value}])},[f("div",mi,[f("div",wi,[y(s)]),f("div",fi,[f("div",yi,_(q.value),1),t[8]||(t[8]=f("div",{class:"metric-label"},"总单词数",-1))]),t[9]||(t[9]=f("div",{class:"metric-trend positive"},[f("i",{class:"fas fa-arrow-up"}),f("span",null,"+12%")],-1))])],2),f("div",{class:I(["metric-card study-days",{"metric-animate":n.value}])},[f("div",bi,[f("div",ki,[y(l)]),f("div",Ci,[f("div",Si,_(Q.value),1),t[10]||(t[10]=f("div",{class:"metric-label"},"学习天数",-1))]),t[11]||(t[11]=f("div",{class:"metric-trend positive"},[f("i",{class:"fas fa-arrow-up"}),f("span",null,"+7天")],-1))])],2),f("div",{class:I(["metric-card today-words",{"metric-animate":n.value}])},[f("div",Di,[t[13]||(t[13]=f("div",{class:"metric-icon"},[f("i",{class:"fas fa-sun"})],-1)),f("div",xi,[f("div",Ai,_(N.value),1),t[12]||(t[12]=f("div",{class:"metric-label"},"今日单词",-1))]),f("div",Ti,[f("div",Mi,[f("div",{class:"progress-fill",style:L({width:Math.min(N.value/h.value*100,100)+"%"})},null,4)]),f("span",Wi,_(h.value)+" 目标",1)])])],2),f("div",{class:I(["metric-card mastered-words",{"metric-animate":n.value}])},[f("div",_i,[t[15]||(t[15]=f("div",{class:"metric-icon"},[f("i",{class:"fas fa-star"})],-1)),f("div",Li,[f("div",Ei,_(Y.value),1),t[14]||(t[14]=f("div",{class:"metric-label"},"已掌握",-1))]),t[16]||(t[16]=f("div",{class:"metric-trend positive"},[f("i",{class:"fas fa-arrow-up"}),f("span",null,"+5")],-1))])],2)])]),f("section",Oi,[f("div",Vi,[f("div",{class:I(["analysis-card trend-analysis",{"analysis-animate":n.value}])},[f("div",Ii,[t[18]||(t[18]=f("div",{class:"card-title"},[f("i",{class:"fas fa-chart-bar"}),f("span",null,"学习趋势")],-1)),f("div",zi,[O(f("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>o.value=e),class:"period-selector"},[...t[17]||(t[17]=[f("option",{value:"7"},"最近7天",-1),f("option",{value:"14"},"最近14天",-1),f("option",{value:"30"},"最近30天",-1)])],512),[[z,o.value]])])]),f("div",Fi,[f("div",Pi,[f("div",Ui,[f("div",ji,[(C(!0),w(T,null,M(j.value,e=>(C(),w("div",{key:e.date,class:"trend-bar-container"},[f("div",{class:"trend-bar",style:L({height:e.height+"%"})},[f("span",Bi,_(e.count),1)],4),f("div",Ri,_(e.label),1),f("div",qi,_(e.shortDate),1)]))),128))])])])])],2),f("div",{class:I(["analysis-card tag-distribution",{"analysis-animate":n.value}])},[t[20]||(t[20]=f("div",{class:"card-header"},[f("div",{class:"card-title"},[f("i",{class:"fas fa-tags"}),f("span",null,"标签分布")])],-1)),f("div",Ni,[B.value.length>0?(C(),w("div",$i,[(C(!0),w(T,null,M(B.value,e=>(C(),w("div",{key:e.name,class:"tag-item"},[f("div",Qi,[f("span",Yi,_(e.name),1),f("span",Hi,_(e.count)+"个",1)]),f("div",Ji,[f("div",Zi,[f("div",{class:"progress-fill",style:L({width:e.percentage+"%",backgroundColor:e.color})},null,4)]),f("span",Ki,_(e.percentage)+"%",1)])]))),128))])):(C(),w("div",Gi,[...t[19]||(t[19]=[f("div",{class:"empty-icon"},[f("i",{class:"fas fa-tags"})],-1),f("p",null,"暂无标签数据",-1),f("small",null,"开始为单词添加标签来查看分布",-1)])]))])],2),f("div",{class:I(["analysis-card efficiency-analysis",{"analysis-animate":n.value}])},[t[24]||(t[24]=f("div",{class:"card-header"},[f("div",{class:"card-title"},[f("i",{class:"fas fa-trophy"}),f("span",null,"学习效率")])],-1)),f("div",Xi,[f("div",en,[f("div",{class:I(["efficiency-circle",{efficient:R.value>70}])},[f("div",tn,_(R.value),1)],2),f("div",an,[t[23]||(t[23]=f("div",{class:"efficiency-label"},"今日效率评分",-1)),f("div",sn,_((i=R.value,i>=90?"学习状态极佳，保持！":i>=70?"学习效率良好，继续努力":i>=50?"学习状态一般，需要加强":"学习效率较低，建议调整方法")),1),f("div",ln,[f("div",nn,[t[21]||(t[21]=f("i",{class:"fas fa-check-circle"},null,-1)),f("span",null,"掌握率: "+_(Math.round(Y.value/Math.max(q.value,1)*100))+"%",1)]),t[22]||(t[22]=f("div",{class:"tip-item"},[f("i",{class:"fas fa-clock"}),f("span",null,"复习频率: 良好")],-1))])])])])],2),f("div",{class:I(["analysis-card goal-tracking",{"analysis-animate":n.value}])},[f("div",{class:"card-header"},[t[26]||(t[26]=f("div",{class:"card-title"},[f("i",{class:"fas fa-sun"}),f("span",null,"学习目标")],-1)),f("button",{class:"edit-goal-btn",onClick:A},[...t[25]||(t[25]=[f("i",{class:"fas fa-edit"},null,-1)])])]),f("div",rn,[f("div",on,[f("div",cn,[f("div",dn,_(h.value),1),t[27]||(t[27]=f("div",{class:"goal-label"},"每日目标",-1))]),f("div",un,[f("div",vn,[(C(),w("svg",hn,[t[28]||(t[28]=f("circle",{cx:"40",cy:"40",r:"35",stroke:"#e1e5e9","stroke-width":"6",fill:"none"},null,-1)),f("circle",{cx:"40",cy:"40",r:"35","stroke-dasharray":219.91,"stroke-dashoffset":219.91-219.91*Math.min(N.value/h.value,1),stroke:"url(#gradient)","stroke-width":"6",fill:"none","stroke-linecap":"round",transform:"rotate(-90 40 40)"},null,8,pn),t[29]||(t[29]=f("defs",null,[f("linearGradient",{id:"gradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%"},[f("stop",{offset:"0%",style:{"stop-color":"#667eea","stop-opacity":"1"}}),f("stop",{offset:"100%",style:{"stop-color":"#764ba2","stop-opacity":"1"}})])],-1))])),f("div",gn,[f("span",mn,_(Math.round(N.value/h.value*100))+"%",1)])]),f("div",wn,_(F(N.value,h.value)),1)])])])],2)])])]),y(U(ee),{modelValue:r.value,"onUpdate:modelValue":t[3]||(t[3]=e=>r.value=e),title:"设置每日目标",width:"400px",class:"goal-dialog"},{footer:b(()=>[f("div",Sn,[y(U(X),{onClick:t[2]||(t[2]=e=>r.value=!1),size:"large"},{default:b(()=>[...t[33]||(t[33]=[D("取消",-1)])]),_:1}),y(U(X),{type:"primary",onClick:W,size:"large"},{default:b(()=>[...t[34]||(t[34]=[D("确定",-1)])]),_:1})])]),default:b(()=>[f("div",fn,[t[32]||(t[32]=f("p",{class:"setting-description"},"请设置您的每日单词学习目标：",-1)),f("div",yn,[y(U(G),{modelValue:p.value,"onUpdate:modelValue":t[1]||(t[1]=e=>p.value=e),min:1,max:100,size:"large",class:"target-input"},null,8,["modelValue"]),t[30]||(t[30]=f("span",{class:"target-unit"},"个单词",-1))]),f("div",bn,[t[31]||(t[31]=f("div",{class:"suggestion-title"},"快速选择：",-1)),f("div",kn,[(C(),w(T,null,M([10,20,30,50],e=>f("button",{key:e,class:"suggestion-btn",onClick:t=>{return a=e,void(p.value=a);var a}},_(e),9,Cn)),64))])])])]),_:1},8,["modelValue"])]);var i}}},[["__scopeId","data-v-17f5ac7c"]]),xn={key:0,class:"loading-overlay"},An={class:"loading-text"},Tn={__name:"LoadingOverlay",props:{visible:{type:Boolean,default:!1},text:{type:String,default:""}},setup:e=>(t,a)=>{const s=k("el-icon");return C(),W(F,{name:"fade"},{default:b(()=>[e.visible?(C(),w("div",xn,[y(s,{class:"loading-icon",size:40},{default:b(()=>[y(U(Z))]),_:1}),f("p",An,_(e.text||"加载中..."),1)])):x("",!0)]),_:1})}},Mn={id:"app"},Wn={class:"sidebar-nav"},_n={class:"nav-section"},Ln={class:"nav-icon"},En={key:0,class:"nav-badge"},On={class:"nav-icon"},Vn={class:"nav-count"},In={class:"nav-icon"},zn={class:"nav-icon"},Fn={class:"nav-icon"},Pn={class:"nav-section"},Un={class:"nav-icon"},jn={class:"nav-section"},Bn={class:"nav-icon"},Rn={class:"nav-icon"},qn={class:"nav-icon"},Nn={class:"sidebar-footer"},$n={class:"user-stats"},Qn={class:"stat-card"},Yn={class:"stat-value"},Hn={class:"stat-card"},Jn={class:"stat-value"},Zn={class:"header-left"},Kn={class:"page-title"},Gn={class:"breadcrumb"},Xn={class:"header-right"},er={key:0,class:"quick-stats"},tr={class:"quick-stat"},ar={class:"value"},sr={class:"content-wrapper"},lr={class:"content-card"},ir={key:2,class:"mobile-main"},nr={class:"mobile-header"},rr={class:"mobile-stats"},or={class:"stat-item"},cr={class:"stat-number"},dr={class:"stat-item"},ur={class:"stat-number"},vr={class:"stat-item"},hr={class:"stat-number"},pr={class:"mobile-add-section"},gr={key:3,class:"mobile-content"},mr={key:4,class:"mobile-nav"},wr={class:"nav-icon-wrapper"},fr={class:"nav-icon-wrapper"},yr={class:"nav-icon-wrapper"},br={class:"nav-icon-wrapper"},kr={class:"nav-icon-wrapper"},Cr={class:"mobile-more-menu"},Sr={class:"menu-section"},Dr={class:"menu-section"},xr={class:"mobile-data-menu"};const Ar=Ne({name:"App",components:{AddWord:Xe,ViewWords:Et,SearchWords:vs,PracticeWords:ml,Diary:li,StatsView:Dn,LoadingOverlay:Ne(Tn,[["__scopeId","data-v-469dd729"]]),Plus:Q,View:he,Search:ve,EditPen:ue,Document:de,TrendCharts:ce,Setting:oe,ArrowDown:re,ArrowRight:ne,Refresh:ie,Upload:le,Download:se,Delete:H,Menu:ae,More:te},setup(){const e=t("add"),a=t(null),s=t(window.innerWidth),l=t(!0),i=t(!1),n=t(!1),r=t(!1),o=t(!1),d=t("加载中..."),u=localStorage.getItem("dailyEnglishTarget"),h=t(u?parseInt(u):20),p=v(()=>s.value<=768),w=Re(),f=v(()=>w.words),y=v(()=>w.totalWords),b=v(()=>w.todayWords),k=v(()=>w.studyDays),C=v(()=>({add:Xe,view:Et,search:vs,practice:ml,diary:li,stats:Dn}[e.value]||Xe)),S=v(()=>({add:"添加单词",view:"查看记录",search:"搜索单词",practice:"单词练习",diary:"学习日记",stats:"学习统计"}[e.value]||"英语学习日记")),D=(e,t="")=>{A(`操作失败: ${e.message||"未知错误"}`,"error")},x=t=>{try{l.value=!1,setTimeout(()=>{e.value=t,setTimeout(()=>{l.value=!0},50)},200)}catch(a){D(a,"切换标签页"),l.value=!0}},A=(e,t="success")=>{qe.notify(e,"",t)},T=()=>{s.value=window.innerWidth};c(e,e=>{"view"===e&&setTimeout(()=>{i.value=!0},300)}),g(async()=>{try{window.addEventListener("resize",T);const e=localStorage.getItem("dailyEnglishTarget");e&&(h.value=parseInt(e)),w.initialized||await w.initialize(),setTimeout(()=>{i.value=!0},500)}catch(e){D(e,"应用初始化"),setTimeout(()=>{i.value=!0},500)}}),m(()=>{window.removeEventListener("resize",T)});const M=async()=>{try{o.value=!0,d.value="导出中...";const e=await w.exportData(),t=JSON.stringify(e,null,2),a=new Blob([t],{type:"application/json"}),s=URL.createObjectURL(a),l=document.createElement("a");l.href=s,l.download=`english_learning_${(new Date).toISOString().split("T")[0]}.json`,document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(s),A("数据导出成功","success")}catch(e){A("导出数据失败","error")}finally{o.value=!1}},W=()=>{var e;null==(e=a.value)||e.click(),n.value=!1},_=async()=>{if(confirm("确定要清空所有数据吗？此操作不可恢复！"))try{o.value=!0,d.value="清空数据中...";if(!(await w.clearAllData()))throw new Error("清空操作未能完全成功");A("所有数据已清空","warning")}catch(e){A("清空数据失败","error")}finally{o.value=!1}n.value=!1};return B("loading",{show:(e="加载中...")=>{d.value=e,o.value=!0},hide:()=>{o.value=!1}}),{currentTab:e,fileInput:a,totalWords:y,todayWords:b,studyDays:k,isMobile:p,contentVisible:l,showStats:i,isLoading:o,loadingText:d,showMobileDataMenu:n,showMobileMenu:r,getPageTitle:S,getCurrentComponent:C,words:f,switchTab:x,switchToTabAndCloseMenu:e=>{try{r.value=!1,x(e)}catch(t){D(t,"切换标签页并关闭菜单")}},showNotification:A,handleError:D,refreshStats:async()=>{try{await w.loadFromDB(),A("数据已刷新","success")}catch(e){A("刷新数据失败","error")}},exportData:M,triggerImport:W,handleImport:async e=>{const t=e.target.files[0];if(!t)return;const a=new FileReader;a.onload=async t=>{var a;try{o.value=!0,d.value="导入中...";const s=JSON.parse(t.target.result);let l=0,i={};if(s.words&&s.diaries)i={words:s.words,diaries:s.diaries};else{if(!Array.isArray(s))throw new Error("无效的数据格式");i={words:s.map(e=>({id:e.id||Date.now()+Math.random().toString(36).substr(2,9),word:e.word||e.name||e.wordName||"",meaning:e.meaning||e.definition||e.translation||"",phonetic:e.phonetic||e.pronunciation||"",example:e.example||e.sample||"",tags:e.tags||[],date:e.date||(new Date).toISOString().split("T")[0],reviewCount:e.reviewCount||0,mastered:e.mastered||!1})).filter(e=>e.word&&e.meaning),diaries:{}}}if(!(await w.importData(i)))throw new Error("导入过程中出现错误");{const e=w.totalWords-((null==(a=i.words)?void 0:a.length)||0);l=w.totalWords-e,A(`成功导入 ${l} 个单词`,"success")}e.target.value="",n.value=!1}catch(s){A("数据导入失败："+s.message,"error")}finally{o.value=!1}},a.readAsText(t)},clearData:_,beforeTabLeave:()=>(l.value=!1,new Promise(e=>{setTimeout(()=>{l.value=!0,e()},200)})),onTabClick:()=>{"view"===e.value&&setTimeout(()=>{i.value=!0},300)},handleDataCommand:e=>{switch(e){case"import":W();break;case"export":M();break;case"clear":_()}}}}},[["render",function(e,t,a,s,l,i){const n=k("LoadingOverlay"),r=k("Plus"),o=k("el-icon"),c=k("View"),d=k("Search"),u=k("EditPen"),v=k("Document"),h=k("TrendCharts"),p=k("Upload"),g=k("Download"),m=k("Delete"),S=k("el-aside"),A=k("ArrowRight"),T=k("el-button"),M=k("More"),L=k("el-dropdown-item"),E=k("el-dropdown-menu"),V=k("el-dropdown"),z=k("Refresh"),P=k("el-header"),U=k("AddWord"),B=k("ViewWords"),R=k("SearchWords"),q=k("PracticeWords"),N=k("Diary"),$=k("StatsView"),Q=k("el-main"),Y=k("el-container"),H=k("Menu"),J=k("el-drawer"),Z=k("ErrorBoundary");return C(),w("div",Mn,[y(Z,null,{default:b(()=>[s.isLoading?(C(),W(n,{key:0,text:s.loadingText},null,8,["text"])):x("",!0),s.isMobile?x("",!0):(C(),W(Y,{key:1,class:"container"},{default:b(()=>[y(S,{class:"sidebar",width:"280px"},{default:b(()=>[t[36]||(t[36]=f("div",{class:"sidebar-header"},[f("div",{class:"brand"},[f("div",{class:"brand-icon"},"📚"),f("div",{class:"brand-text"},[f("h2",null,"英语学习"),f("span",null,"Daily English")])])],-1)),f("nav",Wn,[f("div",_n,[t[27]||(t[27]=f("div",{class:"nav-section-title"},"学习功能",-1)),f("div",{class:I(["nav-item",{active:"add"===s.currentTab}]),onClick:t[0]||(t[0]=e=>s.switchTab("add"))},[f("div",Ln,[y(o,null,{default:b(()=>[y(r)]),_:1})]),t[22]||(t[22]=f("span",null,"添加单词",-1)),s.todayWords>0?(C(),w("div",En,_(s.todayWords),1)):x("",!0)],2),f("div",{class:I(["nav-item",{active:"view"===s.currentTab}]),onClick:t[1]||(t[1]=e=>s.switchTab("view"))},[f("div",On,[y(o,null,{default:b(()=>[y(c)]),_:1})]),t[23]||(t[23]=f("span",null,"单词记录",-1)),f("div",Vn,_(s.totalWords),1)],2),f("div",{class:I(["nav-item",{active:"search"===s.currentTab}]),onClick:t[2]||(t[2]=e=>s.switchTab("search"))},[f("div",In,[y(o,null,{default:b(()=>[y(d)]),_:1})]),t[24]||(t[24]=f("span",null,"搜索单词",-1))],2),f("div",{class:I(["nav-item",{active:"practice"===s.currentTab}]),onClick:t[3]||(t[3]=e=>s.switchTab("practice"))},[f("div",zn,[y(o,null,{default:b(()=>[y(u)]),_:1})]),t[25]||(t[25]=f("span",null,"单词练习",-1))],2),f("div",{class:I(["nav-item",{active:"diary"===s.currentTab}]),onClick:t[4]||(t[4]=e=>s.switchTab("diary"))},[f("div",Fn,[y(o,null,{default:b(()=>[y(v)]),_:1})]),t[26]||(t[26]=f("span",null,"学习日记",-1))],2)]),f("div",Pn,[t[29]||(t[29]=f("div",{class:"nav-section-title"},"数据分析",-1)),f("div",{class:I(["nav-item",{active:"stats"===s.currentTab}]),onClick:t[5]||(t[5]=e=>s.switchTab("stats"))},[f("div",Un,[y(o,null,{default:b(()=>[y(h)]),_:1})]),t[28]||(t[28]=f("span",null,"学习统计",-1))],2)]),f("div",jn,[t[33]||(t[33]=f("div",{class:"nav-section-title"},"数据管理",-1)),f("div",{class:"nav-item",onClick:t[6]||(t[6]=e=>s.handleDataCommand("import"))},[f("div",Bn,[y(o,null,{default:b(()=>[y(p)]),_:1})]),t[30]||(t[30]=f("span",null,"导入数据",-1))]),f("div",{class:"nav-item",onClick:t[7]||(t[7]=e=>s.handleDataCommand("export"))},[f("div",Rn,[y(o,null,{default:b(()=>[y(g)]),_:1})]),t[31]||(t[31]=f("span",null,"导出数据",-1))]),f("div",{class:"nav-item danger",onClick:t[8]||(t[8]=e=>s.handleDataCommand("clear"))},[f("div",qn,[y(o,null,{default:b(()=>[y(m)]),_:1})]),t[32]||(t[32]=f("span",null,"清空数据",-1))])])]),f("div",Nn,[f("div",$n,[f("div",Qn,[f("div",Yn,_(s.studyDays),1),t[34]||(t[34]=f("div",{class:"stat-label"},"学习天数",-1))]),f("div",Hn,[f("div",Jn,_(s.totalWords),1),t[35]||(t[35]=f("div",{class:"stat-label"},"总单词数",-1))])])])]),_:1}),y(Y,{class:"main-container"},{default:b(()=>[y(P,{class:"main-header"},{default:b(()=>[f("div",Zn,[f("h1",Kn,_(s.getPageTitle),1),f("div",Gn,[t[37]||(t[37]=f("span",null,"英语学习",-1)),y(o,null,{default:b(()=>[y(A)]),_:1}),f("span",null,_(s.getPageTitle),1)])]),f("div",Xn,["add"===s.currentTab?(C(),w("div",er,[f("div",tr,[t[38]||(t[38]=f("span",{class:"label"},"今日已学",-1)),f("span",ar,_(s.todayWords),1)])])):x("",!0),y(T,{type:"primary",size:"small",onClick:t[9]||(t[9]=e=>s.switchToTabAndCloseMenu("add"))},{default:b(()=>[y(o,null,{default:b(()=>[y(r)]),_:1}),t[39]||(t[39]=D(" 添加单词 ",-1))]),_:1}),y(V,{onCommand:s.handleDataCommand},{dropdown:b(()=>[y(E,null,{default:b(()=>[y(L,{command:"import"},{default:b(()=>[y(o,null,{default:b(()=>[y(p)]),_:1}),t[40]||(t[40]=D(" 导入数据 ",-1))]),_:1}),y(L,{command:"export"},{default:b(()=>[y(o,null,{default:b(()=>[y(g)]),_:1}),t[41]||(t[41]=D(" 导出数据 ",-1))]),_:1}),y(L,{command:"clear",divided:""},{default:b(()=>[y(o,null,{default:b(()=>[y(m)]),_:1}),t[42]||(t[42]=D(" 清空数据 ",-1))]),_:1})]),_:1})]),default:b(()=>[y(T,{size:"small",text:""},{default:b(()=>[y(o,null,{default:b(()=>[y(M)]),_:1})]),_:1})]),_:1},8,["onCommand"]),y(T,{type:"primary",size:"small",onClick:s.refreshStats},{default:b(()=>[y(o,null,{default:b(()=>[y(z)]),_:1}),t[43]||(t[43]=D(" 刷新 ",-1))]),_:1},8,["onClick"])])]),_:1}),y(Q,{class:"main-content"},{default:b(()=>[f("div",sr,[f("div",lr,[y(F,{name:"fade-slide",mode:"in-out"},{default:b(()=>["add"===s.currentTab?(C(),W(U,{key:0})):"view"===s.currentTab?(C(),W(B,{key:1,"show-stats":s.showStats,onDataUpdated:s.refreshStats,onSwitchToAdd:t[10]||(t[10]=e=>s.switchTab("add")),onEditWord:e.editWord},null,8,["show-stats","onDataUpdated","onEditWord"])):"search"===s.currentTab?(C(),W(R,{key:2})):"practice"===s.currentTab?(C(),W(q,{key:3})):"diary"===s.currentTab?(C(),W(N,{key:4})):"stats"===s.currentTab?(C(),W($,{key:5})):x("",!0)]),_:1})])])]),_:1})]),_:1})]),_:1})),s.isMobile&&"add"===s.currentTab?(C(),w("div",ir,[f("div",nr,[f("div",rr,[f("div",or,[f("div",cr,_(s.totalWords),1),t[44]||(t[44]=f("div",{class:"stat-label"},"单词",-1))]),f("div",dr,[f("div",ur,_(s.todayWords),1),t[45]||(t[45]=f("div",{class:"stat-label"},"今日",-1))]),f("div",vr,[f("div",hr,_(s.studyDays),1),t[46]||(t[46]=f("div",{class:"stat-label"},"天数",-1))])]),t[47]||(t[47]=f("div",{class:"mobile-title"},[f("h1",null,"英语学习日记")],-1))]),f("div",pr,[y(U)])])):x("",!0),s.isMobile&&"add"!==s.currentTab?(C(),w("div",gr,[y(F,{name:"fade"},{default:b(()=>[O(f("div",null,["add"===s.currentTab?(C(),W(U,{key:0})):"view"===s.currentTab?(C(),W(B,{key:1,"show-stats":s.showStats,onDataUpdated:s.refreshStats,onSwitchToAdd:t[11]||(t[11]=e=>s.switchTab("add"))},null,8,["show-stats","onDataUpdated"])):"search"===s.currentTab?(C(),W(R,{key:2})):"practice"===s.currentTab?(C(),W(q,{key:3})):"diary"===s.currentTab?(C(),W(N,{key:4})):"stats"===s.currentTab?(C(),W($,{key:5})):x("",!0)],512),[[j,s.contentVisible]])]),_:1})])):x("",!0),s.isMobile?(C(),w("div",mr,[f("div",{class:I(["mobile-nav-item",{active:"add"===s.currentTab}]),onClick:t[12]||(t[12]=e=>s.switchTab("add"))},[f("div",wr,[y(o,null,{default:b(()=>[y(r)]),_:1})]),t[48]||(t[48]=f("span",null,"添加",-1))],2),f("div",{class:I(["mobile-nav-item",{active:"view"===s.currentTab||"search"===s.currentTab}]),onClick:t[13]||(t[13]=e=>s.switchTab("view"))},[f("div",fr,[y(o,null,{default:b(()=>[y(c)]),_:1})]),t[49]||(t[49]=f("span",null,"单词",-1))],2),f("div",{class:I(["mobile-nav-item",{active:"practice"===s.currentTab}]),onClick:t[14]||(t[14]=e=>s.switchTab("practice"))},[f("div",yr,[y(o,null,{default:b(()=>[y(u)]),_:1})]),t[50]||(t[50]=f("span",null,"练习",-1))],2),f("div",{class:I(["mobile-nav-item",{active:"diary"===s.currentTab}]),onClick:t[15]||(t[15]=e=>s.switchTab("diary"))},[f("div",br,[y(o,null,{default:b(()=>[y(v)]),_:1})]),t[51]||(t[51]=f("span",null,"日记",-1))],2),f("div",{class:"mobile-nav-item",onClick:t[16]||(t[16]=e=>s.showMobileMenu=!0)},[f("div",kr,[y(o,null,{default:b(()=>[y(H)]),_:1})]),t[52]||(t[52]=f("span",null,"更多",-1))])])):x("",!0),y(J,{modelValue:s.showMobileMenu,"onUpdate:modelValue":t[19]||(t[19]=e=>s.showMobileMenu=e),title:"更多功能",direction:"btt",size:"60%"},{default:b(()=>[f("div",Cr,[f("div",Sr,[t[55]||(t[55]=f("h3",null,"学习功能",-1)),y(T,{type:"primary",onClick:t[17]||(t[17]=e=>s.switchToTabAndCloseMenu("stats")),style:{width:"100%","margin-bottom":"10px"},class:I({"is-active":"stats"===s.currentTab})},{default:b(()=>[y(o,null,{default:b(()=>[y(h)]),_:1}),t[53]||(t[53]=D(" 学习统计 ",-1))]),_:1},8,["class"]),y(T,{type:"info",onClick:t[18]||(t[18]=e=>s.switchToTabAndCloseMenu("search")),style:{width:"100%","margin-bottom":"10px"},class:I({"is-active":"search"===s.currentTab})},{default:b(()=>[y(o,null,{default:b(()=>[y(d)]),_:1}),t[54]||(t[54]=D(" 搜索单词 ",-1))]),_:1},8,["class"])]),f("div",Dr,[t[59]||(t[59]=f("h3",null,"数据管理",-1)),y(T,{type:"success",onClick:s.triggerImport,style:{width:"100%","margin-bottom":"10px"}},{default:b(()=>[y(o,null,{default:b(()=>[y(p)]),_:1}),t[56]||(t[56]=D(" 导入数据 ",-1))]),_:1},8,["onClick"]),y(T,{type:"warning",onClick:s.exportData,style:{width:"100%","margin-bottom":"10px"}},{default:b(()=>[y(o,null,{default:b(()=>[y(g)]),_:1}),t[57]||(t[57]=D(" 导出数据 ",-1))]),_:1},8,["onClick"]),y(T,{type:"danger",onClick:s.clearData,style:{width:"100%"}},{default:b(()=>[y(o,null,{default:b(()=>[y(m)]),_:1}),t[58]||(t[58]=D(" 清空数据 ",-1))]),_:1},8,["onClick"])])])]),_:1},8,["modelValue"]),y(J,{modelValue:s.showMobileDataMenu,"onUpdate:modelValue":t[20]||(t[20]=e=>s.showMobileDataMenu=e),title:"数据管理",direction:"btt",size:"200px"},{default:b(()=>[f("div",xr,[y(T,{type:"primary",onClick:s.triggerImport,style:{width:"100%","margin-bottom":"10px"}},{default:b(()=>[y(o,null,{default:b(()=>[y(p)]),_:1}),t[60]||(t[60]=D(" 导入数据 ",-1))]),_:1},8,["onClick"]),y(T,{type:"success",onClick:s.exportData,style:{width:"100%","margin-bottom":"10px"}},{default:b(()=>[y(o,null,{default:b(()=>[y(g)]),_:1}),t[61]||(t[61]=D(" 导出数据 ",-1))]),_:1},8,["onClick"]),y(T,{type:"danger",onClick:s.clearData,style:{width:"100%"}},{default:b(()=>[y(o,null,{default:b(()=>[y(m)]),_:1}),t[62]||(t[62]=D(" 清空数据 ",-1))]),_:1},8,["onClick"])])]),_:1},8,["modelValue"]),f("input",{ref:"fileInput",type:"file",accept:".json",style:{display:"none"},onChange:t[21]||(t[21]=(...e)=>s.handleImport&&s.handleImport(...e))},null,544)]),_:1})])}],["__scopeId","data-v-309fe565"]]),Tr={key:0,class:"error-boundary"};const Mr=Ne({name:"ErrorBoundary",props:{fallback:{type:Function,default:null}},data:()=>({hasError:!1,errorMessage:""}),methods:{resetError(){this.hasError=!1,this.errorMessage=""}},errorCaptured(e,t,a){return this.hasError=!0,this.errorMessage=e.message||"未知错误",this.fallback&&this.fallback(e,t,a),!1}},[["render",function(e,t,a,s,l,i){const n=k("el-button"),r=k("el-result");return l.hasError?(C(),w("div",Tr,[y(r,{icon:"error",title:"出错了","sub-title":l.errorMessage||"应用遇到了一个问题"},{extra:b(()=>[y(n,{type:"primary",onClick:i.resetError},{default:b(()=>[...t[0]||(t[0]=[D("重试",-1)])]),_:1},8,["onClick"])]),_:1},8,["sub-title"])])):R(e.$slots,"default",{key:1},void 0,!0)}],["__scopeId","data-v-66b0e60c"]]);
/*! Element Plus v2.11.5 */const Wr=new class{constructor(){this.isMobile=/iPhone|iPad|iPod|Android/i.test(navigator.userAgent),this.isWeChat=/MicroMessenger/i.test(navigator.userAgent),this.isInitialized=!1}async init(){if(!this.isInitialized)try{this.isMobile&&await this.setupMobileAudio(),this.isInitialized=!0}catch(e){}}async setupMobileAudio(){if("speechSynthesis"in window){this.isWeChat&&await this.activateWeChatAudio();try{const e=window.AudioContext||window.webkitAudioContext;if(e){const t=new e;"suspended"===t.state&&await t.resume()}}catch(e){}}}async activateWeChatAudio(){return new Promise(e=>{try{const t=new Audio("data:audio/wav;base64,UklGRigAAABXQVZFZm10IBAAAAAAQAEAAEAfAAAQAQABAAgAZGF0YQAAAAA=");t.volume=0;const a=t.play();void 0!==a?a.then(()=>{t.pause(),e()}).catch(()=>e()):setTimeout(()=>{t.pause(),e()},100)}catch(t){e()}})}async handleUserInteraction(){return!this.isMobile||new Promise(e=>{const t=async()=>{try{await this.activateWeChatAudio(),document.removeEventListener("touchstart",t),document.removeEventListener("click",t),e(!0)}catch(a){e(!0)}};document.addEventListener("touchstart",t,{once:!0}),document.addEventListener("click",t,{once:!0}),setTimeout(()=>{document.removeEventListener("touchstart",t),document.removeEventListener("click",t),e(!0)},2e3)})}},_r=q(Ar),Lr=function(){const s=e(!0),l=s.run(()=>t({}));let i=[],n=[];const r=a({install(e){we(r),r._a=e,e.provide(fe,r),e.config.globalProperties.$pinia=r,n.forEach(e=>i.push(e)),n=[]},use(e){return this._a?i.push(e):n.push(e),this},_p:i,_a:null,_e:s,_s:new Map,state:l});return r}();_r.component("ErrorBoundary",Mr),_r.config.errorHandler=(e,t,a)=>{e.message&&e.message.includes("env")?qe.error("应用配置错误，请检查依赖库版本"):qe.error("应用发生错误，请刷新页面重试")},window.addEventListener("unhandledrejection",e=>{e.reason&&e.reason.message&&e.reason.message.includes("env")?qe.error("应用配置错误，请检查依赖库版本"):qe.error("应用发生未知错误")}),_r.config.globalProperties.$notify=qe,_r.use(Lr),_r.use(pe,{locale:{name:"zh-cn",el:{breadcrumb:{label:"面包屑"},colorpicker:{confirm:"确定",clear:"清空",defaultLabel:"颜色选择器",description:"当前颜色 {color}，按 Enter 键选择新颜色",alphaLabel:"选择透明度的值",alphaDescription:"透明度 {alpha}, 当前颜色 {color}",hueLabel:"选择色相值",hueDescription:"色相 {hue}, 当前颜色 {color}"},datepicker:{now:"此刻",today:"今天",cancel:"取消",clear:"清空",confirm:"确定",dateTablePrompt:"使用方向键与 Enter 键可选择日期",monthTablePrompt:"使用方向键与 Enter 键可选择月份",yearTablePrompt:"使用方向键与 Enter 键可选择年份",selectedDate:"已选日期",selectDate:"选择日期",selectTime:"选择时间",startDate:"开始日期",startTime:"开始时间",endDate:"结束日期",endTime:"结束时间",prevYear:"前一年",nextYear:"后一年",prevMonth:"上个月",nextMonth:"下个月",year:"年",month1:"1 月",month2:"2 月",month3:"3 月",month4:"4 月",month5:"5 月",month6:"6 月",month7:"7 月",month8:"8 月",month9:"9 月",month10:"10 月",month11:"11 月",month12:"12 月",weeks:{sun:"日",mon:"一",tue:"二",wed:"三",thu:"四",fri:"五",sat:"六"},weeksFull:{sun:"星期日",mon:"星期一",tue:"星期二",wed:"星期三",thu:"星期四",fri:"星期五",sat:"星期六"},months:{jan:"一月",feb:"二月",mar:"三月",apr:"四月",may:"五月",jun:"六月",jul:"七月",aug:"八月",sep:"九月",oct:"十月",nov:"十一月",dec:"十二月"}},inputNumber:{decrease:"减少数值",increase:"增加数值"},select:{loading:"加载中",noMatch:"无匹配数据",noData:"无数据",placeholder:"请选择"},mention:{loading:"加载中"},dropdown:{toggleDropdown:"切换下拉选项"},cascader:{noMatch:"无匹配数据",loading:"加载中",placeholder:"请选择",noData:"暂无数据"},pagination:{goto:"前往",pagesize:"条/页",total:"共 {total} 条",pageClassifier:"页",page:"页",prev:"上一页",next:"下一页",currentPage:"第 {pager} 页",prevPages:"向前 {pager} 页",nextPages:"向后 {pager} 页",deprecationWarning:"你使用了一些已被废弃的用法，请参考 el-pagination 的官方文档"},dialog:{close:"关闭此对话框"},drawer:{close:"关闭此对话框"},messagebox:{title:"提示",confirm:"确定",cancel:"取消",error:"输入的数据不合法!",close:"关闭此对话框"},upload:{deleteTip:"按 Delete 键可删除",delete:"删除",preview:"查看图片",continue:"继续上传"},slider:{defaultLabel:"滑块介于 {min} 至 {max}",defaultRangeStartLabel:"选择起始值",defaultRangeEndLabel:"选择结束值"},table:{emptyText:"暂无数据",confirmFilter:"筛选",resetFilter:"重置",clearFilter:"全部",sumText:"合计"},tour:{next:"下一步",previous:"上一步",finish:"结束导览",close:"关闭此对话框"},tree:{emptyText:"暂无数据"},transfer:{noMatch:"无匹配数据",noData:"无数据",titles:["列表 1","列表 2"],filterPlaceholder:"请输入搜索内容",noCheckedFormat:"共 {total} 项",hasCheckedFormat:"已选 {checked}/{total} 项"},image:{error:"加载失败"},pageHeader:{title:"返回"},popconfirm:{confirmButtonText:"确定",cancelButtonText:"取消"},carousel:{leftArrow:"上一张幻灯片",rightArrow:"下一张幻灯片",indicator:"幻灯片切换至索引 {index}"}}},size:"default",zIndex:3e3}),_r.mount("#app");const Er=Re();Wr.init().catch(e=>{}),Er.$onAction(({name:e,after:t,onError:a})=>{"initialize"===e&&(t(()=>{}),a(e=>{}))}),Er.initialize().catch(e=>{qe.error("应用初始化失败，请刷新页面重试")}),_r.config.globalProperties.$audioHelper=Wr;
