import{ao as e,r as a,an as t,l as s,k as l,ax as i,ac as n,f as r,o,j as d,n as c,ae as u,c as v,i as p,ay as h,h as g,U as f,z as m,B as w,R as y,J as b,al as k,A as C,W as S,O as D,L as x,ah as T,Q as M,a5 as W,I as _,P as O,D as L,az as V,K as F,ai as I,E as z,aA as A,T as E,af as P,u as j,S as U,v as B,C as R,au as q}from"./vue-vendor-Br4Vyilo.js";import{E as N,a as $,p as Y,r as H,d as J,e as Q,l as K,b as Z,c as G,f as X,g as ee,m as ae,h as te,i as se,u as le,j as ie,k as ne,n as re,s as oe,t as de,o as ce,q as ue,v as ve,w as pe,x as he}from"./element-plus-vendor-md41yW8N.js";import{o as ge}from"./utils-vendor-7JQXQzuE.js";
/*!
 * pinia v2.3.1
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */
let fe;!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))a(e);new MutationObserver(e=>{for(const t of e)if("childList"===t.type)for(const e of t.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&a(e)}).observe(document,{childList:!0,subtree:!0})}function a(e){if(e.ep)return;e.ep=!0;const a=function(e){const a={};return e.integrity&&(a.integrity=e.integrity),e.referrerPolicy&&(a.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?a.credentials="include":"anonymous"===e.crossOrigin?a.credentials="omit":a.credentials="same-origin",a}(e);fetch(e.href,a)}}();const me=e=>fe=e,we=Symbol();function ye(e){return e&&"object"==typeof e&&"[object Object]"===Object.prototype.toString.call(e)&&"function"!=typeof e.toJSON}var be,ke;(ke=be||(be={})).direct="direct",ke.patchObject="patch object",ke.patchFunction="patch function";const Ce=()=>{};function Se(e,a,t,s=Ce){e.push(a);const l=()=>{const t=e.indexOf(a);t>-1&&(e.splice(t,1),s())};return!t&&r()&&o(l),l}function De(e,...a){e.slice().forEach(e=>{e(...a)})}const xe=e=>e(),Te=Symbol(),Me=Symbol();function We(e,a){e instanceof Map&&a instanceof Map?a.forEach((a,t)=>e.set(t,a)):e instanceof Set&&a instanceof Set&&a.forEach(e.add,e);for(const t in a){if(!a.hasOwnProperty(t))continue;const s=a[t],n=e[t];ye(n)&&ye(s)&&e.hasOwnProperty(t)&&!l(s)&&!i(s)?e[t]=We(n,s):e[t]=s}return e}const _e=Symbol();function Oe(e){return!ye(e)||!e.hasOwnProperty(_e)}const{assign:Le}=Object;function Ve(e){return!(!l(e)||!e.effect)}function Fe(t,r,o={},u,v,p){let h;const g=Le({actions:{}},o),f={deep:!0};let m,w,y,b=[],k=[];const C=u.state.value[t];let S;function D(e){let a;m=w=!1,"function"==typeof e?(e(u.state.value[t]),a={type:be.patchFunction,storeId:t,events:y}):(We(u.state.value[t],e),a={type:be.patchObject,payload:e,storeId:t,events:y});const s=S=Symbol();c().then(()=>{S===s&&(m=!0)}),w=!0,De(b,a,u.state.value[t])}p||C||(u.state.value[t]={}),a({});const x=p?function(){const{state:e}=o,a=e?e():{};this.$patch(e=>{Le(e,a)})}:Ce;const T=(e,a="")=>{if(Te in e)return e[Me]=a,e;const s=function(){me(u);const a=Array.from(arguments),l=[],i=[];let n;De(k,{args:a,name:s[Me],store:W,after:function(e){l.push(e)},onError:function(e){i.push(e)}});try{n=e.apply(this&&this.$id===t?this:W,a)}catch(r){throw De(i,r),r}return n instanceof Promise?n.then(e=>(De(l,e),e)).catch(e=>(De(i,e),Promise.reject(e))):(De(l,n),n)};return s[Te]=!0,s[Me]=a,s},M={_p:u,$id:t,$onAction:Se.bind(null,k),$patch:D,$reset:x,$subscribe(e,a={}){const s=Se(b,e,a.detached,()=>l()),l=h.run(()=>d(()=>u.state.value[t],s=>{("sync"===a.flush?w:m)&&e({storeId:t,type:be.direct,events:y},s)},Le({},f,a)));return s},$dispose:function(){h.stop(),b=[],k=[],u._s.delete(t)}},W=s(M);u._s.set(t,W);const _=(u._a&&u._a.runWithContext||xe)(()=>u._e.run(()=>(h=e()).run(()=>r({action:T}))));for(const e in _){const a=_[e];if(l(a)&&!Ve(a)||i(a))p||(C&&Oe(a)&&(l(a)?a.value=C[e]:We(a,C[e])),u.state.value[t][e]=a);else if("function"==typeof a){const t=T(a,e);_[e]=t,g.actions[e]=a}}return Le(W,_),Le(n(W),_),Object.defineProperty(W,"$state",{get:()=>u.state.value[t],set:e=>{D(a=>{Le(a,e)})}}),u._p.forEach(e=>{Le(W,h.run(()=>e({store:W,app:u._a,pinia:u,options:g})))}),C&&p&&o.hydrate&&o.hydrate(W.$state,C),m=!0,w=!0,W}
/*! #__NO_SIDE_EFFECTS__ */function Ie(e,a,s){let l,i;const n="function"==typeof a;function r(e,s){const r=h();(e=e||(r?p(we,null):null))&&me(e),(e=fe)._s.has(l)||(n?Fe(l,a,i,e):function(e,a,s){const{state:l,actions:i,getters:n}=a,r=s.state.value[e];let o;o=Fe(e,function(){r||(s.state.value[e]=l?l():{});const a=u(s.state.value[e]);return Le(a,i,Object.keys(n||{}).reduce((a,l)=>(a[l]=t(v(()=>{me(s);const a=s._s.get(e);return n[l].call(a,a)})),a),{}))},a,s,0,!0)}(l,i,e));return e._s.get(l)}return l=e,i=n?s:a,r.$id=l,r}const ze="words",Ae="diaries";let Ee;function Pe(){return Ee||(Ee=async function(){return ge("english_diary_db",1,{upgrade(e){e.objectStoreNames.contains(ze)||e.createObjectStore(ze,{keyPath:"id"}).createIndex("date","date",{unique:!1}),e.objectStoreNames.contains(Ae)||e.createObjectStore(Ae,{keyPath:"date"})}})}()),Ee}const je={getAll:async()=>(await Pe()).getAll(ze),getByDate:async e=>(await Pe()).transaction(ze,"readonly").store.index("date").getAll(e),async add(e){e.id||(e.id=Date.now().toString()),e.date||(e.date=(new Date).toISOString().split("T")[0]);return(await Pe()).add(ze,e)},update:async e=>(await Pe()).put(ze,e),delete:async e=>(await Pe()).delete(ze,e),async importFromLocalStorage(){try{const e=localStorage.getItem("words");if(e){const a=JSON.parse(e),t=(await Pe()).transaction(ze,"readwrite");for(const e of a)await t.store.put(e);return await t.done,!0}}catch(e){}return!1}},Ue={getAll:async()=>(await Pe()).getAll(Ae),getByDate:async e=>(await Pe()).get(Ae,e),async save(e){e.date||(e.date=(new Date).toISOString().split("T")[0]);return(await Pe()).put(Ae,e)},delete:async e=>(await Pe()).delete(Ae,e),async importFromLocalStorage(){try{const e=localStorage.getItem("diaries");if(e){const a=JSON.parse(e),t=(await Pe()).transaction(Ae,"readwrite");for(const e of a)await t.store.put(e);return await t.done,!0}}catch(e){}return!1}},Be={async exportAll(){try{const e=await je.getAll();return{words:e,diaries:await Ue.getAll(),exportDate:(new Date).toISOString()}}catch(e){return null}},async importData(e){try{if(!e||!e.words&&!e.diaries)return!1;const a=await Pe();if(e.words&&e.words.length>0){const t=a.transaction(ze,"readwrite");for(const a of e.words)await t.store.put(a);await t.done}if(e.diaries&&e.diaries.length>0){const t=a.transaction(Ae,"readwrite");for(const a of e.diaries)await t.store.put(a);await t.done}return!0}catch(a){return!1}}};const Re=Ie("word",{state:()=>({words:[],diaries:[],lastUpdated:null,isLoading:!1,initialized:!1}),getters:{totalWords:e=>e.words.length,todayWords:e=>{const a=(new Date).toISOString().split("T")[0];return e.words.filter(e=>e.date===a).length},studyDays:e=>new Set(e.words.map(e=>e.date)).size,getWordsByDate:e=>a=>a?e.words.filter(e=>e.date===a):e.words,getDiaries:e=>e.diaries,getDiaryByDate:e=>a=>e.diaries.find(e=>e.date===a)},actions:{async initialize(){if(!this.initialized&&!this.isLoading){this.isLoading=!0;try{if(!window.indexedDB)return this.loadFromLocalStorage(),void(this.initialized=!0);await async function(){await je.importFromLocalStorage(),await Ue.importFromLocalStorage()}(),await this.loadFromDB(),this.initialized=!0}catch(e){try{this.loadFromLocalStorage(),this.initialized=!0}catch(a){}}finally{this.isLoading=!1}}},async loadFromDB(){try{this.isLoading=!0,this.words=await je.getAll(),this.diaries=await Ue.getAll(),this.lastUpdated=new Date}catch(e){}finally{this.isLoading=!1}},async addWord(e){e.id||(e.id=Date.now().toString()),e.date||(e.date=(new Date).toISOString().split("T")[0]);try{return await je.add(e),this.words.push(e),this.lastUpdated=new Date,this.saveToLocalStorage(),e}catch(a){throw a}},async updateWord(e){try{await je.update(e);const a=this.words.findIndex(a=>a.id===e.id);return-1!==a&&(this.words[a]={...this.words[a],...e},this.lastUpdated=new Date,this.saveToLocalStorage(),!0)}catch(a){throw a}},async deleteWord(e){try{await je.delete(e);const a=this.words.findIndex(a=>a.id===e);return-1!==a&&(this.words.splice(a,1),this.lastUpdated=new Date,this.saveToLocalStorage(),!0)}catch(a){throw a}},async addDiary(e){e.date||(e.date=(new Date).toISOString().split("T")[0]);try{await Ue.save(e);const a=this.diaries.findIndex(a=>a.date===e.date);-1!==a?this.diaries[a]=e:this.diaries.push(e),this.lastUpdated=new Date}catch(a){}},loadFromLocalStorage(){try{const e=localStorage.getItem("words");e&&(this.words=JSON.parse(e)),this.lastUpdated=new Date}catch(e){}},saveToLocalStorage(){try{localStorage.setItem("words",JSON.stringify(this.words)),this.lastUpdated=new Date}catch(e){}},async exportData(){try{return await Be.exportAll()}catch(e){return{words:this.words,exportDate:(new Date).toISOString()}}},async importData(e){if(!e||!e.words)return!1;try{const a=e.words.map(e=>{if(e.id||(e.id=Date.now().toString()+Math.random().toString(36).substr(2,9)),e.date)try{const a=new Date(e.date);e.date=a.toISOString().split("T")[0]}catch(a){e.date=(new Date).toISOString().split("T")[0]}else e.date=(new Date).toISOString().split("T")[0];return e}),t=await Be.importData({...e,words:a});return t&&(await this.loadFromDB(),this.saveToLocalStorage()),t}catch(a){try{if(e.words){const a=e.words.map(e=>(e.id||(e.id=Date.now().toString()+Math.random().toString(36).substr(2,9)),e.date||(e.date=(new Date).toISOString().split("T")[0]),e));return this.words=a,this.saveToLocalStorage(),!0}}catch(t){}return!1}},async clearAllData(){try{this.isLoading=!0;const e=await ge("english_diary_db",1),a=e.transaction("words","readwrite");await a.objectStore("words").clear(),await a.done;const t=e.transaction("diaries","readwrite");return await t.objectStore("diaries").clear(),await t.done,this.words=[],this.diaries=[],this.lastUpdated=new Date,localStorage.removeItem("words"),localStorage.removeItem("diaries"),!0}catch(e){return!1}finally{this.isLoading=!1}}}}),qe={success(e,a="成功"){$({type:"success",message:e,duration:3e3})},error(e,a="错误"){$({type:"error",message:e,duration:5e3,showClose:!0})},warning(e,a="警告"){$({type:"warning",message:e,duration:4e3})},info(e,a="提示"){$({type:"info",message:e,duration:3e3})},notify(e,a,t="info",s=4500){N({title:a,message:e,type:t,duration:s,position:"top-right"})},handleApiError(e,a="操作失败，请稍后重试"){var t;return"QuotaExceededError"===e.name?this.error("存储空间不足，请清理一些数据后重试"):"NetworkError"===e.name||(null==(t=e.message)?void 0:t.includes("network"))?this.error("网络连接错误，请检查您的网络连接"):e.message?this.error(e.message):this.error(a),e}},Ne=(e,a)=>{const t=e.__vccOpts||e;for(const[s,l]of a)t[s]=l;return t},$e={class:"add-word-container"},Ye={class:"container"},He={class:"form-section"},Je={class:"form-section"},Qe={class:"form-actions"},Ke={class:"quick-add-content"},Ze={key:0,class:"recent-words"},Ge={class:"recent-words-list"};const Xe=Ne({name:"AddWord",emits:["word-added","switch-tab"],setup(e,{emit:t}){const l=Re(),i=a(null);a(null);const n=a(!1),r=a(""),o=a([]),c=s({word:"",phonetic:"",partOfSpeech:"",meaning:"",example:"",tags:"",synonyms:"",date:(new Date).toISOString().split("T")[0]}),u=v(()=>{const e=(new Date).toISOString().split("T")[0];return l.words.filter(a=>a.date===e).length}),p=e=>l.words.some(a=>a.word.toLowerCase()===e.toLowerCase()),h=async()=>{const e=c.tags?c.tags.split(",").map(e=>e.trim()).filter(e=>e):[],a={word:c.word.trim(),phonetic:c.phonetic.trim(),partOfSpeech:c.partOfSpeech,meaning:c.meaning.trim(),example:c.example.trim(),tags:e,synonyms:c.synonyms.trim(),date:c.date};await l.addWord(a),await new Promise(e=>setTimeout(e,100)),o.value.unshift(a.word),o.value.length>5&&(o.value=o.value.slice(0,5)),t("word-added",a);const s=new CustomEvent("wordUpdated",{detail:a});return window.dispatchEvent(s),setTimeout(()=>{const e=new CustomEvent("wordUpdated",{detail:a});window.dispatchEvent(e)},200),a},m=()=>{var e;null==(e=i.value)||e.resetFields(),Object.assign(c,{word:"",phonetic:"",partOfSpeech:"",meaning:"",example:"",tags:"",synonyms:"",date:(new Date).toISOString().split("T")[0]})},w=e=>{const a=e.detail;a&&(c.word=a.word||"",c.phonetic=a.phonetic||"",c.partOfSpeech=a.partOfSpeech||"",c.meaning=a.meaning||"",c.example=a.example||"",c.tags=Array.isArray(a.tags)?a.tags.join(", "):a.tags||"",c.synonyms=a.synonyms||"",c.date=a.date||(new Date).toISOString().split("T")[0],$.info({message:"正在编辑单词，请修改后保存",duration:2e3,showClose:!0}),t("switch-tab","add"))},y=()=>{};return g(()=>{window.addEventListener("resize",y),window.addEventListener("edit-word",w)}),f(()=>{window.removeEventListener("resize",y),window.removeEventListener("edit-word",w)}),d(()=>[c.word,c.meaning],([e,a])=>{}),{wordFormRef:i,wordForm:c,rules:{word:[{required:!0,message:"请输入单词",trigger:"blur"},{pattern:/^[\w\s\-\']+$/,message:"单词不能包含中文字符或特殊字符",trigger:"blur"}],meaning:[{required:!0,message:"请输入中文意思",trigger:"blur"}],date:[{required:!0,message:"请选择日期",trigger:"change"}]},submitting:n,quickAddText:r,recentAddedWords:o,todayAddedCount:u,wordStore:l,handleWordInput:()=>{c.word=c.word.toLowerCase()},submitForm:()=>{var e;null==(e=i.value)||e.validate(async e=>{if(e){if(p(c.word))return void $.warning("该单词已存在，请检查是否拼写错误或尝试添加其他单词");n.value=!0;try{await h(),$.success({message:"单词添加成功！",duration:2e3,showClose:!0}),m()}catch(a){$.error("添加单词失败，请重试")}finally{n.value=!1}}})},resetForm:m,quickAdd:async()=>{if(!r.value.trim())return void $.warning("请输入单词和释义");const e=r.value.trim().split("-");if(e.length<2)return void $.warning("格式错误，请使用：单词-释义");const a=e[0].trim(),t=e.slice(1).join("-").trim();if(a&&t){if(p(a))return $.warning("该单词已存在"),void(r.value="");n.value=!0;try{c.word=a,c.meaning=t,await h(),$.success({message:"快速添加成功！",duration:1500,showClose:!0}),r.value="";const e=c.date;m(),c.date=e}catch(s){$.error("添加失败，请重试")}finally{n.value=!1}}else $.warning("单词和释义不能为空")},removeRecentWord:e=>{o.value.splice(e,1)},handleEditWord:w}}},[["render",function(e,a,t,s,l,i){const n=k("el-input"),r=k("el-form-item"),o=k("el-col"),d=k("el-option"),c=k("el-select"),u=k("el-row"),v=k("el-date-picker"),p=k("el-button"),h=k("el-form"),g=k("el-card"),f=k("el-tag");return C(),m("div",$e,[a[18]||(a[18]=w("div",{class:"background-decoration"},[w("div",{class:"bg-circle bg-circle-1"}),w("div",{class:"bg-circle bg-circle-2"}),w("div",{class:"bg-gradient"})],-1)),w("div",Ye,[y(g,{class:"add-word-card gradient-card"},{header:b(()=>[...a[10]||(a[10]=[w("div",{class:"card-header"},[w("div",{class:"header-icon"},[w("i",{class:"fas fa-plus-circle"})]),w("h2",{class:"gradient-text"},"添加单词")],-1)])]),default:b(()=>[y(h,{ref:"wordFormRef",model:s.wordForm,rules:s.rules,"label-width":"100px",class:"word-form",onSubmit:a[8]||(a[8]=S(()=>{},["prevent"]))},{default:b(()=>[w("div",He,[a[11]||(a[11]=w("h3",{class:"section-title"},"基础信息",-1)),y(u,{gutter:16},{default:b(()=>[y(o,{xs:24,sm:12,md:6},{default:b(()=>[y(r,{label:"英语单词",prop:"word"},{default:b(()=>[y(n,{modelValue:s.wordForm.word,"onUpdate:modelValue":a[0]||(a[0]=e=>s.wordForm.word=e),placeholder:"请输入单词",class:"form-input",clearable:"",onInput:s.handleWordInput},null,8,["modelValue","onInput"])]),_:1})]),_:1}),y(o,{xs:24,sm:12,md:6},{default:b(()=>[y(r,{label:"音标",prop:"phonetic"},{default:b(()=>[y(n,{modelValue:s.wordForm.phonetic,"onUpdate:modelValue":a[1]||(a[1]=e=>s.wordForm.phonetic=e),placeholder:"例如: /wɜːd/",class:"form-input",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),y(o,{xs:24,sm:12,md:6},{default:b(()=>[y(r,{label:"词性",prop:"partOfSpeech"},{default:b(()=>[y(c,{modelValue:s.wordForm.partOfSpeech,"onUpdate:modelValue":a[2]||(a[2]=e=>s.wordForm.partOfSpeech=e),placeholder:"请选择词性",class:"form-select",clearable:""},{default:b(()=>[y(d,{label:"名词",value:"n."}),y(d,{label:"动词",value:"v."}),y(d,{label:"形容词",value:"adj."}),y(d,{label:"副词",value:"adv."}),y(d,{label:"介词",value:"prep."}),y(d,{label:"连词",value:"conj."}),y(d,{label:"代词",value:"pron."}),y(d,{label:"数词",value:"num."}),y(d,{label:"感叹词",value:"interj."}),y(d,{label:"其他",value:"other"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),y(o,{xs:24,sm:12,md:6},{default:b(()=>[y(r,{label:"同义词/反义词",prop:"synonyms"},{default:b(()=>[y(n,{modelValue:s.wordForm.synonyms,"onUpdate:modelValue":a[3]||(a[3]=e=>s.wordForm.synonyms=e),placeholder:"用逗号分隔",class:"form-input",clearable:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),y(u,{gutter:16},{default:b(()=>[y(o,{xs:24,md:12},{default:b(()=>[y(r,{label:"中文意思",prop:"meaning"},{default:b(()=>[y(n,{modelValue:s.wordForm.meaning,"onUpdate:modelValue":a[4]||(a[4]=e=>s.wordForm.meaning=e),type:"textarea",rows:2,placeholder:"请输入中文意思",class:"form-textarea",resize:"vertical"},null,8,["modelValue"])]),_:1})]),_:1}),y(o,{xs:24,md:12},{default:b(()=>[y(r,{label:"例句",prop:"example"},{default:b(()=>[y(n,{modelValue:s.wordForm.example,"onUpdate:modelValue":a[5]||(a[5]=e=>s.wordForm.example=e),type:"textarea",rows:2,placeholder:"请输入例句",class:"form-textarea",resize:"vertical"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),w("div",Je,[a[12]||(a[12]=w("h3",{class:"section-title"},"扩展信息",-1)),y(u,{gutter:16},{default:b(()=>[y(o,{xs:24,sm:12},{default:b(()=>[y(r,{label:"标签",prop:"tags"},{default:b(()=>[y(n,{modelValue:s.wordForm.tags,"onUpdate:modelValue":a[6]||(a[6]=e=>s.wordForm.tags=e),placeholder:"用逗号分隔，例如：常用, 商务",class:"form-input",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),y(o,{xs:24,sm:12},{default:b(()=>[y(r,{label:"日期",prop:"date"},{default:b(()=>[y(v,{modelValue:s.wordForm.date,"onUpdate:modelValue":a[7]||(a[7]=e=>s.wordForm.date=e),type:"date",placeholder:"选择日期","value-format":"YYYY-MM-DD",class:"form-datepicker"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),w("div",Qe,[y(p,{onClick:s.resetForm,loading:s.submitting,class:"clear-btn"},{default:b(()=>[...a[13]||(a[13]=[w("i",{class:"fas fa-redo"},null,-1),D(" 重置 ",-1)])]),_:1},8,["onClick","loading"]),y(p,{onClick:s.submitForm,loading:s.submitting,class:"search-btn"},{default:b(()=>[...a[14]||(a[14]=[w("i",{class:"fas fa-save"},null,-1),D(" 保存单词 ",-1)])]),_:1},8,["onClick","loading"])])]),_:1},8,["model","rules"])]),_:1}),y(g,{class:"quick-add-card gradient-card"},{header:b(()=>[...a[15]||(a[15]=[w("div",{class:"card-header"},[w("div",{class:"header-icon"},[w("i",{class:"fas fa-bolt"})]),w("h2",{class:"gradient-text"},"快速添加")],-1)])]),default:b(()=>[w("div",Ke,[y(n,{modelValue:s.quickAddText,"onUpdate:modelValue":a[9]||(a[9]=e=>s.quickAddText=e),placeholder:"格式：单词-释义，例如：apple-苹果",class:"form-input quick-add-input",clearable:"",onKeyup:T(s.quickAdd,["enter"]),"show-word-limit":"",maxlength:"100"},null,8,["modelValue","onKeyup"]),y(p,{onClick:s.quickAdd,loading:s.submitting,class:"quick-add-btn"},{default:b(()=>[...a[16]||(a[16]=[w("i",{class:"fas fa-plus"},null,-1),D(" 快速添加 ",-1)])]),_:1},8,["onClick","loading"])]),s.recentAddedWords.length>0?(C(),m("div",Ze,[a[17]||(a[17]=w("h4",null,"最近添加：",-1)),w("div",Ge,[(C(!0),m(M,null,W(s.recentAddedWords,(e,a)=>(C(),_(f,{key:a,closable:!0,effect:"plain",class:"recent-word-tag",onClose:e=>s.removeRecentWord(a)},{default:b(()=>[D(O(e),1)]),_:2},1032,["onClose"]))),128))])])):x("",!0)]),_:1})])])}],["__scopeId","data-v-5ff2bb4e"]]),ea={class:"view-words-container"},aa={class:"top-bar"},ta={class:"date-section"},sa={class:"date-controls"},la={class:"stats-section"},ia={class:"stat-card"},na={class:"stat-number"},ra={class:"stat-card"},oa={class:"stat-number"},da={class:"words-list"},ca={key:0,class:"loading-container"},ua={key:1,class:"empty-state"},va={class:"empty-content"},pa={class:"empty-title"},ha={class:"empty-description"},ga={key:2,class:"words-grid"},fa={class:"word-card-header"},ma={class:"word-main"},wa={class:"word-title"},ya={class:"word-text"},ba={key:0,class:"word-pronunciation"},ka={class:"word-actions"},Ca={class:"word-card-body"},Sa={class:"word-meaning-section"},Da={class:"word-meaning"},xa={key:0,class:"word-example-section"},Ta={class:"word-example"},Ma={class:"word-card-footer"},Wa={class:"word-date-info"},_a={class:"delete-dialog-content"},Oa={class:"delete-message"},La={class:"delete-dialog-footer"};const Va=Ne({name:"ViewWords",components:{Loading:K,Edit:Q,Delete:J,RefreshLeft:H,Plus:Y},emits:["edit-word","data-updated","switch-to-add"],setup(e,{emit:t}){const s=Re(),l=a(!1),i=a(""),n=a(!1),r=a(null),o=a(!1),d=v(()=>s.words||[]),c=v(()=>{let e=[...d.value];return i.value&&(e=e.filter(e=>u(e.date||e.createdAt)===i.value)),e.sort((e,a)=>{const t=new Date(e.date||e.createdAt);return new Date(a.date||a.createdAt)-t}),e}),u=e=>{if(!e)return"";try{const a=new Date(e);if(isNaN(a.getTime()))return e;const t=a.getFullYear(),s=String(a.getMonth()+1).padStart(2,"0");return`${t}-${s}-${String(a.getDate()).padStart(2,"0")}`}catch(a){return e}};return g(async()=>{await(async()=>{l.value=!0;try{s.initialized||await s.initialize(),await s.loadFromDB()}catch(e){}finally{l.value=!1}})()}),{loading:l,selectedDate:i,deleteDialogVisible:n,currentWordToDelete:r,deleting:o,allWords:d,filteredWords:c,formatDate:e=>{if(!e)return"未知日期";try{const a=new Date(e);if(isNaN(a.getTime()))return e;const t=a.getFullYear(),s=String(a.getMonth()+1).padStart(2,"0");return`${t}年${s}月${String(a.getDate()).padStart(2,"0")}日`}catch(a){return e}},loadWordsForDate:async()=>{},clearDateFilter:()=>{i.value=""},editWord:e=>{t("edit-word",e)},confirmDelete:e=>{r.value=e,n.value=!0},cancelDelete:()=>{n.value=!1,r.value=null},deleteWord:async()=>{if(r.value){o.value=!0;try{await s.deleteWord(r.value.id),t("data-updated"),n.value=!1,r.value=null}catch(e){}finally{o.value=!1}}}}}},[["render",function(e,a,t,s,l,i){const n=k("el-date-picker"),r=k("el-button"),o=k("el-dialog");return C(),m("div",ea,[a[19]||(a[19]=w("div",{class:"page-header"},[w("div",{class:"header-content"},[w("h1",{class:"page-title"},"单词记录"),w("p",{class:"page-subtitle"},"查看和管理你的英语单词")])],-1)),w("div",aa,[w("div",ta,[a[5]||(a[5]=w("div",{class:"section-title"},"日期筛选",-1)),w("div",sa,[y(n,{modelValue:s.selectedDate,"onUpdate:modelValue":a[0]||(a[0]=e=>s.selectedDate=e),type:"date",placeholder:"选择日期",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD",onChange:s.loadWordsForDate,clearable:"",size:"default",class:"custom-date-picker"},null,8,["modelValue","onChange"]),s.selectedDate?(C(),_(r,{key:0,onClick:s.clearDateFilter,size:"default",class:"clear-btn",icon:"RefreshLeft"},{default:b(()=>[...a[4]||(a[4]=[D(" 清除 ",-1)])]),_:1},8,["onClick"])):x("",!0)])]),w("div",la,[w("div",ia,[w("div",na,O(s.filteredWords.length),1),a[6]||(a[6]=w("div",{class:"stat-label"},"当前显示",-1))]),w("div",ra,[w("div",oa,O(s.allWords.length),1),a[7]||(a[7]=w("div",{class:"stat-label"},"总计",-1))])])]),w("div",da,[s.loading?(C(),m("div",ca,[...a[8]||(a[8]=[w("div",{class:"loading-text"},"加载中...",-1),w("div",{class:"loading-subtitle"},"请稍候",-1)])])):0===s.filteredWords.length?(C(),m("div",ua,[w("div",va,[w("h3",pa,O(s.selectedDate?`${s.selectedDate} 暂无单词`:"暂无单词记录"),1),w("p",ha,O(s.selectedDate?"选择其他日期或添加新单词":"开始添加你的第一个单词"),1),y(r,{type:"primary",onClick:a[1]||(a[1]=a=>e.$emit("switch-to-add")),size:"default",class:"add-word-btn",icon:"Plus"},{default:b(()=>[...a[9]||(a[9]=[D(" 添加单词 ",-1)])]),_:1})])])):(C(),m("div",ga,[(C(!0),m(M,null,W(s.filteredWords,(t,l)=>(C(),m("div",{key:t.id,class:"word-card",style:L({animationDelay:.1*l+"s"})},[w("div",fa,[w("div",ma,[w("div",wa,[w("span",ya,O(t.word),1),a[10]||(a[10]=w("div",{class:"word-badge"},"新",-1))]),t.pronunciation?(C(),m("div",ba,O(t.pronunciation),1)):x("",!0)]),w("div",ka,[y(r,{size:"small",onClick:e=>s.editWord(t),type:"primary",icon:e.Edit,circle:"",class:"action-btn edit-btn",title:"编辑单词"},null,8,["onClick","icon"]),y(r,{size:"small",onClick:e=>s.confirmDelete(t),type:"danger",icon:e.Delete,circle:"",class:"action-btn delete-btn",title:"删除单词"},null,8,["onClick","icon"])])]),w("div",Ca,[w("div",Sa,[a[11]||(a[11]=w("div",{class:"section-label"},"释义",-1)),w("div",Da,O(t.meaning),1)]),t.example?(C(),m("div",xa,[a[12]||(a[12]=w("div",{class:"section-label"},"例句",-1)),w("div",Ta,O(t.example),1)])):x("",!0)]),w("div",Ma,[w("div",Wa,O(s.formatDate(t.date||t.createdAt)),1)])],4))),128))]))]),y(o,{modelValue:s.deleteDialogVisible,"onUpdate:modelValue":a[3]||(a[3]=e=>s.deleteDialogVisible=e),title:"删除单词",width:"400px",class:"delete-dialog"},{footer:b(()=>[w("div",La,[y(r,{onClick:a[2]||(a[2]=e=>s.deleteDialogVisible=!1),class:"cancel-btn"},{default:b(()=>[...a[17]||(a[17]=[D(" 取消 ",-1)])]),_:1}),y(r,{type:"danger",onClick:s.deleteWord,class:"confirm-delete-btn",loading:s.deleting},{default:b(()=>[...a[18]||(a[18]=[D(" 删除 ",-1)])]),_:1},8,["onClick","loading"])])]),default:b(()=>{var t;return[w("div",_a,[a[15]||(a[15]=w("h3",{class:"delete-title"},"确认删除",-1)),w("p",Oa,[a[13]||(a[13]=D(' 确定要删除单词 "',-1)),w("strong",null,O(null==(t=e.wordToDelete)?void 0:t.word),1),a[14]||(a[14]=D('" 吗？ ',-1))]),a[16]||(a[16]=w("p",{class:"delete-warning-text"},"此操作不可恢复",-1))])]}),_:1},8,["modelValue"])])}],["__scopeId","data-v-5ddef20f"]]),Fa={class:"search-words-container"},Ia={class:"app-header"},za={class:"header-content"},Aa={class:"header-left"},Ea={class:"header-stats"},Pa={class:"stat-item"},ja={class:"stat-value"},Ua={class:"stat-item"},Ba={class:"stat-value"},Ra={class:"header-actions"},qa={class:"main-content"},Na={class:"search-section"},$a={class:"search-container"},Ya={class:"search-input-wrapper"},Ha={key:0,class:"search-suggestions"},Ja=["onClick"],Qa={class:"suggestion-text"},Ka={class:"suggestion-type"},Za={class:"quick-filters"},Ga=["onClick"],Xa={key:0,class:"filter-count"},et={key:0,class:"advanced-filters"},at={class:"filters-grid"},tt={class:"filter-group"},st={class:"filter-options"},lt=["onClick"],it={key:0,class:"filter-group"},nt={class:"tag-grid"},rt=["onClick"],ot={class:"filter-group"},dt={class:"filter-group"},ct={class:"sort-options"},ut=["onClick"],vt={class:"filter-actions"},pt={class:"results-section"},ht={class:"results-header"},gt={class:"results-info"},ft={key:0,class:"results-title"},mt={class:"results-count"},wt={key:1,class:"results-title"},yt={class:"results-actions"},bt={class:"view-switcher"},kt={class:"words-container"},Ct={key:0,class:"loading-state"},St={class:"loading-cards"},Dt={key:1,class:"empty-state"},xt={class:"empty-actions"},Tt=["onClick"],Mt=["checked","onChange"],Wt={class:"card-content"},_t={class:"card-header"},Ot={class:"word-info"},Lt={class:"word-title"},Vt={key:0,class:"word-phonetic"},Ft={class:"card-actions"},It=["onClick"],zt=["onClick","title"],At=["onClick"],Et={class:"card-body"},Pt={class:"word-meta"},jt={key:0,class:"part-of-speech"},Ut={class:"word-date"},Bt={class:"word-meaning"},Rt={key:0,class:"word-tags"},qt={key:0,class:"more-tags"},Nt={key:0,class:"card-details"},$t={key:0,class:"detail-item"},Yt={key:1,class:"detail-item"},Ht={class:"detail-actions"},Jt=["onClick"],Qt=["onClick"],Kt={key:3,class:"pagination"},Zt={class:"pagination-info"},Gt={class:"pagination-controls"},Xt=["disabled"],es={class:"page-numbers"},as=["onClick"],ts=["disabled"],ss={key:0,class:"batch-bar"},ls={class:"batch-content"},is={class:"batch-info"},ns={class:"batch-actions"},rs={class:"modal-header"},os={class:"modal-body"},ds={class:"modal-footer"},cs=["disabled"];const us=Ne({name:"SearchWords",emits:["words-updated"],setup(e,{emit:t}){const l=a([]),i=a(!1),n=a(!1),r=a(null),o=a([]),d=a([]),c=s({keyword:"",filter:"all",sort:"default"}),u=s({partOfSpeech:"",dateRange:[],selectedTags:[]}),p=a(!0),h=a(1),m=a(24),w=a(!1),y=a(null),b=a(!1),k=a("grid"),C=a(!1),S=a(!1),D=a(!1),x=a(null),T=a({x:0,y:0}),M=a(!1),W=a([]),_=a(!1);let O=null;const L=v(()=>""!==c.keyword.trim()),V=v(()=>{let e=[...l.value];if(L.value){const a=c.keyword.toLowerCase();e=e.filter(e=>e.word.toLowerCase().includes(a)||e.meaning.toLowerCase().includes(a)||e.tags&&e.tags.some(e=>e.toLowerCase().includes(a)))}if("recent"===c.filter?e=e.slice(0,20):"favorites"===c.filter?e=e.filter(e=>e.isFavorite):"difficult"===c.filter&&(e=e.filter(e=>e.difficulty>=3)),u.partOfSpeech&&(e=e.filter(e=>e.partOfSpeech===u.partOfSpeech)),u.selectedTags.length>0&&(e=e.filter(e=>u.selectedTags.some(a=>e.tags.includes(a)))),u.dateRange&&2===u.dateRange.length){const[a,t]=u.dateRange;e=e.filter(e=>{const s=e.date.split(" ")[0];return s>=a&&s<=t})}return e.sort((e,a)=>{switch(c.sort){case"date":return new Date(a.date)-new Date(e.date);case"word":return e.word.localeCompare(a.word);case"difficulty":return(a.difficulty||0)-(e.difficulty||0);default:return 0}}),e}),F=v(()=>{const e=(h.value-1)*m.value,a=e+m.value;return V.value.slice(e,a)}),I=v(()=>{const e={};return l.value.forEach(a=>{a.tags&&a.tags.length&&a.tags.forEach(a=>{e[a]=(e[a]||0)+1})}),Object.entries(e).sort(([,e],[,a])=>a-e).slice(0,10).map(([e])=>e)}),z=v(()=>Math.ceil(V.value.length/m.value)),A=v(()=>{const e=z.value,a=h.value,t=[],s=[];for(let l=Math.max(2,a-2);l<=Math.min(e-1,a+2);l++)t.push(l);return a-2>2?s.push(1,"..."):s.push(1),s.push(...t),a+2<e-1?s.push("...",e):s.push(e),s.filter(e=>"..."!==e||s.length>1)}),E=v(()=>{let e=0;return"all"!==c.filter&&e++,u.partOfSpeech&&e++,u.dateRange&&2===u.dateRange.length&&e++,u.selectedTags.length>0&&e++,e}),P=v(()=>E.value>0),j=v(()=>{const e=new Date;return e.setDate(e.getDate()-7),l.value.filter(a=>new Date(a.date)>=e).length}),U=v(()=>Math.floor(.3*l.value.length)),B=()=>{const e=localStorage.getItem("dailyEnglishWords");l.value=e?JSON.parse(e):[]},R=async()=>{n.value=!0,await new Promise(e=>setTimeout(e,300)),L.value=!0,h.value=1,n.value=!1},q=e=>{r.value=r.value===e?null:e},N=e=>{const a=o.value.indexOf(e);a>-1?o.value.splice(a,1):o.value.push(e)},Y=()=>{o.value=[]},H=()=>{localStorage.setItem("dailyEnglishWords",JSON.stringify(l.value)),t("words-updated",l.value)},J=e=>{if(!e.trim())return void(W.value=[]);const a=l.value.filter(a=>a.word.toLowerCase().includes(e.toLowerCase())||a.meaning.toLowerCase().includes(e.toLowerCase())).slice(0,5).map(e=>({word:e.word,type:e.partOfSpeech||"unknown",meaning:e.meaning.substring(0,50)+(e.meaning.length>50?"...":"")}));W.value=a};return g(()=>{B(),R()}),f(()=>{O&&clearTimeout(O)}),{searchForm:c,advancedFilters:u,words:l,filteredWords:V,displayWords:F,popularTags:I,loading:i,searching:n,hasSearch:L,showSidebar:p,currentPage:h,pageSize:m,totalPages:z,visiblePages:A,activeFilterCount:E,hasActiveFilters:P,deleteDialogVisible:w,currentWordToDelete:y,deleting:b,expandedWords:d,showAdvancedFilters:_,showBatchMode:C,showAddWordModal:S,selectedWordId:r,selectedWords:o,viewMode:k,showWordMenu:(e,a)=>{x.value=e,T.value={x:a.clientX,y:a.clientY},D.value=!0},currentWordMenu:x,menuPosition:T,showSearchSuggestions:M,searchSuggestions:W,searchOptions:[{label:"全部",value:"all"},{label:"单词",value:"word"},{label:"释义",value:"meaning"},{label:"标签",value:"tag"}],partOfSpeechOptions:[{label:"名词",value:"n."},{label:"动词",value:"v."},{label:"形容词",value:"adj."},{label:"副词",value:"adv."},{label:"介词",value:"prep."},{label:"连词",value:"conj."},{label:"代词",value:"pron."},{label:"数词",value:"num."},{label:"感叹词",value:"interj."}],sortOptions:[{label:"默认",value:"default"},{label:"按添加日期",value:"date"},{label:"按字母顺序",value:"alphabet"}],quickFilters:[{key:"all",label:"全部"},{key:"word",label:"仅单词"},{key:"meaning",label:"仅释义"},{key:"tag",label:"仅标签"}],weeklyNewWords:j,masteredWords:U,loadWords:B,handleSearch:R,clearSearch:()=>{c.keyword="",c.filter="all",c.sort="default",u.partOfSpeech="",u.dateRange=[],u.selectedTags=[],R()},clearKeyword:()=>{c.keyword="",R()},setQuickFilter:e=>{c.filter=e,R()},setSortOption:e=>{c.sort=e,R()},togglePartOfSpeech:e=>{u.partOfSpeech=u.partOfSpeech===e?"":e,R()},toggleTag:e=>{const a=u.selectedTags.indexOf(e);a>-1?u.selectedTags.splice(a,1):u.selectedTags.push(e),R()},clearAllFilters:()=>{c.filter="all",u.partOfSpeech="",u.dateRange=[],u.selectedTags=[],R()},toggleAdvancedFilters:()=>{_.value=!_.value},handleWordClick:(e,a)=>{C.value?N(e.id):q(e.id)},selectWord:q,isSelectedWord:e=>r.value===e,toggleWordSelection:N,selectAllWords:()=>{o.value=[...F.value.map(e=>e.id)]},clearSelection:Y,toggleBatchMode:()=>{C.value=!C.value,C.value||Y()},batchDelete:async()=>{if(0!==o.value.length)try{await Z.confirm(`确定要删除选中的 ${o.value.length} 个单词吗？此操作不可恢复。`,"批量删除确认",{confirmButtonText:"确定删除",cancelButtonText:"取消",type:"warning"}),b.value=!0,await new Promise(e=>setTimeout(e,800)),l.value=l.value.filter(e=>!o.value.includes(e.id)),Y(),H(),$.success(`成功删除 ${o.value.length} 个单词`)}catch(e){"cancel"!==e&&$.error("批量删除失败")}finally{b.value=!1}else $.warning("请先选择要删除的单词")},exportSelected:()=>{if(0===o.value.length)return;const e=l.value.filter(e=>o.value.includes(e.id)),a=JSON.stringify(e,null,2),t=new Blob([a],{type:"application/json"}),s=URL.createObjectURL(t),i=document.createElement("a");i.href=s,i.download=`words_${(new Date).toISOString().split("T")[0]}.json`,i.click(),URL.revokeObjectURL(s),$.success("导出成功")},showWordMenu:D,hideWordMenu:()=>{D.value=!1,x.value=null},editWord:e=>{$.info("编辑功能开发中...")},toggleWordDetail:e=>{const a=d.value.indexOf(e);a>-1?d.value.splice(a,1):d.value.push(e)},pronounceWord:e=>{if("speechSynthesis"in window){const a=new SpeechSynthesisUtterance(e);a.lang="en-US",a.rate=.8,speechSynthesis.speak(a)}else $.warning("您的浏览器不支持语音合成")},confirmDelete:e=>{y.value=e,w.value=!0},deleteWord:async()=>{if(y.value){b.value=!0;try{await new Promise(e=>setTimeout(e,500));const e=y.value.id;l.value=l.value.filter(a=>a.id!==e),w.value=!1,y.value=null,H(),$.success("删除成功")}catch(e){$.error("删除失败")}finally{b.value=!1}}},saveWords:H,formatDate:e=>new Date(e).toLocaleDateString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit"}),prevPage:()=>{h.value>1&&h.value--},nextPage:()=>{h.value<z.value&&h.value++},goToPage:e=>{e>=1&&e<=z.value&&(h.value=e)},generateSearchSuggestions:J,selectSuggestion:e=>{c.keyword=e.word,M.value=!1,R()},hideSearchSuggestions:()=>{setTimeout(()=>{M.value=!1},200)},debouncedSearch:()=>{clearTimeout(O),O=setTimeout(()=>{J(c.keyword),R()},300)},handleSizeChange:e=>{m.value=e,h.value=1},handleCurrentChange:e=>{h.value=e},closeWordMenu:()=>{D.value=!1,x.value=null}}}},[["render",function(e,a,t,s,l,i){var n;const r=k("el-date-picker");return C(),m("div",Fa,[w("header",Ia,[w("div",za,[w("div",Aa,[a[31]||(a[31]=V('<h1 class="app-title" data-v-2dd90c28><svg width="32" height="32" viewBox="0 0 24 24" fill="none" class="app-icon" data-v-2dd90c28><path d="M12 2L2 7L12 12L22 7L12 2Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-2dd90c28></path><path d="M2 17L12 22L22 17" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-2dd90c28></path><path d="M2 12L12 17L22 12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-2dd90c28></path></svg> 每日英语 </h1>',1)),w("div",Ea,[w("div",Pa,[w("span",ja,O(s.words.length),1),a[29]||(a[29]=w("span",{class:"stat-label"},"总单词",-1))]),w("div",Ua,[w("span",Ba,O(s.weeklyNewWords),1),a[30]||(a[30]=w("span",{class:"stat-label"},"本周新增",-1))])])]),w("div",Ra,[w("button",{class:"btn btn-primary",onClick:a[0]||(a[0]=e=>s.showAddWordModal=!0)},[...a[32]||(a[32]=[w("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none"},[w("path",{d:"M12 5V19M5 12H19",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),D(" 添加单词 ",-1)])])])])]),w("main",qa,[w("section",Na,[w("div",$a,[w("div",Ya,[a[34]||(a[34]=w("svg",{class:"search-icon",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none"},[w("path",{d:"M21 21L15.5 15.5M17 10C17 13.866 13.866 17 10 17C6.13401 17 3 13.866 3 10C3 6.13401 6.13401 3 10 3C13.866 3 17 6.13401 17 10Z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),F(w("input",{"onUpdate:modelValue":a[1]||(a[1]=e=>s.searchForm.keyword=e),placeholder:"搜索单词、释义或标签...",class:"search-input",onInput:a[2]||(a[2]=(...e)=>s.debouncedSearch&&s.debouncedSearch(...e)),onKeyup:a[3]||(a[3]=T((...e)=>s.handleSearch&&s.handleSearch(...e),["enter"])),onFocus:a[4]||(a[4]=e=>s.showSearchSuggestions=!0),onBlur:a[5]||(a[5]=(...e)=>s.hideSearchSuggestions&&s.hideSearchSuggestions(...e))},null,544),[[I,s.searchForm.keyword]]),s.searchForm.keyword?(C(),m("button",{key:0,class:"clear-btn",onClick:a[6]||(a[6]=(...e)=>s.clearKeyword&&s.clearKeyword(...e))},[...a[33]||(a[33]=[w("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none"},[w("path",{d:"M18 6L6 18M6 6L18 18",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round"})],-1)])])):x("",!0)]),s.showSearchSuggestions&&s.searchSuggestions.length?(C(),m("div",Ha,[(C(!0),m(M,null,W(s.searchSuggestions,(e,a)=>(C(),m("div",{key:a,class:"suggestion-item",onClick:a=>s.selectSuggestion(e)},[w("span",Qa,O(e.word),1),w("span",Ka,O(e.type),1)],8,Ja))),128))])):x("",!0)]),w("div",Za,[(C(!0),m(M,null,W(s.quickFilters,e=>(C(),m("button",{key:e.key,class:z(["filter-chip",{active:s.searchForm.filter===e.key}]),onClick:a=>s.setQuickFilter(e.key)},O(e.label),11,Ga))),128)),w("button",{class:z(["filter-chip filter-toggle",{active:s.showAdvancedFilters}]),onClick:a[7]||(a[7]=e=>s.showAdvancedFilters=!s.showAdvancedFilters)},[a[35]||(a[35]=w("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none"},[w("path",{d:"M22 3H2l8 9.46V19l4 2v-8.54L22 3z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),a[36]||(a[36]=D(" 高级筛选 ",-1)),s.activeFilterCount>0?(C(),m("span",Xa,O(s.activeFilterCount),1)):x("",!0)],2)])]),s.showAdvancedFilters?(C(),m("section",et,[w("div",at,[w("div",tt,[a[37]||(a[37]=w("h4",null,"词性",-1)),w("div",st,[(C(!0),m(M,null,W(s.partOfSpeechOptions,e=>(C(),m("button",{key:e.value,class:z(["filter-option",{active:s.advancedFilters.partOfSpeech===e.value}]),onClick:a=>s.togglePartOfSpeech(e.value)},O(e.label),11,lt))),128))])]),s.popularTags.length>0?(C(),m("div",it,[a[38]||(a[38]=w("h4",null,"标签",-1)),w("div",nt,[(C(!0),m(M,null,W(s.popularTags.slice(0,12),e=>(C(),m("button",{key:e,class:z(["tag-chip",{active:s.advancedFilters.selectedTags.includes(e)}]),onClick:a=>s.toggleTag(e)},O(e),11,rt))),128))])])):x("",!0),w("div",ot,[a[39]||(a[39]=w("h4",null,"添加时间",-1)),y(r,{modelValue:s.advancedFilters.dateRange,"onUpdate:modelValue":a[8]||(a[8]=e=>s.advancedFilters.dateRange=e),type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"YYYY-MM-DD",size:"small",onChange:s.handleSearch},null,8,["modelValue","onChange"])]),w("div",dt,[a[40]||(a[40]=w("h4",null,"排序",-1)),w("div",ct,[(C(!0),m(M,null,W(s.sortOptions,e=>(C(),m("button",{key:e.value,class:z(["sort-option",{active:s.searchForm.sort===e.value}]),onClick:a=>s.setSortOption(e.value)},O(e.label),11,ut))),128))])])]),w("div",vt,[s.hasActiveFilters?(C(),m("button",{key:0,class:"btn btn-secondary",onClick:a[9]||(a[9]=(...e)=>s.clearAllFilters&&s.clearAllFilters(...e))}," 清空筛选 ")):x("",!0)])])):x("",!0),w("section",pt,[w("div",ht,[w("div",gt,[s.hasSearch?(C(),m("h2",ft,[a[41]||(a[41]=D(" 搜索结果 ",-1)),w("span",mt,"("+O(s.filteredWords.length)+")",1)])):(C(),m("h2",wt,"所有单词"))]),w("div",yt,[w("div",bt,[w("button",{class:z(["view-btn",{active:"grid"===s.viewMode}]),onClick:a[10]||(a[10]=e=>s.viewMode="grid"),title:"网格视图"},[...a[42]||(a[42]=[V('<svg width="16" height="16" viewBox="0 0 24 24" fill="none" data-v-2dd90c28><rect x="3" y="3" width="7" height="7" stroke="currentColor" stroke-width="2" data-v-2dd90c28></rect><rect x="14" y="3" width="7" height="7" stroke="currentColor" stroke-width="2" data-v-2dd90c28></rect><rect x="3" y="14" width="7" height="7" stroke="currentColor" stroke-width="2" data-v-2dd90c28></rect><rect x="14" y="14" width="7" height="7" stroke="currentColor" stroke-width="2" data-v-2dd90c28></rect></svg>',1)])],2),w("button",{class:z(["view-btn",{active:"list"===s.viewMode}]),onClick:a[11]||(a[11]=e=>s.viewMode="list"),title:"列表视图"},[...a[43]||(a[43]=[w("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none"},[w("line",{x1:"3",y1:"6",x2:"21",y2:"6",stroke:"currentColor","stroke-width":"2"}),w("line",{x1:"3",y1:"12",x2:"21",y2:"12",stroke:"currentColor","stroke-width":"2"}),w("line",{x1:"3",y1:"18",x2:"21",y2:"18",stroke:"currentColor","stroke-width":"2"})],-1)])],2)]),w("button",{class:z(["btn btn-secondary",{active:s.showBatchMode}]),onClick:a[12]||(a[12]=e=>s.showBatchMode=!s.showBatchMode)},[...a[44]||(a[44]=[w("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none"},[w("path",{d:"M3 4h18M3 10h18M3 16h18",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round"})],-1),D(" 批量操作 ",-1)])],2)])]),w("div",kt,[s.searching?(C(),m("div",Ct,[w("div",St,[(C(),m(M,null,W(6,e=>w("div",{key:e,class:"skeleton-card"},[...a[45]||(a[45]=[V('<div class="skeleton-header" data-v-2dd90c28><div class="skeleton-title" data-v-2dd90c28></div><div class="skeleton-actions" data-v-2dd90c28></div></div><div class="skeleton-content" data-v-2dd90c28></div><div class="skeleton-tags" data-v-2dd90c28></div>',3)])])),64))])])):s.hasSearch&&0===s.filteredWords.length?(C(),m("div",Dt,[a[46]||(a[46]=w("div",{class:"empty-icon"},[w("svg",{width:"80",height:"80",viewBox:"0 0 24 24",fill:"none"},[w("path",{d:"M21 21L15.5 15.5M17 10C17 13.866 13.866 17 10 17C6.13401 17 3 13.866 3 10C3 6.13401 6.13401 3 10 3C13.866 3 17 6.13401 17 10Z",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round",opacity:"0.3"}),w("path",{d:"M9 9H11M9 13H11",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round"})])],-1)),a[47]||(a[47]=w("h3",null,"未找到匹配的单词",-1)),a[48]||(a[48]=w("p",null,"尝试调整搜索条件或检查拼写",-1)),w("div",xt,[w("button",{class:"btn btn-primary",onClick:a[13]||(a[13]=(...e)=>s.clearSearch&&s.clearSearch(...e))},"重置搜索"),w("button",{class:"btn btn-secondary",onClick:a[14]||(a[14]=e=>s.showAddWordModal=!0)},"添加新单词")])])):s.hasSearch?(C(),m("div",{key:2,class:z(["words-grid",s.viewMode])},[(C(!0),m(M,null,W(s.displayWords,(e,t)=>(C(),m("div",{key:e.id,class:z(["word-card",{expanded:s.expandedWords.includes(e.id),selected:s.isSelectedWord(e.id),"batch-selected":s.selectedWords.includes(e.id)}]),onClick:a=>s.handleWordClick(e,a)},[s.showBatchMode?(C(),m("div",{key:0,class:"batch-checkbox",onClick:a[15]||(a[15]=S(()=>{},["stop"]))},[w("input",{type:"checkbox",checked:s.selectedWords.includes(e.id),onChange:a=>s.toggleWordSelection(e.id)},null,40,Mt)])):x("",!0),w("div",Wt,[w("div",_t,[w("div",Ot,[w("h3",Lt,O(e.word),1),e.phonetic?(C(),m("div",Vt,O(e.phonetic),1)):x("",!0)]),w("div",Ft,[w("button",{class:"action-btn",onClick:S(a=>s.pronounceWord(e.word),["stop"]),title:"发音"},[...a[49]||(a[49]=[w("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none"},[w("path",{d:"M3 9V15H7L12 20V4L7 9H3Z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),w("path",{d:"M16 9.5C16.5 10.5 16.5 11.5 16 12.5M19 6C20.5 8 20.5 12 19 14",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])],8,It),w("button",{class:"action-btn",onClick:S(a=>s.toggleWordDetail(e.id),["stop"]),title:s.expandedWords.includes(e.id)?"收起":"展开"},[...a[50]||(a[50]=[w("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none"},[w("path",{d:"M19 9L12 16L5 9",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])],8,zt),w("button",{class:"action-btn",onClick:S(a=>s.showWordMenu(e,a),["stop"]),title:"更多操作"},[...a[51]||(a[51]=[w("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none"},[w("circle",{cx:"12",cy:"5",r:"1",stroke:"currentColor","stroke-width":"2"}),w("circle",{cx:"12",cy:"12",r:"1",stroke:"currentColor","stroke-width":"2"}),w("circle",{cx:"12",cy:"19",r:"1",stroke:"currentColor","stroke-width":"2"})],-1)])],8,At)])]),w("div",Et,[w("div",Pt,[e.partOfSpeech?(C(),m("span",jt,O(e.partOfSpeech),1)):x("",!0),w("span",Ut,O(s.formatDate(e.date)),1)]),w("p",Bt,O(e.meaning),1),e.tags&&e.tags.length?(C(),m("div",Rt,[(C(!0),m(M,null,W(e.tags.slice(0,3),e=>(C(),m("span",{key:e,class:"tag"},O(e),1))),128)),e.tags.length>3?(C(),m("span",qt,"+"+O(e.tags.length-3),1)):x("",!0)])):x("",!0)]),y(E,{name:"expand"},{default:b(()=>[s.expandedWords.includes(e.id)?(C(),m("div",Nt,[e.example?(C(),m("div",$t,[a[52]||(a[52]=w("h4",null,"例句",-1)),w("p",null,O(e.example),1)])):x("",!0),e.synonyms?(C(),m("div",Yt,[a[53]||(a[53]=w("h4",null,"同义词/反义词",-1)),w("p",null,O(e.synonyms),1)])):x("",!0),w("div",Ht,[w("button",{class:"btn btn-sm btn-secondary",onClick:S(a=>s.editWord(e),["stop"])},[...a[54]||(a[54]=[w("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none"},[w("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),w("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),D(" 编辑 ",-1)])],8,Jt),w("button",{class:"btn btn-sm btn-danger",onClick:S(a=>s.confirmDelete(e),["stop"])},[...a[55]||(a[55]=[w("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none"},[w("path",{d:"M3 6H5H21M8 6V4C8 3.44772 8.44772 3 9 3H15C15.5523 3 16 3.44772 16 4V6M19 6V20C19 20.5523 18.5523 21 18 21H6C5.44772 21 5 20.5523 5 20V6H19Z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),D(" 删除 ",-1)])],8,Qt)])])):x("",!0)]),_:2},1024)])],10,Tt))),128))],2)):x("",!0),s.hasSearch&&s.totalPages>1?(C(),m("div",Kt,[w("div",Zt,[w("span",null,"显示 "+O((s.currentPage-1)*s.pageSize+1)+"-"+O(Math.min(s.currentPage*s.pageSize,s.filteredWords.length))+" 共 "+O(s.filteredWords.length)+" 个单词",1),F(w("select",{"onUpdate:modelValue":a[16]||(a[16]=e=>s.pageSize=e),class:"page-size-select"},[...a[56]||(a[56]=[w("option",{value:12},"12/页",-1),w("option",{value:24},"24/页",-1),w("option",{value:48},"48/页",-1)])],512),[[A,s.pageSize]])]),w("div",Gt,[w("button",{class:"pagination-btn",onClick:a[17]||(a[17]=(...e)=>s.prevPage&&s.prevPage(...e)),disabled:1===s.currentPage},[...a[57]||(a[57]=[w("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none"},[w("path",{d:"M15 18L9 12L15 6",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])],8,Xt),w("div",es,[(C(!0),m(M,null,W(s.visiblePages,e=>(C(),m("button",{key:e,class:z(["pagination-btn page-number",{active:e===s.currentPage}]),onClick:a=>s.goToPage(e)},O(e),11,as))),128))]),w("button",{class:"pagination-btn",onClick:a[18]||(a[18]=(...e)=>s.nextPage&&s.nextPage(...e)),disabled:s.currentPage===s.totalPages},[...a[58]||(a[58]=[w("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none"},[w("path",{d:"M9 18L15 12L9 6",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])],8,ts)])])):x("",!0)])])]),s.showBatchMode&&s.selectedWords.length>0?(C(),m("div",ss,[w("div",ls,[w("div",is,[a[59]||(a[59]=D(" 已选择 ",-1)),w("strong",null,O(s.selectedWords.length),1),a[60]||(a[60]=D(" 个单词 ",-1))]),w("div",ns,[w("button",{class:"btn btn-secondary",onClick:a[19]||(a[19]=(...e)=>s.selectAllWords&&s.selectAllWords(...e))},"全选"),w("button",{class:"btn btn-secondary",onClick:a[20]||(a[20]=(...e)=>s.clearSelection&&s.clearSelection(...e))},"取消选择"),w("button",{class:"btn btn-danger",onClick:a[21]||(a[21]=(...e)=>s.batchDelete&&s.batchDelete(...e))},"批量删除"),w("button",{class:"btn btn-primary",onClick:a[22]||(a[22]=(...e)=>s.exportSelected&&s.exportSelected(...e))},"导出选中")])])])):x("",!0),s.deleteDialogVisible?(C(),m("div",{key:1,class:"modal-overlay",onClick:a[27]||(a[27]=e=>s.deleteDialogVisible=!1)},[w("div",{class:"modal",onClick:a[26]||(a[26]=S(()=>{},["stop"]))},[w("div",rs,[a[62]||(a[62]=w("h3",null,"确认删除",-1)),w("button",{class:"modal-close",onClick:a[23]||(a[23]=e=>s.deleteDialogVisible=!1)},[...a[61]||(a[61]=[w("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none"},[w("path",{d:"M18 6L6 18M6 6L18 18",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round"})],-1)])])]),w("div",os,[a[65]||(a[65]=w("div",{class:"modal-icon"},[w("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none"},[w("path",{d:"M12 9V13M12 17H12.01M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})])],-1)),w("p",null,[a[63]||(a[63]=D("确定要删除单词 ",-1)),w("strong",null,O(null==(n=s.currentWordToDelete)?void 0:n.word),1),a[64]||(a[64]=D(" 吗？",-1))]),a[66]||(a[66]=w("p",{class:"warning-text"},"此操作不可撤销",-1))]),w("div",ds,[w("button",{class:"btn btn-secondary",onClick:a[24]||(a[24]=e=>s.deleteDialogVisible=!1)},"取消"),w("button",{class:"btn btn-danger",onClick:a[25]||(a[25]=(...e)=>s.deleteWord&&s.deleteWord(...e)),disabled:s.deleting},O(s.deleting?"删除中...":"确定删除"),9,cs)])])])):x("",!0),w("button",{class:"fab",onClick:a[28]||(a[28]=e=>s.showAddWordModal=!0),title:"添加新单词"},[...a[67]||(a[67]=[w("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none"},[w("path",{d:"M12 5V19M5 12H19",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])])])}],["__scopeId","data-v-2dd90c28"]]),vs={class:"practice-words"},ps={class:"practice-header"},hs={key:0,class:"back-button"},gs={key:0,class:"mode-selection"},fs={class:"mode-cards"},ms={key:1,class:"practice-settings"},ws={class:"settings-group"},ys={class:"settings-group"},bs={class:"settings-group"},ks={class:"radio-group"},Cs={class:"settings-actions"},Ss=["disabled"],Ds={key:2,class:"loading-container"},xs={key:3,class:"flashcard-mode"},Ts={class:"progress-container"},Ms={class:"progress-bar"},Ws={class:"flashcard-container"},_s={class:"card-front"},Os={key:0},Ls={class:"card-back"},Vs={class:"definition"},Fs={key:0,class:"phonetic"},Is={key:1,class:"example"},zs={class:"flashcard-actions"},As={class:"navigation-buttons"},Es=["disabled"],Ps=["disabled"],js={key:4,class:"quiz-mode"},Us={class:"progress-container"},Bs={class:"progress-bar"},Rs={class:"quiz-question"},qs={class:"quiz-options"},Ns=["onClick"],$s={key:0,class:"quiz-result"},Ys={key:0,class:"correct-result"},Hs={key:1,class:"wrong-result"},Js={class:"quiz-actions"},Qs=["disabled"],Ks={key:5,class:"listening-mode"},Zs={class:"progress-container"},Gs={class:"progress-bar"},Xs={class:"listening-content"},el={class:"options"},al=["onClick"],tl={class:"listening-actions"},sl=["disabled"],ll={key:6,class:"practice-result"},il={class:"result-card"},nl={class:"result-stats"},rl={class:"stat-item"},ol={class:"stat-number"},dl={class:"stat-item"},cl={class:"stat-number"},ul={class:"stat-item"},vl={class:"stat-number"},pl={class:"result-actions"};const hl=Ne({name:"PracticeWords",setup(){const e=a("mode-selection"),t=a(""),s=a(0),l=a([]),i=a(!1);g(()=>{e.value="mode-selection",t.value="",s.value=0,l.value=[],i.value=!1});const n=a(!1),r=a([]),o=a([]),d=a(-1),c=a(!1),u=a(-1),p=a({wordCount:10,difficulty:"全部",wordRange:"all"}),h=a({correct:0,total:0,score:0}),f=v(()=>l.value[s.value]||{word:"",meaning:"",phonetic:"",example:""}),m=v(()=>0===l.value.length?0:(s.value+1)/l.value.length*100),w=e=>{const a=e.reviewCount||0;return e.mastered||a>=3?"简单":a>=1?"中等":"困难"},y=(e,a)=>"简单"===a?"简单"===e:"中等"!==a||["简单","中等"].includes(e),b=()=>{try{const a=localStorage.getItem("dailyEnglishWords");let s=[];try{s=a?JSON.parse(a):[],Array.isArray(s)||(s=[])}catch(e){s=[]}const l=f.value;if(!l||!l.word)return;if("quiz"===t.value){const e=[];l.meaning&&e.push(String(l.meaning));const a=[...s.filter(e=>e&&e.id!==l.id&&e.meaning&&String(e.meaning)!==String(l.meaning))].sort(()=>.5-Math.random());for(let t=0;t<Math.min(3,a.length);t++)e.push(String(a[t].meaning));for(;e.length<4;)e.push(`模拟选项 ${e.length+1}`);r.value=e.sort(()=>.5-Math.random())}else if("listening"===t.value){const e=[];l.word&&e.push(String(l.word));const a=[...s.filter(e=>e&&e.id!==l.id&&e.word&&String(e.word)!==String(l.word))].sort(()=>.5-Math.random());for(let s=0;s<Math.min(3,a.length);s++)e.push(String(a[s].word));for(;e.length<4;)e.push(`word${e.length+1}`);o.value=e.sort(()=>.5-Math.random());const t=String(l.word);u.value=o.value.findIndex(e=>String(e)===t)}}catch(a){if("quiz"===t.value){const e=f.value,a=(null==e?void 0:e.meaning)?[e.meaning,"选项2","选项3","选项4"]:["选项1","选项2","选项3","选项4"];r.value=a.sort(()=>.5-Math.random())}else if("listening"===t.value){const e=f.value,a=(null==e?void 0:e.word)?[e.word,"单词2","单词3","单词4"]:["单词1","单词2","单词3","单词4"];o.value=a.sort(()=>.5-Math.random()),u.value=o.value.findIndex(a=>a===(null==e?void 0:e.word))}}},k=()=>{h.value.score=l.value.length>0?Math.round(h.value.correct/h.value.total*100):0},C=()=>{e.value="mode-selection",t.value="",s.value=0,l.value=[],n.value=!1,d.value=-1,c.value=!1},S=v(()=>{if(!c.value||-1===d.value)return!1;if("quiz"===t.value){const e=f.value,a=r.value,t=d.value;if(e&&"object"==typeof e&&e.meaning&&a&&Array.isArray(a)&&t>=0&&t<a.length){const s=e=>e.replace(/\s+/g,"").toLowerCase(),l=String(a[t]).trim(),i=String(e.meaning).trim();if(l===i)return!0;return s(l)===s(i)}}else if("listening"===t.value)return void 0!==d.value&&void 0!==u.value&&d.value===u.value;return!1});return{currentStep:e,currentMode:t,currentIndex:s,practiceWords:l,loading:i,isFlipped:n,quizOptions:r,listeningOptions:o,selectedOption:d,showResult:c,correctOptionIndex:u,settings:p,results:h,currentWord:f,progressPercentage:m,isCorrect:S,selectMode:a=>{t.value=a,e.value="settings"},startPractice:async()=>{i.value=!0;try{const a=localStorage.getItem("dailyEnglishWords");let r=a?JSON.parse(a):[];if("today"===p.value.wordRange){const e=(new Date).toISOString().split("T")[0];r=r.filter(a=>a.date===e)}if(p.value.difficulty&&"全部"!==p.value.difficulty&&(r=r.filter(e=>{const a=e.difficulty||w(e);return y(a,p.value.difficulty)})),0===r.length)return $.warning("没有找到匹配条件的单词数据，请先添加单词"),void(i.value=!1);const o=[...r].sort(()=>.5-Math.random());l.value=o.slice(0,Math.min(p.value.wordCount,r.length)),h.value={correct:0,total:l.value.length,score:0},s.value=0,n.value=!1,d.value=-1,c.value=!1,"quiz"!==t.value&&"listening"!==t.value||b(),e.value=t.value}catch(a){$.error("准备练习内容失败")}finally{i.value=!1}},playSound:e=>{try{const a=new SpeechSynthesisUtterance(e);a.lang="en-US",window.speechSynthesis.speak(a)}catch(a){$.warning("无法播放发音，请检查浏览器权限")}},flipCard:()=>{n.value=!n.value},prevWord:()=>{s.value>0&&(s.value--,n.value=!1)},nextWord:()=>{s.value<l.value.length-1?(s.value++,n.value=!1):(k(),e.value="result")},selectOption:e=>{c.value||(d.value=e)},submitQuiz:()=>{if(-1!==d.value)if(c.value=!0,"quiz"===t.value){const e=f.value,a=r.value,t=d.value;if(e&&"object"==typeof e&&e.meaning&&a&&Array.isArray(a)&&t>=0&&t<a.length){const s=String(a[t]).trim(),l=String(e.meaning).trim();if(s===l)h.value.correct++;else{const e=e=>e.replace(/\s+/g,"").toLowerCase();e(s)===e(l)&&h.value.correct++}}}else"listening"===t.value&&void 0!==d.value&&void 0!==u.value&&d.value===u.value&&h.value.correct++},nextQuiz:()=>{s.value<l.value.length-1?(s.value++,d.value=-1,c.value=!1,b()):(k(),e.value="result")},restartPractice:()=>{e.value="settings"},backToModeSelection:C,goBack:()=>{"settings"===e.value?C():"flashcard"!==e.value&&"quiz"!==e.value&&"listening"!==e.value||(e.value="settings")},refreshPage:()=>{e.value="mode-selection",t.value="",s.value=0,l.value=[],i.value=!1,n.value=!1,d.value=-1,c.value=!1,u.value=-1,p.value={wordCount:10,difficulty:"全部",wordRange:"today"},h.value={correct:0,total:0,score:0}}}}},[["render",function(e,a,t,s,l,i){return C(),m("div",vs,[a[48]||(a[48]=w("div",{class:"bg-gradient"},null,-1)),a[49]||(a[49]=w("div",{class:"bg-circle"},null,-1)),a[50]||(a[50]=w("div",{class:"bg-circle"},null,-1)),w("div",ps,["mode-selection"!==s.currentStep?(C(),m("div",hs,[w("button",{onClick:a[0]||(a[0]=(...e)=>s.goBack&&s.goBack(...e)),class:"back-btn"},"返回")])):x("",!0),a[22]||(a[22]=w("h2",null,"单词练习",-1))]),"mode-selection"===s.currentStep?(C(),m("div",gs,[a[26]||(a[26]=w("div",{class:"mode-intro"},[w("h2",null,"选择练习模式"),w("p",null,"通过不同的方式来巩固你的单词记忆")],-1)),w("div",fs,[w("div",{class:"mode-card flashcard-mode-card",onClick:a[1]||(a[1]=e=>s.selectMode("flashcard"))},[...a[23]||(a[23]=[V('<div class="mode-icon" data-v-15f79fc3><i class="fas fa-layer-group" data-v-15f79fc3></i></div><div class="mode-content" data-v-15f79fc3><h3 data-v-15f79fc3>闪卡模式</h3><p data-v-15f79fc3>通过翻转卡片来记忆单词和释义</p></div><div class="mode-features" data-v-15f79fc3><span class="feature-tag" data-v-15f79fc3>视觉记忆</span><span class="feature-tag" data-v-15f79fc3>自主学习</span></div>',3)])]),w("div",{class:"mode-card quiz-mode-card",onClick:a[2]||(a[2]=e=>s.selectMode("quiz"))},[...a[24]||(a[24]=[V('<div class="mode-icon" data-v-15f79fc3><i class="fas fa-question-circle" data-v-15f79fc3></i></div><div class="mode-content" data-v-15f79fc3><h3 data-v-15f79fc3>测验模式</h3><p data-v-15f79fc3>通过选择题来测试你的掌握程度</p></div><div class="mode-features" data-v-15f79fc3><span class="feature-tag" data-v-15f79fc3>快速测试</span><span class="feature-tag" data-v-15f79fc3>即时反馈</span></div>',3)])]),w("div",{class:"mode-card listening-mode-card",onClick:a[3]||(a[3]=e=>s.selectMode("listening"))},[...a[25]||(a[25]=[V('<div class="mode-icon" data-v-15f79fc3><i class="fas fa-headphones" data-v-15f79fc3></i></div><div class="mode-content" data-v-15f79fc3><h3 data-v-15f79fc3>听力模式</h3><p data-v-15f79fc3>通过听音辨词来提升听力能力</p></div><div class="mode-features" data-v-15f79fc3><span class="feature-tag" data-v-15f79fc3>听力训练</span><span class="feature-tag" data-v-15f79fc3>发音练习</span></div>',3)])])]),a[27]||(a[27]=V('<div class="practice-stats" data-v-15f79fc3><div class="stat-item" data-v-15f79fc3><div class="stat-number" data-v-15f79fc3>1500+</div><div class="stat-label" data-v-15f79fc3>词汇量</div></div><div class="stat-item" data-v-15f79fc3><div class="stat-number" data-v-15f79fc3>3</div><div class="stat-label" data-v-15f79fc3>练习模式</div></div><div class="stat-item" data-v-15f79fc3><div class="stat-number" data-v-15f79fc3>∞</div><div class="stat-label" data-v-15f79fc3>练习次数</div></div></div>',1))])):"settings"===s.currentStep?(C(),m("div",ms,[a[34]||(a[34]=w("h2",null,"练习设置",-1)),w("div",ws,[a[28]||(a[28]=w("label",null,"练习单词数量",-1)),F(w("input",{type:"number","onUpdate:modelValue":a[4]||(a[4]=e=>s.settings.wordCount=e),min:"1",max:"50",placeholder:"输入单词数量"},null,512),[[I,s.settings.wordCount]])]),w("div",ys,[a[30]||(a[30]=w("label",null,"难度级别",-1)),F(w("select",{"onUpdate:modelValue":a[5]||(a[5]=e=>s.settings.difficulty=e)},[...a[29]||(a[29]=[w("option",{value:"全部"},"全部",-1),w("option",{value:"简单"},"简单",-1),w("option",{value:"中等"},"中等",-1),w("option",{value:"困难"},"困难",-1)])],512),[[A,s.settings.difficulty]])]),w("div",bs,[a[33]||(a[33]=w("label",null,"单词范围",-1)),w("div",ks,[w("label",null,[F(w("input",{type:"radio","onUpdate:modelValue":a[6]||(a[6]=e=>s.settings.wordRange=e),value:"today"},null,512),[[P,s.settings.wordRange]]),a[31]||(a[31]=D(" 今天的单词 ",-1))]),w("label",null,[F(w("input",{type:"radio","onUpdate:modelValue":a[7]||(a[7]=e=>s.settings.wordRange=e),value:"all"},null,512),[[P,s.settings.wordRange]]),a[32]||(a[32]=D(" 所有单词 ",-1))])])]),w("div",Cs,[w("button",{class:"back-btn",onClick:a[8]||(a[8]=()=>{s.backToModeSelection(),s.refreshPage()})},"返回"),w("button",{class:"start-btn",onClick:a[9]||(a[9]=(...e)=>s.startPractice&&s.startPractice(...e)),disabled:s.loading},O(s.loading?"准备中...":"开始练习"),9,Ss)])])):x("",!0),s.loading?(C(),m("div",Ds,[...a[35]||(a[35]=[w("div",{class:"loading-spinner"},null,-1),w("p",null,"正在准备练习内容...",-1)])])):x("",!0),"flashcard"===s.currentStep&&s.practiceWords.length>0?(C(),m("div",xs,[w("div",Ts,[w("div",Ms,[w("div",{class:"progress-fill",style:L({width:s.progressPercentage+"%"})},null,4)]),w("span",null,O(s.currentIndex+1)+" / "+O(s.practiceWords.length),1)]),w("div",Ws,[w("div",{class:z(["flashcard",{flipped:s.isFlipped}]),onClick:a[10]||(a[10]=(...e)=>s.flipCard&&s.flipCard(...e))},[w("div",_s,[w("h3",null,O(s.currentWord.word),1),s.currentWord.phonetic?(C(),m("p",Os,O(s.currentWord.phonetic),1)):x("",!0)]),w("div",Ls,[a[36]||(a[36]=w("h4",null,"释义",-1)),w("p",Vs,O(s.currentWord.meaning),1),s.currentWord.phonetic?(C(),m("div",Fs,[w("span",null,O(s.currentWord.phonetic),1)])):x("",!0),s.currentWord.example?(C(),m("p",Is,O(s.currentWord.example),1)):x("",!0)])],2)]),w("div",zs,[w("button",{class:"audio-btn",onClick:a[11]||(a[11]=e=>s.playSound(s.currentWord.word))},[...a[37]||(a[37]=[w("i",{class:"fas fa-volume-up"},null,-1),D(" 发音 ",-1)])]),w("button",{class:"flip-hint-btn",onClick:a[12]||(a[12]=(...e)=>s.flipCard&&s.flipCard(...e))},O(s.isFlipped?"查看单词":"查看释义"),1)]),w("div",As,[w("button",{class:"nav-btn",onClick:a[13]||(a[13]=(...e)=>s.prevWord&&s.prevWord(...e)),disabled:0===s.currentIndex}," 上一个 ",8,Es),w("button",{class:"nav-btn",onClick:a[14]||(a[14]=(...e)=>s.nextWord&&s.nextWord(...e)),disabled:s.currentIndex===s.practiceWords.length-1},O(s.currentIndex===s.practiceWords.length-1?"完成练习":"下一个"),9,Ps)])])):"quiz"===s.currentStep&&s.practiceWords.length>0?(C(),m("div",js,[w("div",Us,[w("div",Bs,[w("div",{class:"progress-fill",style:L({width:s.progressPercentage+"%"})},null,4)]),w("span",null,O(s.currentIndex+1)+" / "+O(s.practiceWords.length),1)]),w("div",Rs,[w("h3",null,'请选择单词 "'+O(s.currentWord.word)+'" 的正确释义',1)]),w("div",qs,[(C(!0),m(M,null,W(s.quizOptions,(e,a)=>(C(),m("div",{key:a,class:z(["quiz-option",{selected:s.selectedOption===a,correct:s.showResult&&s.selectedOption===a&&s.isCorrect,incorrect:s.showResult&&s.selectedOption===a&&!s.isCorrect,"correct-answer":s.showResult&&String(e).replace(/\s+/g,"").toLowerCase()===String(s.currentWord.meaning).replace(/\s+/g,"").toLowerCase()}]),onClick:e=>s.selectOption(a)},[w("span",null,O(e),1)],10,Ns))),128))]),s.showResult?(C(),m("div",$s,[s.isCorrect?(C(),m("div",Ys,[...a[38]||(a[38]=[w("p",null,"✓ 正确！",-1)])])):(C(),m("div",Hs,[a[39]||(a[39]=w("p",null,"✗ 错误",-1)),w("p",null,"正确答案: "+O(s.currentWord.meaning),1)]))])):x("",!0),w("div",Js,[s.showResult?(C(),m("button",{key:1,class:"next-btn",onClick:a[16]||(a[16]=(...e)=>s.nextQuiz&&s.nextQuiz(...e))},O(s.currentIndex===s.practiceWords.length-1?"查看结果":"下一题"),1)):(C(),m("button",{key:0,class:"submit-btn",onClick:a[15]||(a[15]=(...e)=>s.submitQuiz&&s.submitQuiz(...e)),disabled:-1===s.selectedOption}," 提交 ",8,Qs))])])):"listening"===s.currentStep&&s.practiceWords.length>0?(C(),m("div",Ks,[w("div",Zs,[w("div",Gs,[w("div",{class:"progress-fill",style:L({width:s.progressPercentage+"%"})},null,4)]),w("span",null,O(s.currentIndex+1)+" / "+O(s.practiceWords.length),1)]),w("div",Xs,[w("button",{class:"play-audio-btn",onClick:a[17]||(a[17]=e=>s.playSound(s.currentWord.word))},[...a[40]||(a[40]=[w("i",{class:"fas fa-volume-up"},null,-1),D(" 播放发音 ",-1)])]),a[41]||(a[41]=w("p",{class:"listen-hint"},"请选择听到的单词",-1)),w("div",el,[(C(!0),m(M,null,W(s.listeningOptions,(e,a)=>(C(),m("button",{key:a,class:z(["option-btn",{selected:s.selectedOption===a,correct:s.showResult&&a===s.correctOptionIndex,incorrect:s.showResult&&s.selectedOption===a&&s.selectedOption!==s.correctOptionIndex}]),onClick:e=>s.selectOption(a)},O(e),11,al))),128))]),w("div",tl,[s.showResult?(C(),m("button",{key:1,class:"next-quiz-btn",onClick:a[19]||(a[19]=(...e)=>s.nextQuiz&&s.nextQuiz(...e))},O(s.currentIndex===s.practiceWords.length-1?"查看结果":"下一题"),1)):(C(),m("button",{key:0,class:"submit-btn",onClick:a[18]||(a[18]=(...e)=>s.submitQuiz&&s.submitQuiz(...e)),disabled:-1===s.selectedOption}," 提交 ",8,sl))])])])):"result"===s.currentStep?(C(),m("div",ll,[w("div",il,[a[47]||(a[47]=w("div",{class:"result-header"},[w("h3",null,"练习完成！")],-1)),w("div",nl,[w("div",rl,[w("span",ol,O(s.results.correct),1),a[42]||(a[42]=w("span",{class:"stat-label"},"正确",-1))]),w("div",dl,[w("span",cl,O(s.results.total),1),a[43]||(a[43]=w("span",{class:"stat-label"},"总题数",-1))]),w("div",ul,[w("span",vl,O(s.results.score)+"%",1),a[44]||(a[44]=w("span",{class:"stat-label"},"正确率",-1))])]),w("div",pl,[w("button",{class:"result-btn",onClick:a[20]||(a[20]=()=>{s.restartPractice(),s.refreshPage()})},[...a[45]||(a[45]=[w("i",{class:"fas fa-redo"},null,-1),D(" 重新练习 ",-1)])]),w("button",{class:"result-btn",onClick:a[21]||(a[21]=()=>{s.backToModeSelection(),s.refreshPage()})},[...a[46]||(a[46]=[w("i",{class:"fas fa-home"},null,-1),D(" 返回首页 ",-1)])])])])])):x("",!0)])}],["__scopeId","data-v-15f79fc3"]]),gl={class:"diary-container"},fl={class:"diary-header"},ml={class:"header-content"},wl={class:"header-stats"},yl={class:"stat-card"},bl={class:"stat-number"},kl={class:"stat-card"},Cl={class:"stat-number"},Sl={class:"diary-main"},Dl={class:"diary-navigation"},xl={class:"nav-tabs"},Tl={key:0,class:"diary-edit-section"},Ml={class:"edit-header"},Wl={class:"date-selector-card"},_l={class:"date-input-group"},Ol={class:"edit-content"},Ll={class:"input-card"},Vl={class:"input-card"},Fl={class:"edit-actions"},Il={key:1,class:"diary-list-section"},zl={class:"list-header"},Al={class:"search-card"},El={class:"search-input-wrapper"},Pl={class:"list-content"},jl={key:0,class:"empty-state"},Ul={key:1,class:"diary-grid"},Bl=["onClick"],Rl={class:"diary-card-header"},ql={class:"diary-date"},Nl={class:"diary-word-count"},$l={class:"diary-card-content"},Yl={class:"diary-title"},Hl={class:"diary-preview"},Jl={class:"diary-card-footer"},Ql={class:"diary-mood"},Kl={class:"diary-detail"},Zl={class:"diary-detail-header"},Gl={class:"diary-detail-date"},Xl={class:"diary-detail-stats"},ei={class:"word-count"},ai={class:"diary-detail-content"};const ti=Ne({name:"Diary",props:{words:{type:Array,default:()=>[]}},setup(e){const t=a(c()),s=a({title:"",content:""}),l=a("edit"),i=a([]),n=a(""),r=a(!1),o=a(null);function c(){return(new Date).toISOString().split("T")[0]}const u=v(()=>{if(!i.value||0===i.value.length)return[];const e=n.value.toLowerCase().trim();return e?i.value.filter(a=>{var t;return(null==(t=a.title)?void 0:t.toLowerCase().includes(e))||a.content.toLowerCase().includes(e)||a.date.includes(e)}):i.value});function p(e){try{const a=JSON.parse(localStorage.getItem("dailyEnglishDiaries")||"{}");s.value=a[e]||{title:"",content:""}}catch(a){s.value={title:"",content:""}}}function h(){try{const e=JSON.parse(localStorage.getItem("dailyEnglishDiaries")||"{}"),a=[];Object.keys(e).forEach(t=>{e[t]&&e[t].content&&a.push({date:t,title:e[t].title||"",content:e[t].content})}),i.value=a.sort((e,a)=>new Date(a.date)-new Date(e.date))}catch(e){i.value=[]}}function g(){try{const e=JSON.parse(localStorage.getItem("dailyEnglishDiaries")||"{}");e[t.value]=s.value,localStorage.setItem("dailyEnglishDiaries",JSON.stringify(e)),h(),s.value={title:"",content:""},$.success("日记保存成功")}catch(e){$.error("保存日记失败，请重试")}}d(t,e=>{p(e)}),p(t.value);window.addEventListener("wordUpdated",()=>{});const f=v(()=>i.value.length),m=v(()=>{if(0===i.value.length)return 0;const e=i.value.map(e=>new Date(e.date)).sort((e,a)=>a-e);let a=0;const t=new Date;t.setHours(0,0,0,0);for(let s=0;s<e.length;s++){const l=new Date(t);if(l.setDate(t.getDate()-s),l.setHours(0,0,0,0),e[s].getTime()!==l.getTime())break;a++}return a});return{selectedDate:t,currentDiary:s,activeTab:l,diariesList:i,filteredDiaries:u,searchQuery:n,showDiaryDetail:r,selectedDiaryDetail:o,totalDiaries:f,currentStreak:m,saveDiary:g,clearDiary:function(){s.value={title:"",content:""},g()},resetDate:function(){t.value=c()},onDateChange:function(e){p(e)},onTabChange:function(e){"list"===e.paneName&&h()},viewDiary:function(e){o.value=e,r.value=!0},getDefaultTitle:function(e){if(!e.content)return"无标题日记";const a=e.content.split("\n")[0];return a.length>20?a.substring(0,20)+"...":a||"无标题日记"},getPreview:function(e){return e?e.length>80?e.substring(0,80)+"...":e:""},formatDate:function(e){return e?new Date(e).toLocaleDateString("zh-CN",{year:"numeric",month:"long",day:"numeric",weekday:"long"}):""},getDiaryWordCount:function(e){return e&&e.content?e.content.replace(/\s/g,"").length:0},getDiaryMood:function(e){if(!e||!e.content)return"😊";const a=e.content.toLowerCase();return a.includes("困难")||a.includes("挑战")||a.includes("问题")?"💪":a.includes("开心")||a.includes("成功")||a.includes("进步")?"😊":a.includes("累")||a.includes("疲惫")||a.includes("压力")?"😔":"📝"},switchToList:function(){l.value="list",h()}}}},[["render",function(e,a,t,s,l,i){var n;const r=k("el-date-picker"),o=k("el-input"),d=k("el-dialog");return C(),m("div",gl,[a[29]||(a[29]=w("div",{class:"bg-gradient"},null,-1)),a[30]||(a[30]=w("div",{class:"bg-circle"},null,-1)),a[31]||(a[31]=w("div",{class:"bg-circle"},null,-1)),w("header",fl,[w("div",ml,[a[13]||(a[13]=w("div",{class:"header-title"},[w("h1",null,"学习日记"),w("p",{class:"header-subtitle"},"记录每一天的学习成长")],-1)),w("div",wl,[w("div",yl,[w("div",bl,O(s.totalDiaries),1),a[11]||(a[11]=w("div",{class:"stat-label"},"日记总数",-1))]),w("div",kl,[w("div",Cl,O(s.currentStreak),1),a[12]||(a[12]=w("div",{class:"stat-label"},"连续天数",-1))])])])]),w("main",Sl,[w("div",Dl,[w("div",xl,[w("button",{class:z(["nav-tab",{active:"edit"===s.activeTab}]),onClick:a[0]||(a[0]=e=>s.activeTab="edit")},[...a[14]||(a[14]=[w("i",{class:"fas fa-pen"},null,-1),w("span",null,"写日记",-1)])],2),w("button",{class:z(["nav-tab",{active:"list"===s.activeTab}]),onClick:a[1]||(a[1]=(...e)=>s.switchToList&&s.switchToList(...e))},[...a[15]||(a[15]=[w("i",{class:"fas fa-list"},null,-1),w("span",null,"日记列表",-1)])],2)])]),"edit"===s.activeTab?(C(),m("section",Tl,[w("div",Ml,[w("div",Wl,[a[16]||(a[16]=w("label",{class:"date-label"},"选择日期",-1)),w("div",_l,[y(r,{modelValue:s.selectedDate,"onUpdate:modelValue":a[2]||(a[2]=e=>s.selectedDate=e),type:"date",placeholder:"选择日期",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD",onChange:s.onDateChange,class:"date-picker"},null,8,["modelValue","onChange"]),w("button",{class:"today-btn",onClick:a[3]||(a[3]=(...e)=>s.resetDate&&s.resetDate(...e))},"今天")])])]),w("div",Ol,[w("div",Ll,[a[17]||(a[17]=w("div",{class:"input-header"},[w("i",{class:"fas fa-heading"}),w("span",null,"日记标题")],-1)),y(o,{modelValue:s.currentDiary.title,"onUpdate:modelValue":a[4]||(a[4]=e=>s.currentDiary.title=e),placeholder:"给今天的学习起个标题...",class:"title-input",size:"large"},null,8,["modelValue"])]),w("div",Vl,[a[18]||(a[18]=w("div",{class:"input-header"},[w("i",{class:"fas fa-file-alt"}),w("span",null,"日记内容")],-1)),y(o,{modelValue:s.currentDiary.content,"onUpdate:modelValue":a[5]||(a[5]=e=>s.currentDiary.content=e),type:"textarea",rows:12,placeholder:"记录今天的学习心得、遇到的困难、解决的方法、收获的知识...",class:"content-input",resize:"none"},null,8,["modelValue"])])]),w("div",Fl,[w("button",{class:"action-btn clear-btn",onClick:a[6]||(a[6]=(...e)=>s.clearDiary&&s.clearDiary(...e))},[...a[19]||(a[19]=[w("i",{class:"fas fa-trash"},null,-1),w("span",null,"清空",-1)])]),w("button",{class:"action-btn save-btn",onClick:a[7]||(a[7]=(...e)=>s.saveDiary&&s.saveDiary(...e))},[...a[20]||(a[20]=[w("i",{class:"fas fa-save"},null,-1),w("span",null,"保存日记",-1)])])])])):"list"===s.activeTab?(C(),m("section",Il,[w("div",zl,[w("div",Al,[w("div",El,[a[21]||(a[21]=w("i",{class:"fas fa-search"},null,-1)),y(o,{modelValue:s.searchQuery,"onUpdate:modelValue":a[8]||(a[8]=e=>s.searchQuery=e),placeholder:"搜索日记标题、内容或日期...",class:"search-input",size:"large",clearable:""},null,8,["modelValue"])])])]),w("div",Pl,[0===s.filteredDiaries.length?(C(),m("div",jl,[a[23]||(a[23]=w("div",{class:"empty-icon"},[w("i",{class:"fas fa-book-open"})],-1)),a[24]||(a[24]=w("h3",null,"暂无日记记录",-1)),a[25]||(a[25]=w("p",null,"开始记录你的学习之旅吧！",-1)),w("button",{class:"start-writing-btn",onClick:a[9]||(a[9]=e=>s.activeTab="edit")},[...a[22]||(a[22]=[w("i",{class:"fas fa-pen"},null,-1),w("span",null,"开始写日记",-1)])])])):(C(),m("div",Ul,[(C(!0),m(M,null,W(s.filteredDiaries,e=>(C(),m("div",{key:e.date,class:"diary-card",onClick:a=>s.viewDiary(e)},[w("div",Rl,[w("div",ql,[a[26]||(a[26]=w("i",{class:"fas fa-calendar"},null,-1)),w("span",null,O(s.formatDate(e.date)),1)]),w("div",Nl,O(s.getDiaryWordCount(e))+" 字 ",1)]),w("div",$l,[w("h3",Yl,O(e.title||s.getDefaultTitle(e)),1),w("p",Hl,O(s.getPreview(e.content)),1)]),w("div",Jl,[w("div",Ql,O(s.getDiaryMood(e)),1),a[27]||(a[27]=w("div",{class:"diary-action"},[w("i",{class:"fas fa-arrow-right"})],-1))])],8,Bl))),128))]))])])):x("",!0)]),y(d,{modelValue:s.showDiaryDetail,"onUpdate:modelValue":a[10]||(a[10]=e=>s.showDiaryDetail=e),title:(null==(n=s.selectedDiaryDetail)?void 0:n.title)||"日记详情",width:"70%",class:"diary-detail-dialog","destroy-on-close":""},{default:b(()=>{var e,t;return[w("div",Kl,[w("div",Zl,[w("div",Gl,[a[28]||(a[28]=w("i",{class:"fas fa-calendar"},null,-1)),w("span",null,O(s.formatDate(null==(e=s.selectedDiaryDetail)?void 0:e.date)),1)]),w("div",Xl,[w("span",ei,O(s.getDiaryWordCount(s.selectedDiaryDetail))+" 字",1)])]),w("div",ai,O(null==(t=s.selectedDiaryDetail)?void 0:t.content),1)])]}),_:1},8,["modelValue","title"])])}],["__scopeId","data-v-7cbfd519"]]),si={class:"stats-view-container"},li={class:"stats-header"},ii={class:"header-content"},ni={class:"header-left"},ri={class:"header-icon"},oi={class:"header-actions"},di={class:"update-time"},ci={class:"real-time-indicator"},ui={class:"stats-main"},vi={class:"core-metrics"},pi={class:"metrics-grid"},hi={class:"metric-content"},gi={class:"metric-icon"},fi={class:"metric-info"},mi={class:"metric-number"},wi={class:"metric-content"},yi={class:"metric-icon"},bi={class:"metric-info"},ki={class:"metric-number"},Ci={class:"metric-content"},Si={class:"metric-info"},Di={class:"metric-number"},xi={class:"metric-progress"},Ti={class:"progress-bar"},Mi={class:"progress-text"},Wi={class:"metric-content"},_i={class:"metric-info"},Oi={class:"metric-number"},Li={class:"detailed-analysis"},Vi={class:"analysis-grid"},Fi={class:"card-header"},Ii={class:"card-period"},zi={class:"card-content"},Ai={class:"trend-chart"},Ei={class:"chart-container"},Pi={class:"trend-bars"},ji={class:"trend-count"},Ui={class:"trend-label"},Bi={class:"trend-date"},Ri={class:"card-content"},qi={key:0,class:"tag-list"},Ni={class:"tag-info"},$i={class:"tag-name"},Yi={class:"tag-count"},Hi={class:"tag-progress"},Ji={class:"progress-bar"},Qi={class:"tag-percentage"},Ki={key:1,class:"empty-state"},Zi={class:"card-content"},Gi={class:"efficiency-display"},Xi={class:"efficiency-score"},en={class:"efficiency-details"},an={class:"efficiency-description"},tn={class:"efficiency-tips"},sn={class:"tip-item"},ln={class:"card-content"},nn={class:"goal-display"},rn={class:"goal-current"},on={class:"goal-number"},dn={class:"goal-progress"},cn={class:"progress-ring"},un={width:"80",height:"80"},vn=["stroke-dashoffset"],pn={class:"progress-text"},hn={class:"progress-percentage"},gn={class:"goal-status"},fn={class:"target-setting"},mn={class:"target-input-group"},wn={class:"target-suggestions"},yn={class:"suggestion-buttons"},bn=["onClick"],kn={class:"dialog-footer"},Cn=Ne({__name:"StatsView",props:{words:{type:Array,default:()=>[]},dailyTarget:{type:Number,default:20}},emits:["update:dailyTarget","refresh"],setup(e,{emit:t}){const s=e,l=t,i=Re(),n=a(!1),r=a(!1),o=a(7),c=a(!1),u=a(new Date),p=a(s.dailyTarget||20),h=a(p.value);let S=null;const x=()=>(new Date).toISOString().split("T")[0],T=()=>{h.value=p.value,r.value=!0},_=()=>{h.value>0&&(localStorage.setItem("dailyEnglishTarget",h.value.toString()),l("update:dailyTarget",h.value),r.value=!1,$.success("每日学习目标已更新"))},V=async()=>{c.value=!0;try{await i.loadFromDB(),u.value=new Date,$.success({message:"数据已手动刷新",duration:2e3,showClose:!0}),Q()}catch(e){$.error({message:"刷新数据失败",duration:3e3,showClose:!0})}finally{setTimeout(()=>{c.value=!1},1e3)}},I=e=>{const a=new Date-e,t=Math.floor(a/1e3),s=Math.floor(t/60),l=Math.floor(s/60);return t<60?"刚刚更新":s<60?`${s}分钟前更新`:l<24?`${l}小时前更新`:e.toLocaleDateString("zh-CN",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})},E=(e,a)=>{const t=e/a*100;return t>=100?"🎉 目标达成！":t>=80?"💪 即将完成":t>=50?"📈 进展顺利":t>=20?"🚀 开始加速":"🌱 刚刚开始"};v(()=>{const e=x(),a=i.words,t=a.filter(a=>a.date===e),s=new Set;a.forEach(e=>{e.date&&s.add(e.date)});const l=s.size,n=a.filter(e=>e.mastered).length;return{totalWords:a.length,todayWords:t.length,studyDays:l,dailyTarget:p.value,mastered:n}});const P=v(()=>{const e=(e=>{const a=[],t=new Date,s=["日","一","二","三","四","五","六"];for(let l=e-1;l>=0;l--){const e=new Date(t);e.setDate(e.getDate()-l);const i=e.toISOString().split("T")[0],n=s[e.getDay()];a.push({date:i,count:0,height:0,label:n,shortDate:`${e.getMonth()+1}/${e.getDate()}`})}return a})(14),a=i.words,t={};a.forEach(e=>{e.date&&(t[e.date]=(t[e.date]||0)+1)});const s=Math.max(...Object.values(t),1);return e.forEach(e=>{e.count=t[e.date]||0,e.height=e.count>0?e.count/s*100:0}),e}),U=v(()=>P.value.slice(-o.value)),B=v(()=>{const e={};i.words.forEach(a=>{a.tags&&a.tags.length>0&&a.tags.forEach(a=>{e[a]=(e[a]||0)+1})});const a=Object.values(e).reduce((e,a)=>e+a,0);return 0===a?[]:Object.keys(e).map(t=>({name:t,count:e[t],percentage:Math.round(e[t]/a*100),color:J()}))}),R=v(()=>{const e=x(),a=i.words.filter(a=>a.date===e);if(0===a.length)return 0;const t=a.filter(e=>e.mastered).length/a.length,s=a.reduce((e,a)=>e+(a.reviewCount||0),0)/a.length;return Math.round(60*t+40*(2-Math.min(s/5,1)))}),q=v(()=>i.words.length),N=v(()=>{const e=x();return i.words.filter(a=>a.date===e).length}),Y=v(()=>{const e=new Set;return i.words.forEach(a=>{a.date&&e.add(a.date)}),e.size}),H=v(()=>i.words.filter(e=>e.mastered).length);function J(){const e=["#409EFF","#67C23A","#E6A23C","#F56C6C","#909399"];return e[Math.floor(Math.random()*e.length)]}d(()=>i.words,(e,a)=>{u.value=new Date,Q(),$.success({message:"统计数据已更新",duration:2e3,showClose:!0})},{deep:!0}),d(()=>i.diaries,()=>{u.value=new Date},{deep:!0});const Q=()=>{document.querySelectorAll(".metric-card, .analysis-card").forEach((e,a)=>{e.style.transform="scale(0.95)",e.style.transition="transform 0.3s ease",setTimeout(()=>{e.style.transform="scale(1)"},100+50*a)}),n.value=!1,setTimeout(()=>{n.value=!0},100)};g(async()=>{i.initialized||await i.initialize();const e=localStorage.getItem("dailyEnglishTarget");e&&(p.value=parseInt(e)),setTimeout(()=>{document.querySelectorAll(".metric-card, .analysis-card").forEach((e,a)=>{setTimeout(()=>{e.classList.add("metric-animate","analysis-animate")},100*a)})},100),S=d(()=>i.lastUpdated,()=>{u.value=new Date}),window.addEventListener("wordUpdated",K)});const K=()=>{u.value=new Date,Q()};return f(()=>{S&&S(),window.removeEventListener("wordUpdated",K)}),(e,a)=>{const t=k("TrendCharts"),s=k("Document"),l=k("Calendar");return C(),m("div",si,[a[35]||(a[35]=w("div",{class:"background-decoration"},[w("div",{class:"bg-circle bg-circle-1"}),w("div",{class:"bg-circle bg-circle-2"}),w("div",{class:"bg-gradient"})],-1)),w("header",li,[w("div",ii,[w("div",ni,[w("div",ri,[y(t)]),a[4]||(a[4]=w("div",{class:"header-text"},[w("h1",{class:"header-title"},"学习统计"),w("p",{class:"header-subtitle"},"追踪你的学习进度和成就")],-1))]),w("div",oi,[w("div",di,[a[5]||(a[5]=w("i",{class:"fas fa-clock"},null,-1)),w("span",null,O(I(u.value)),1)]),w("div",ci,[w("div",{class:z(["indicator-dot",{active:!c.value}])},null,2),a[6]||(a[6]=w("span",{class:"indicator-text"},"实时更新",-1))]),w("button",{class:z(["refresh-btn",{refreshing:c.value}]),onClick:V},[w("i",{class:z(["fas fa-sync-alt",{"fa-spin":c.value}])},null,2),a[7]||(a[7]=w("span",null,"刷新数据",-1))],2)])])]),w("main",ui,[w("section",vi,[w("div",pi,[w("div",{class:z(["metric-card total-words",{"metric-animate":n.value}])},[w("div",hi,[w("div",gi,[y(s)]),w("div",fi,[w("div",mi,O(q.value),1),a[8]||(a[8]=w("div",{class:"metric-label"},"总单词数",-1))]),a[9]||(a[9]=w("div",{class:"metric-trend positive"},[w("i",{class:"fas fa-arrow-up"}),w("span",null,"+12%")],-1))])],2),w("div",{class:z(["metric-card study-days",{"metric-animate":n.value}])},[w("div",wi,[w("div",yi,[y(l)]),w("div",bi,[w("div",ki,O(Y.value),1),a[10]||(a[10]=w("div",{class:"metric-label"},"学习天数",-1))]),a[11]||(a[11]=w("div",{class:"metric-trend positive"},[w("i",{class:"fas fa-arrow-up"}),w("span",null,"+7天")],-1))])],2),w("div",{class:z(["metric-card today-words",{"metric-animate":n.value}])},[w("div",Ci,[a[13]||(a[13]=w("div",{class:"metric-icon"},[w("i",{class:"fas fa-sun"})],-1)),w("div",Si,[w("div",Di,O(N.value),1),a[12]||(a[12]=w("div",{class:"metric-label"},"今日单词",-1))]),w("div",xi,[w("div",Ti,[w("div",{class:"progress-fill",style:L({width:Math.min(N.value/p.value*100,100)+"%"})},null,4)]),w("span",Mi,O(p.value)+" 目标",1)])])],2),w("div",{class:z(["metric-card mastered-words",{"metric-animate":n.value}])},[w("div",Wi,[a[15]||(a[15]=w("div",{class:"metric-icon"},[w("i",{class:"fas fa-star"})],-1)),w("div",_i,[w("div",Oi,O(H.value),1),a[14]||(a[14]=w("div",{class:"metric-label"},"已掌握",-1))]),a[16]||(a[16]=w("div",{class:"metric-trend positive"},[w("i",{class:"fas fa-arrow-up"}),w("span",null,"+5")],-1))])],2)])]),w("section",Li,[w("div",Vi,[w("div",{class:z(["analysis-card trend-analysis",{"analysis-animate":n.value}])},[w("div",Fi,[a[18]||(a[18]=w("div",{class:"card-title"},[w("i",{class:"fas fa-chart-bar"}),w("span",null,"学习趋势")],-1)),w("div",Ii,[F(w("select",{"onUpdate:modelValue":a[0]||(a[0]=e=>o.value=e),class:"period-selector"},[...a[17]||(a[17]=[w("option",{value:"7"},"最近7天",-1),w("option",{value:"14"},"最近14天",-1),w("option",{value:"30"},"最近30天",-1)])],512),[[A,o.value]])])]),w("div",zi,[w("div",Ai,[w("div",Ei,[w("div",Pi,[(C(!0),m(M,null,W(U.value,e=>(C(),m("div",{key:e.date,class:"trend-bar-container"},[w("div",{class:"trend-bar",style:L({height:e.height+"%"})},[w("span",ji,O(e.count),1)],4),w("div",Ui,O(e.label),1),w("div",Bi,O(e.shortDate),1)]))),128))])])])])],2),w("div",{class:z(["analysis-card tag-distribution",{"analysis-animate":n.value}])},[a[20]||(a[20]=w("div",{class:"card-header"},[w("div",{class:"card-title"},[w("i",{class:"fas fa-tags"}),w("span",null,"标签分布")])],-1)),w("div",Ri,[B.value.length>0?(C(),m("div",qi,[(C(!0),m(M,null,W(B.value,e=>(C(),m("div",{key:e.name,class:"tag-item"},[w("div",Ni,[w("span",$i,O(e.name),1),w("span",Yi,O(e.count)+"个",1)]),w("div",Hi,[w("div",Ji,[w("div",{class:"progress-fill",style:L({width:e.percentage+"%",backgroundColor:e.color})},null,4)]),w("span",Qi,O(e.percentage)+"%",1)])]))),128))])):(C(),m("div",Ki,[...a[19]||(a[19]=[w("div",{class:"empty-icon"},[w("i",{class:"fas fa-tags"})],-1),w("p",null,"暂无标签数据",-1),w("small",null,"开始为单词添加标签来查看分布",-1)])]))])],2),w("div",{class:z(["analysis-card efficiency-analysis",{"analysis-animate":n.value}])},[a[24]||(a[24]=w("div",{class:"card-header"},[w("div",{class:"card-title"},[w("i",{class:"fas fa-trophy"}),w("span",null,"学习效率")])],-1)),w("div",Zi,[w("div",Gi,[w("div",{class:z(["efficiency-circle",{efficient:R.value>70}])},[w("div",Xi,O(R.value),1)],2),w("div",en,[a[23]||(a[23]=w("div",{class:"efficiency-label"},"今日效率评分",-1)),w("div",an,O((i=R.value,i>=90?"学习状态极佳，保持！":i>=70?"学习效率良好，继续努力":i>=50?"学习状态一般，需要加强":"学习效率较低，建议调整方法")),1),w("div",tn,[w("div",sn,[a[21]||(a[21]=w("i",{class:"fas fa-check-circle"},null,-1)),w("span",null,"掌握率: "+O(Math.round(H.value/Math.max(q.value,1)*100))+"%",1)]),a[22]||(a[22]=w("div",{class:"tip-item"},[w("i",{class:"fas fa-clock"}),w("span",null,"复习频率: 良好")],-1))])])])])],2),w("div",{class:z(["analysis-card goal-tracking",{"analysis-animate":n.value}])},[w("div",{class:"card-header"},[a[26]||(a[26]=w("div",{class:"card-title"},[w("i",{class:"fas fa-sun"}),w("span",null,"学习目标")],-1)),w("button",{class:"edit-goal-btn",onClick:T},[...a[25]||(a[25]=[w("i",{class:"fas fa-edit"},null,-1)])])]),w("div",ln,[w("div",nn,[w("div",rn,[w("div",on,O(p.value),1),a[27]||(a[27]=w("div",{class:"goal-label"},"每日目标",-1))]),w("div",dn,[w("div",cn,[(C(),m("svg",un,[a[28]||(a[28]=w("circle",{cx:"40",cy:"40",r:"35",stroke:"#e1e5e9","stroke-width":"6",fill:"none"},null,-1)),w("circle",{cx:"40",cy:"40",r:"35","stroke-dasharray":219.91,"stroke-dashoffset":219.91-219.91*Math.min(N.value/p.value,1),stroke:"url(#gradient)","stroke-width":"6",fill:"none","stroke-linecap":"round",transform:"rotate(-90 40 40)"},null,8,vn),a[29]||(a[29]=w("defs",null,[w("linearGradient",{id:"gradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%"},[w("stop",{offset:"0%",style:{"stop-color":"#667eea","stop-opacity":"1"}}),w("stop",{offset:"100%",style:{"stop-color":"#764ba2","stop-opacity":"1"}})])],-1))])),w("div",pn,[w("span",hn,O(Math.round(N.value/p.value*100))+"%",1)])]),w("div",gn,O(E(N.value,p.value)),1)])])])],2)])])]),y(j(ee),{modelValue:r.value,"onUpdate:modelValue":a[3]||(a[3]=e=>r.value=e),title:"设置每日目标",width:"400px",class:"goal-dialog"},{footer:b(()=>[w("div",kn,[y(j(X),{onClick:a[2]||(a[2]=e=>r.value=!1),size:"large"},{default:b(()=>[...a[33]||(a[33]=[D("取消",-1)])]),_:1}),y(j(X),{type:"primary",onClick:_,size:"large"},{default:b(()=>[...a[34]||(a[34]=[D("确定",-1)])]),_:1})])]),default:b(()=>[w("div",fn,[a[32]||(a[32]=w("p",{class:"setting-description"},"请设置您的每日单词学习目标：",-1)),w("div",mn,[y(j(G),{modelValue:h.value,"onUpdate:modelValue":a[1]||(a[1]=e=>h.value=e),min:1,max:100,size:"large",class:"target-input"},null,8,["modelValue"]),a[30]||(a[30]=w("span",{class:"target-unit"},"个单词",-1))]),w("div",wn,[a[31]||(a[31]=w("div",{class:"suggestion-title"},"快速选择：",-1)),w("div",yn,[(C(),m(M,null,W([10,20,30,50],e=>w("button",{key:e,class:"suggestion-btn",onClick:a=>{return t=e,void(h.value=t);var t}},O(e),9,bn)),64))])])])]),_:1},8,["modelValue"])]);var i}}},[["__scopeId","data-v-17f5ac7c"]]),Sn={key:0,class:"loading-overlay"},Dn={class:"loading-text"},xn={__name:"LoadingOverlay",props:{visible:{type:Boolean,default:!1},text:{type:String,default:""}},setup:e=>(a,t)=>{const s=k("el-icon");return C(),_(E,{name:"fade"},{default:b(()=>[e.visible?(C(),m("div",Sn,[y(s,{class:"loading-icon",size:40},{default:b(()=>[y(j(K))]),_:1}),w("p",Dn,O(e.text||"加载中..."),1)])):x("",!0)]),_:1})}},Tn={id:"app"},Mn={class:"sidebar-nav"},Wn={class:"nav-section"},_n={class:"nav-icon"},On={key:0,class:"nav-badge"},Ln={class:"nav-icon"},Vn={class:"nav-count"},Fn={class:"nav-icon"},In={class:"nav-icon"},zn={class:"nav-icon"},An={class:"nav-section"},En={class:"nav-icon"},Pn={class:"nav-section"},jn={class:"nav-icon"},Un={class:"nav-icon"},Bn={class:"nav-icon"},Rn={class:"sidebar-footer"},qn={class:"user-stats"},Nn={class:"stat-card"},$n={class:"stat-value"},Yn={class:"stat-card"},Hn={class:"stat-value"},Jn={class:"header-left"},Qn={class:"page-title"},Kn={class:"breadcrumb"},Zn={class:"header-right"},Gn={key:0,class:"quick-stats"},Xn={class:"quick-stat"},er={class:"value"},ar={class:"content-wrapper"},tr={class:"content-card"},sr={key:2,class:"mobile-main"},lr={class:"mobile-header"},ir={class:"mobile-stats"},nr={class:"stat-item"},rr={class:"stat-number"},or={class:"stat-item"},dr={class:"stat-number"},cr={class:"stat-item"},ur={class:"stat-number"},vr={class:"mobile-add-section"},pr={key:3,class:"mobile-content"},hr={key:4,class:"mobile-nav"},gr={class:"nav-icon-wrapper"},fr={class:"nav-icon-wrapper"},mr={class:"nav-icon-wrapper"},wr={class:"nav-icon-wrapper"},yr={class:"nav-icon-wrapper"},br={class:"mobile-more-menu"},kr={class:"menu-section"},Cr={class:"menu-section"},Sr={class:"mobile-data-menu"};const Dr=Ne({name:"App",components:{AddWord:Xe,ViewWords:Va,SearchWords:us,PracticeWords:hl,Diary:ti,StatsView:Cn,LoadingOverlay:Ne(xn,[["__scopeId","data-v-469dd729"]]),Plus:Y,View:pe,Search:ve,EditPen:ue,Document:ce,TrendCharts:de,Setting:oe,ArrowDown:re,ArrowRight:ne,Refresh:ie,Upload:le,Download:se,Delete:J,Menu:te,More:ae},setup(){const e=a("add"),t=a(null),s=a(window.innerWidth),l=a(!0),i=a(!1),n=a(!1),r=a(!1),o=a(!1),c=a("加载中..."),u=localStorage.getItem("dailyEnglishTarget"),p=a(u?parseInt(u):20),h=v(()=>s.value<=768),m=Re(),w=v(()=>m.words),y=v(()=>m.totalWords),b=v(()=>m.todayWords),k=v(()=>m.studyDays),C=v(()=>({add:Xe,view:Va,search:us,practice:hl,diary:ti,stats:Cn}[e.value]||Xe)),S=v(()=>({add:"添加单词",view:"查看记录",search:"搜索单词",practice:"单词练习",diary:"学习日记",stats:"学习统计"}[e.value]||"英语学习日记")),D=(e,a="")=>{T(`操作失败: ${e.message||"未知错误"}`,"error")},x=a=>{try{l.value=!1,setTimeout(()=>{e.value=a,setTimeout(()=>{l.value=!0},50)},200)}catch(t){D(t,"切换标签页"),l.value=!0}},T=(e,a="success")=>{qe.notify(e,"",a)},M=()=>{s.value=window.innerWidth};d(e,e=>{"view"===e&&setTimeout(()=>{i.value=!0},300)}),g(async()=>{try{window.addEventListener("resize",M);const e=localStorage.getItem("dailyEnglishTarget");e&&(p.value=parseInt(e)),m.initialized||await m.initialize(),setTimeout(()=>{i.value=!0},500)}catch(e){D(e,"应用初始化"),setTimeout(()=>{i.value=!0},500)}}),f(()=>{window.removeEventListener("resize",M)});const W=async()=>{try{o.value=!0,c.value="导出中...";const e=await m.exportData(),a=JSON.stringify(e,null,2),t=new Blob([a],{type:"application/json"}),s=URL.createObjectURL(t),l=document.createElement("a");l.href=s,l.download=`english_learning_${(new Date).toISOString().split("T")[0]}.json`,document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(s),T("数据导出成功","success")}catch(e){T("导出数据失败","error")}finally{o.value=!1}},_=()=>{var e;null==(e=t.value)||e.click(),n.value=!1},O=async()=>{if(confirm("确定要清空所有数据吗？此操作不可恢复！"))try{o.value=!0,c.value="清空数据中...";if(!(await m.clearAllData()))throw new Error("清空操作未能完全成功");T("所有数据已清空","warning")}catch(e){T("清空数据失败","error")}finally{o.value=!1}n.value=!1};return B("loading",{show:(e="加载中...")=>{c.value=e,o.value=!0},hide:()=>{o.value=!1}}),{currentTab:e,fileInput:t,totalWords:y,todayWords:b,studyDays:k,isMobile:h,contentVisible:l,showStats:i,isLoading:o,loadingText:c,showMobileDataMenu:n,showMobileMenu:r,getPageTitle:S,getCurrentComponent:C,words:w,switchTab:x,switchToTabAndCloseMenu:e=>{try{r.value=!1,x(e)}catch(a){D(a,"切换标签页并关闭菜单")}},showNotification:T,handleError:D,refreshStats:async()=>{try{await m.loadFromDB(),T("数据已刷新","success")}catch(e){T("刷新数据失败","error")}},exportData:W,triggerImport:_,handleImport:async e=>{const a=e.target.files[0];if(!a)return;const t=new FileReader;t.onload=async a=>{var t;try{o.value=!0,c.value="导入中...";const s=JSON.parse(a.target.result);let l=0,i={};if(s.words&&s.diaries)i={words:s.words,diaries:s.diaries};else{if(!Array.isArray(s))throw new Error("无效的数据格式");i={words:s.map(e=>({id:e.id||Date.now()+Math.random().toString(36).substr(2,9),word:e.word||e.name||e.wordName||"",meaning:e.meaning||e.definition||e.translation||"",phonetic:e.phonetic||e.pronunciation||"",example:e.example||e.sample||"",tags:e.tags||[],date:e.date||(new Date).toISOString().split("T")[0],reviewCount:e.reviewCount||0,mastered:e.mastered||!1})).filter(e=>e.word&&e.meaning),diaries:{}}}if(!(await m.importData(i)))throw new Error("导入过程中出现错误");{const e=m.totalWords-((null==(t=i.words)?void 0:t.length)||0);l=m.totalWords-e,T(`成功导入 ${l} 个单词`,"success")}e.target.value="",n.value=!1}catch(s){T("数据导入失败："+s.message,"error")}finally{o.value=!1}},t.readAsText(a)},clearData:O,beforeTabLeave:()=>(l.value=!1,new Promise(e=>{setTimeout(()=>{l.value=!0,e()},200)})),onTabClick:()=>{"view"===e.value&&setTimeout(()=>{i.value=!0},300)},handleDataCommand:e=>{switch(e){case"import":_();break;case"export":W();break;case"clear":O()}}}}},[["render",function(e,a,t,s,l,i){const n=k("LoadingOverlay"),r=k("Plus"),o=k("el-icon"),d=k("View"),c=k("Search"),u=k("EditPen"),v=k("Document"),p=k("TrendCharts"),h=k("Upload"),g=k("Download"),f=k("Delete"),S=k("el-aside"),T=k("ArrowRight"),M=k("el-button"),W=k("More"),L=k("el-dropdown-item"),V=k("el-dropdown-menu"),I=k("el-dropdown"),A=k("Refresh"),P=k("el-header"),j=k("AddWord"),B=k("ViewWords"),R=k("SearchWords"),q=k("PracticeWords"),N=k("Diary"),$=k("StatsView"),Y=k("el-main"),H=k("el-container"),J=k("Menu"),Q=k("el-drawer"),K=k("ErrorBoundary");return C(),m("div",Tn,[y(K,null,{default:b(()=>[s.isLoading?(C(),_(n,{key:0,text:s.loadingText},null,8,["text"])):x("",!0),s.isMobile?x("",!0):(C(),_(H,{key:1,class:"container"},{default:b(()=>[y(S,{class:"sidebar",width:"280px"},{default:b(()=>[a[36]||(a[36]=w("div",{class:"sidebar-header"},[w("div",{class:"brand"},[w("div",{class:"brand-icon"},"📚"),w("div",{class:"brand-text"},[w("h2",null,"英语学习"),w("span",null,"Daily English")])])],-1)),w("nav",Mn,[w("div",Wn,[a[27]||(a[27]=w("div",{class:"nav-section-title"},"学习功能",-1)),w("div",{class:z(["nav-item",{active:"add"===s.currentTab}]),onClick:a[0]||(a[0]=e=>s.switchTab("add"))},[w("div",_n,[y(o,null,{default:b(()=>[y(r)]),_:1})]),a[22]||(a[22]=w("span",null,"添加单词",-1)),s.todayWords>0?(C(),m("div",On,O(s.todayWords),1)):x("",!0)],2),w("div",{class:z(["nav-item",{active:"view"===s.currentTab}]),onClick:a[1]||(a[1]=e=>s.switchTab("view"))},[w("div",Ln,[y(o,null,{default:b(()=>[y(d)]),_:1})]),a[23]||(a[23]=w("span",null,"单词记录",-1)),w("div",Vn,O(s.totalWords),1)],2),w("div",{class:z(["nav-item",{active:"search"===s.currentTab}]),onClick:a[2]||(a[2]=e=>s.switchTab("search"))},[w("div",Fn,[y(o,null,{default:b(()=>[y(c)]),_:1})]),a[24]||(a[24]=w("span",null,"搜索单词",-1))],2),w("div",{class:z(["nav-item",{active:"practice"===s.currentTab}]),onClick:a[3]||(a[3]=e=>s.switchTab("practice"))},[w("div",In,[y(o,null,{default:b(()=>[y(u)]),_:1})]),a[25]||(a[25]=w("span",null,"单词练习",-1))],2),w("div",{class:z(["nav-item",{active:"diary"===s.currentTab}]),onClick:a[4]||(a[4]=e=>s.switchTab("diary"))},[w("div",zn,[y(o,null,{default:b(()=>[y(v)]),_:1})]),a[26]||(a[26]=w("span",null,"学习日记",-1))],2)]),w("div",An,[a[29]||(a[29]=w("div",{class:"nav-section-title"},"数据分析",-1)),w("div",{class:z(["nav-item",{active:"stats"===s.currentTab}]),onClick:a[5]||(a[5]=e=>s.switchTab("stats"))},[w("div",En,[y(o,null,{default:b(()=>[y(p)]),_:1})]),a[28]||(a[28]=w("span",null,"学习统计",-1))],2)]),w("div",Pn,[a[33]||(a[33]=w("div",{class:"nav-section-title"},"数据管理",-1)),w("div",{class:"nav-item",onClick:a[6]||(a[6]=e=>s.handleDataCommand("import"))},[w("div",jn,[y(o,null,{default:b(()=>[y(h)]),_:1})]),a[30]||(a[30]=w("span",null,"导入数据",-1))]),w("div",{class:"nav-item",onClick:a[7]||(a[7]=e=>s.handleDataCommand("export"))},[w("div",Un,[y(o,null,{default:b(()=>[y(g)]),_:1})]),a[31]||(a[31]=w("span",null,"导出数据",-1))]),w("div",{class:"nav-item danger",onClick:a[8]||(a[8]=e=>s.handleDataCommand("clear"))},[w("div",Bn,[y(o,null,{default:b(()=>[y(f)]),_:1})]),a[32]||(a[32]=w("span",null,"清空数据",-1))])])]),w("div",Rn,[w("div",qn,[w("div",Nn,[w("div",$n,O(s.studyDays),1),a[34]||(a[34]=w("div",{class:"stat-label"},"学习天数",-1))]),w("div",Yn,[w("div",Hn,O(s.totalWords),1),a[35]||(a[35]=w("div",{class:"stat-label"},"总单词数",-1))])])])]),_:1}),y(H,{class:"main-container"},{default:b(()=>[y(P,{class:"main-header"},{default:b(()=>[w("div",Jn,[w("h1",Qn,O(s.getPageTitle),1),w("div",Kn,[a[37]||(a[37]=w("span",null,"英语学习",-1)),y(o,null,{default:b(()=>[y(T)]),_:1}),w("span",null,O(s.getPageTitle),1)])]),w("div",Zn,["add"===s.currentTab?(C(),m("div",Gn,[w("div",Xn,[a[38]||(a[38]=w("span",{class:"label"},"今日已学",-1)),w("span",er,O(s.todayWords),1)])])):x("",!0),y(M,{type:"primary",size:"small",onClick:a[9]||(a[9]=e=>s.switchToTabAndCloseMenu("add"))},{default:b(()=>[y(o,null,{default:b(()=>[y(r)]),_:1}),a[39]||(a[39]=D(" 添加单词 ",-1))]),_:1}),y(I,{onCommand:s.handleDataCommand},{dropdown:b(()=>[y(V,null,{default:b(()=>[y(L,{command:"import"},{default:b(()=>[y(o,null,{default:b(()=>[y(h)]),_:1}),a[40]||(a[40]=D(" 导入数据 ",-1))]),_:1}),y(L,{command:"export"},{default:b(()=>[y(o,null,{default:b(()=>[y(g)]),_:1}),a[41]||(a[41]=D(" 导出数据 ",-1))]),_:1}),y(L,{command:"clear",divided:""},{default:b(()=>[y(o,null,{default:b(()=>[y(f)]),_:1}),a[42]||(a[42]=D(" 清空数据 ",-1))]),_:1})]),_:1})]),default:b(()=>[y(M,{size:"small",text:""},{default:b(()=>[y(o,null,{default:b(()=>[y(W)]),_:1})]),_:1})]),_:1},8,["onCommand"]),y(M,{type:"primary",size:"small",onClick:s.refreshStats},{default:b(()=>[y(o,null,{default:b(()=>[y(A)]),_:1}),a[43]||(a[43]=D(" 刷新 ",-1))]),_:1},8,["onClick"])])]),_:1}),y(Y,{class:"main-content"},{default:b(()=>[w("div",ar,[w("div",tr,[y(E,{name:"fade-slide",mode:"in-out"},{default:b(()=>["add"===s.currentTab?(C(),_(j,{key:0})):"view"===s.currentTab?(C(),_(B,{key:1,"show-stats":s.showStats,onDataUpdated:s.refreshStats,onSwitchToAdd:a[10]||(a[10]=e=>s.switchTab("add")),onEditWord:e.editWord},null,8,["show-stats","onDataUpdated","onEditWord"])):"search"===s.currentTab?(C(),_(R,{key:2})):"practice"===s.currentTab?(C(),_(q,{key:3})):"diary"===s.currentTab?(C(),_(N,{key:4})):"stats"===s.currentTab?(C(),_($,{key:5})):x("",!0)]),_:1})])])]),_:1})]),_:1})]),_:1})),s.isMobile&&"add"===s.currentTab?(C(),m("div",sr,[w("div",lr,[w("div",ir,[w("div",nr,[w("div",rr,O(s.totalWords),1),a[44]||(a[44]=w("div",{class:"stat-label"},"单词",-1))]),w("div",or,[w("div",dr,O(s.todayWords),1),a[45]||(a[45]=w("div",{class:"stat-label"},"今日",-1))]),w("div",cr,[w("div",ur,O(s.studyDays),1),a[46]||(a[46]=w("div",{class:"stat-label"},"天数",-1))])]),a[47]||(a[47]=w("div",{class:"mobile-title"},[w("h1",null,"英语学习日记")],-1))]),w("div",vr,[y(j)])])):x("",!0),s.isMobile&&"add"!==s.currentTab?(C(),m("div",pr,[y(E,{name:"fade"},{default:b(()=>[F(w("div",null,["add"===s.currentTab?(C(),_(j,{key:0})):"view"===s.currentTab?(C(),_(B,{key:1,"show-stats":s.showStats,onDataUpdated:s.refreshStats,onSwitchToAdd:a[11]||(a[11]=e=>s.switchTab("add"))},null,8,["show-stats","onDataUpdated"])):"search"===s.currentTab?(C(),_(R,{key:2})):"practice"===s.currentTab?(C(),_(q,{key:3})):"diary"===s.currentTab?(C(),_(N,{key:4})):"stats"===s.currentTab?(C(),_($,{key:5})):x("",!0)],512),[[U,s.contentVisible]])]),_:1})])):x("",!0),s.isMobile?(C(),m("div",hr,[w("div",{class:z(["mobile-nav-item",{active:"add"===s.currentTab}]),onClick:a[12]||(a[12]=e=>s.switchTab("add"))},[w("div",gr,[y(o,null,{default:b(()=>[y(r)]),_:1})]),a[48]||(a[48]=w("span",null,"添加",-1))],2),w("div",{class:z(["mobile-nav-item",{active:"view"===s.currentTab||"search"===s.currentTab}]),onClick:a[13]||(a[13]=e=>s.switchTab("view"))},[w("div",fr,[y(o,null,{default:b(()=>[y(d)]),_:1})]),a[49]||(a[49]=w("span",null,"单词",-1))],2),w("div",{class:z(["mobile-nav-item",{active:"practice"===s.currentTab}]),onClick:a[14]||(a[14]=e=>s.switchTab("practice"))},[w("div",mr,[y(o,null,{default:b(()=>[y(u)]),_:1})]),a[50]||(a[50]=w("span",null,"练习",-1))],2),w("div",{class:z(["mobile-nav-item",{active:"diary"===s.currentTab}]),onClick:a[15]||(a[15]=e=>s.switchTab("diary"))},[w("div",wr,[y(o,null,{default:b(()=>[y(v)]),_:1})]),a[51]||(a[51]=w("span",null,"日记",-1))],2),w("div",{class:"mobile-nav-item",onClick:a[16]||(a[16]=e=>s.showMobileMenu=!0)},[w("div",yr,[y(o,null,{default:b(()=>[y(J)]),_:1})]),a[52]||(a[52]=w("span",null,"更多",-1))])])):x("",!0),y(Q,{modelValue:s.showMobileMenu,"onUpdate:modelValue":a[19]||(a[19]=e=>s.showMobileMenu=e),title:"更多功能",direction:"btt",size:"60%"},{default:b(()=>[w("div",br,[w("div",kr,[a[55]||(a[55]=w("h3",null,"学习功能",-1)),y(M,{type:"primary",onClick:a[17]||(a[17]=e=>s.switchToTabAndCloseMenu("stats")),style:{width:"100%","margin-bottom":"10px"},class:z({"is-active":"stats"===s.currentTab})},{default:b(()=>[y(o,null,{default:b(()=>[y(p)]),_:1}),a[53]||(a[53]=D(" 学习统计 ",-1))]),_:1},8,["class"]),y(M,{type:"info",onClick:a[18]||(a[18]=e=>s.switchToTabAndCloseMenu("search")),style:{width:"100%","margin-bottom":"10px"},class:z({"is-active":"search"===s.currentTab})},{default:b(()=>[y(o,null,{default:b(()=>[y(c)]),_:1}),a[54]||(a[54]=D(" 搜索单词 ",-1))]),_:1},8,["class"])]),w("div",Cr,[a[59]||(a[59]=w("h3",null,"数据管理",-1)),y(M,{type:"success",onClick:s.triggerImport,style:{width:"100%","margin-bottom":"10px"}},{default:b(()=>[y(o,null,{default:b(()=>[y(h)]),_:1}),a[56]||(a[56]=D(" 导入数据 ",-1))]),_:1},8,["onClick"]),y(M,{type:"warning",onClick:s.exportData,style:{width:"100%","margin-bottom":"10px"}},{default:b(()=>[y(o,null,{default:b(()=>[y(g)]),_:1}),a[57]||(a[57]=D(" 导出数据 ",-1))]),_:1},8,["onClick"]),y(M,{type:"danger",onClick:s.clearData,style:{width:"100%"}},{default:b(()=>[y(o,null,{default:b(()=>[y(f)]),_:1}),a[58]||(a[58]=D(" 清空数据 ",-1))]),_:1},8,["onClick"])])])]),_:1},8,["modelValue"]),y(Q,{modelValue:s.showMobileDataMenu,"onUpdate:modelValue":a[20]||(a[20]=e=>s.showMobileDataMenu=e),title:"数据管理",direction:"btt",size:"200px"},{default:b(()=>[w("div",Sr,[y(M,{type:"primary",onClick:s.triggerImport,style:{width:"100%","margin-bottom":"10px"}},{default:b(()=>[y(o,null,{default:b(()=>[y(h)]),_:1}),a[60]||(a[60]=D(" 导入数据 ",-1))]),_:1},8,["onClick"]),y(M,{type:"success",onClick:s.exportData,style:{width:"100%","margin-bottom":"10px"}},{default:b(()=>[y(o,null,{default:b(()=>[y(g)]),_:1}),a[61]||(a[61]=D(" 导出数据 ",-1))]),_:1},8,["onClick"]),y(M,{type:"danger",onClick:s.clearData,style:{width:"100%"}},{default:b(()=>[y(o,null,{default:b(()=>[y(f)]),_:1}),a[62]||(a[62]=D(" 清空数据 ",-1))]),_:1},8,["onClick"])])]),_:1},8,["modelValue"]),w("input",{ref:"fileInput",type:"file",accept:".json",style:{display:"none"},onChange:a[21]||(a[21]=(...e)=>s.handleImport&&s.handleImport(...e))},null,544)]),_:1})])}],["__scopeId","data-v-1f090154"]]),xr={key:0,class:"error-boundary"};const Tr=Ne({name:"ErrorBoundary",props:{fallback:{type:Function,default:null}},data:()=>({hasError:!1,errorMessage:""}),methods:{resetError(){this.hasError=!1,this.errorMessage=""}},errorCaptured(e,a,t){return this.hasError=!0,this.errorMessage=e.message||"未知错误",this.fallback&&this.fallback(e,a,t),!1}},[["render",function(e,a,t,s,l,i){const n=k("el-button"),r=k("el-result");return l.hasError?(C(),m("div",xr,[y(r,{icon:"error",title:"出错了","sub-title":l.errorMessage||"应用遇到了一个问题"},{extra:b(()=>[y(n,{type:"primary",onClick:i.resetError},{default:b(()=>[...a[0]||(a[0]=[D("重试",-1)])]),_:1},8,["onClick"])]),_:1},8,["sub-title"])])):R(e.$slots,"default",{key:1},void 0,!0)}],["__scopeId","data-v-66b0e60c"]]);
/*! Element Plus v2.11.5 */const Mr=q(Dr),Wr=function(){const s=e(!0),l=s.run(()=>a({}));let i=[],n=[];const r=t({install(e){me(r),r._a=e,e.provide(we,r),e.config.globalProperties.$pinia=r,n.forEach(e=>i.push(e)),n=[]},use(e){return this._a?i.push(e):n.push(e),this},_p:i,_a:null,_e:s,_s:new Map,state:l});return r}();Mr.component("ErrorBoundary",Tr),Mr.config.errorHandler=(e,a,t)=>{e.message&&e.message.includes("env")?qe.error("应用配置错误，请检查依赖库版本"):qe.error("应用发生错误，请刷新页面重试")},window.addEventListener("unhandledrejection",e=>{e.reason&&e.reason.message&&e.reason.message.includes("env")?qe.error("应用配置错误，请检查依赖库版本"):qe.error("应用发生未知错误")}),Mr.config.globalProperties.$notify=qe,Mr.use(Wr),Mr.use(he,{locale:{name:"zh-cn",el:{breadcrumb:{label:"面包屑"},colorpicker:{confirm:"确定",clear:"清空",defaultLabel:"颜色选择器",description:"当前颜色 {color}，按 Enter 键选择新颜色",alphaLabel:"选择透明度的值",alphaDescription:"透明度 {alpha}, 当前颜色 {color}",hueLabel:"选择色相值",hueDescription:"色相 {hue}, 当前颜色 {color}"},datepicker:{now:"此刻",today:"今天",cancel:"取消",clear:"清空",confirm:"确定",dateTablePrompt:"使用方向键与 Enter 键可选择日期",monthTablePrompt:"使用方向键与 Enter 键可选择月份",yearTablePrompt:"使用方向键与 Enter 键可选择年份",selectedDate:"已选日期",selectDate:"选择日期",selectTime:"选择时间",startDate:"开始日期",startTime:"开始时间",endDate:"结束日期",endTime:"结束时间",prevYear:"前一年",nextYear:"后一年",prevMonth:"上个月",nextMonth:"下个月",year:"年",month1:"1 月",month2:"2 月",month3:"3 月",month4:"4 月",month5:"5 月",month6:"6 月",month7:"7 月",month8:"8 月",month9:"9 月",month10:"10 月",month11:"11 月",month12:"12 月",weeks:{sun:"日",mon:"一",tue:"二",wed:"三",thu:"四",fri:"五",sat:"六"},weeksFull:{sun:"星期日",mon:"星期一",tue:"星期二",wed:"星期三",thu:"星期四",fri:"星期五",sat:"星期六"},months:{jan:"一月",feb:"二月",mar:"三月",apr:"四月",may:"五月",jun:"六月",jul:"七月",aug:"八月",sep:"九月",oct:"十月",nov:"十一月",dec:"十二月"}},inputNumber:{decrease:"减少数值",increase:"增加数值"},select:{loading:"加载中",noMatch:"无匹配数据",noData:"无数据",placeholder:"请选择"},mention:{loading:"加载中"},dropdown:{toggleDropdown:"切换下拉选项"},cascader:{noMatch:"无匹配数据",loading:"加载中",placeholder:"请选择",noData:"暂无数据"},pagination:{goto:"前往",pagesize:"条/页",total:"共 {total} 条",pageClassifier:"页",page:"页",prev:"上一页",next:"下一页",currentPage:"第 {pager} 页",prevPages:"向前 {pager} 页",nextPages:"向后 {pager} 页",deprecationWarning:"你使用了一些已被废弃的用法，请参考 el-pagination 的官方文档"},dialog:{close:"关闭此对话框"},drawer:{close:"关闭此对话框"},messagebox:{title:"提示",confirm:"确定",cancel:"取消",error:"输入的数据不合法!",close:"关闭此对话框"},upload:{deleteTip:"按 Delete 键可删除",delete:"删除",preview:"查看图片",continue:"继续上传"},slider:{defaultLabel:"滑块介于 {min} 至 {max}",defaultRangeStartLabel:"选择起始值",defaultRangeEndLabel:"选择结束值"},table:{emptyText:"暂无数据",confirmFilter:"筛选",resetFilter:"重置",clearFilter:"全部",sumText:"合计"},tour:{next:"下一步",previous:"上一步",finish:"结束导览",close:"关闭此对话框"},tree:{emptyText:"暂无数据"},transfer:{noMatch:"无匹配数据",noData:"无数据",titles:["列表 1","列表 2"],filterPlaceholder:"请输入搜索内容",noCheckedFormat:"共 {total} 项",hasCheckedFormat:"已选 {checked}/{total} 项"},image:{error:"加载失败"},pageHeader:{title:"返回"},popconfirm:{confirmButtonText:"确定",cancelButtonText:"取消"},carousel:{leftArrow:"上一张幻灯片",rightArrow:"下一张幻灯片",indicator:"幻灯片切换至索引 {index}"}}},size:"default",zIndex:3e3}),Mr.mount("#app");const _r=Re();_r.$onAction(({name:e,after:a,onError:t})=>{"initialize"===e&&(a(()=>{}),t(e=>{}))}),_r.initialize().catch(e=>{qe.error("应用初始化失败，请刷新页面重试")});
